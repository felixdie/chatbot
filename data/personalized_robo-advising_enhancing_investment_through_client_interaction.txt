Capponi, Agostino, et al (2022). “Personalized robo-advising: Enhancing investment through
client interaction.” Management Science. 2485–2512,
https://doi.org/10.1287/mnsc.2021.4014.


Abstract 


Automated 
investment 
managers, 
or 
robo-advisors, 
have 
emerged 
as 
an 
alternative 
to 
traditional 
nancial 
advisors. 
The 
viability 
of 
robo-advisors 
crucially 
depends 
on 
their 
ability 
to 
oer 
personalized 
nancial 
advice. 
We 
introduce 
a 
novel 
framework, 
in 
which 
a 
robo-advisor 
interacts 
with 
a 
client 
to 
solve 
an 
adaptive 
mean-variance 
portfolio 
optimization 
problem. 
The 
risk-return 
tradeoff 
adapts 
to 
the 
client's 
risk 
prole, 
which 
depends 
on 
idiosyncratic 
characteristics, 
market 
returns, 
and 
economic 
conditions. 
We 
show 
that 
the 
optimal 
investment 
strategy 
includes 
both 
myopic 
and 
intertemporal 
hedging 
terms 
which 
are 
impacted 
by 
the 
dynamics 
of 
the 
client's 
risk 
prole. 
We 
characterize 
the 
optimal 
portfolio 
personalization 
via 
a 
tradeoff 
faced 
by 
the 
robo-advisor 
between 
receiving 
client 
information 
in 
a 
timely 
manner 
and 
mitigating 
behavioral 
biases 
in 
the 
risk 
prole 
communicated 
by 
the 
client. 
We 
argue 
that 
the 
optimal 
portfolio's 
Sharpe 
ratio 
and 
return 
distribution 
improve 
if 
the 
robo-advisor 
counters 
the 
client's 
tendency 
to 
reduce 
market 
exposure 
during 
economic 
contractions 
when 
the 
market 
risk-return 
tradeoff 
is 
more 
favorable. 


1 
Introduction 


Automated 
investment 
managers, 
commonly 
referred 
to 
as 
robo-advisors, 
have 
gained 
widespread 
popularity 
in 
recent 
years. 
The 
value 
of 
assets 
under 
management 
by 
robo-advisors 
is 
the 
highest 
in 
the 
United 
States, 
exceeding 
$600 
billion 
in 
2019. 
Major 
robo-advising 
rms 
include 
Vanguard 
Personal 
Advisor 
Services, 
with 
about 
$140 
billion 
of 
assets 
under 
management, 
Schwab 
Intelligent 
Portfolios 
($40bn), 
Wealthfront 
($20bn), 


* 
We 
are 
grateful 
for 
constructive 
comments 
from 
Peter 
Carr, 
Anthony 
Ledford, 
Charles-Albert 
Lehalle, 
Alberto 
Rossi, 
and 
seminar 
participants 
at 
Vanguard, 
the 
Robo-Advising 
Day 
at 
Georgetown 
University's 
Center 
for 
Financial 
Markets 
and 
Policy, 
the 
University 
of 
Southern 
California, 
Boston 
University, 
the 
New 
England 
Statistics 
Symposium, 
the 
CFS 
Workshop 
on 
AI/ML 
in 
Financial 
Services, 
the 
Oxford-Man 
Institute, 
the 
NUS 
Quantitative 
Finance 
Series, 
the 
Brooklyn 
Quant 
Experience 
Lecture 
Series, 
the 
ACPR 
Workshop 
on 
Robo-Advising, 
the 
New 
Ideas 
in 
Quantitative 
Finance 
Workshop 
at 
Stony 
Brook 
University, 
the 
2019 
SIAM-FM 
Annual 
Meeting, 
the 
2019 
ICIAM, 
and 
the 
2020 
INFORMS 
Annual 
Meeting. 
†Department 
of 
Industrial 
Engineering 
and 
Operations 
Research, 
Columbia 
University, 
New 
York, 
NY 
10027, 
USA, 
ac3827@columbia.edu. 


‡Department 
of 
Industrial 
Engineering 
and 
Operations 
Research, 
Columbia 
University, 
New 
York, 
NY 
10027, 
USA, 
so2570@columbia.edu 


§Departments 
of 
Mathematics 
and 
IROM, 
The 
University 
of 
Texas 
at 
Austin, 
and 
the 
Oxford-Man 
Institute, 
University 
of 
Oxford, 
zariphop@math.utexas.edu 


1 



and 
Betterment 
($18bn). 
Robo-advisors 
are 
also 
on 
the 
rise 
in 
other 
parts 
of 
the 
world, 
managing 
over 
$100 
billion 
in 
Europe, 
and 
exhibiting 
rapid 
growth 
in 
Asia 
where 
the 
assets 
under 
management 
exceed 
$75 
billion 
solely 
in 
China 
(Statista 
[2020]). 


The 
rst 
robo-advisors 
were 
launched 
in 
the 
wake 
of 
the 
2008 
nancial 
crisis 
and 
the 
ensuing 
loss 
of 
trust 
in 
established 
nancial 
services 
institutions. 
Examples 
of 
pioneering 
robo-advising 
rms 
are 
Betterment 
and 
Wealthfront, 
which 
began 
oering 
services 
formerly 
considered 
exclusive 
to 
the 
general 
public, 
including 
individuals 
who 
did 
not 
meet 
the 
minimum 
investment 
levels 
of 
traditional 
nancial 
advisors. 
In 
the 
years 
that 
followed, 
industry 
incumbents 
-such 
as 
Vanguard 
and 
Charles 
Schwab 
-followed 
suit 
and 
began 
oering 
their 
own 
robo-advising 
services, 
taking 
advantage 
of 
their 
existing 
customer 
bases 
to 
quickly 
gain 
a 
large 
market 
share. 
With 
the 
focus 
of 
most 
robo-advisors 
being 
on 
passive 
long-term 
portfolio 
management, 
the 
rise 
of 
robo-advising 
since 
the 
nancial 
crisis 
has 
also 
been 
compounded 
by 
the 
seismic 
shift 
towards 
passive 
investing 
and 
low 
cost 
exchange-traded 
funds.1 


Robo-advising 
is 
a 
term 
that 
encompasses 
various 
forms 
of 
digital 
nancial 
advice 
for 
investment 
management 
and 
trading. 
A 
recent 
survey 
paper 
by 
D'Acunto 
and 
Rossi 
[2020] 
distinguishes 
between 
digital 
tools 
and 
services 
that 
aid 
in 
active, 
short-term 
trading, 
with 
the 
client 
actively 
involved 
in 
the 
strategy 
implementation, 
and 
robo-advisors 
that 
focus 
on 
long-term 
passive 
investing 
where 
the 
level 
of 
delegation 
is 
higher. 
We 
develop 
a 
framework 
for 
automated 
investment 
management 
which 
belongs 
to 
the 
latter 
category, 
where 
the 
robo-advisor 
uses 
quantitative 
methods 
and 
algorithms 
to 
manage 
the 
client's 
portfolio. 
We 
explore 
how 
the 
robo-advisor 
can 
use 
features 
of 
the 
client's 
risk 
prole 
to 
determine 
a 
frequency 
of 
interaction 
with 
the 
client 
that 
ensures 
a 
high 
level 
of 
portfolio 
personalization.2 
We 
also 
analyze 
the 
dilemma 
faced 
by 
the 
robo-advisor 
in 
either 
catering 
to 
the 
client's 
wishes, 
i.e., 
investing 
in 
accordance 
with 
the 
client's 
risk 
prole, 
or 
going 
against 
the 
client's 
wishes 
in 
order 
to 
seek 
better 
investment 
performance. 


In 
our 
framework, 
the 
robo-advisor 
interacts 
repeatedly 
with 
the 
client 
to 
learn 
about 
changes 
in 
her 
risk 
prole. 
This 
risk 
prole 
is 
characterized 
by 
a 
risk 
aversion 
process, 
which 
captures 
three 
fundamental 
aspects 
of 
individual 
investor 
behavior. 
First, 
the 
client's 
risk 
aversion 
is 
sensitive 
to 
the 
passage 
of 
time, 
consistent 
with 
empirical 
research 
that 
has 
identied 
a 
positive 
and 
potentially 
nonlinear 
trend 
in 
risk 
aversion 
as 
a 
function 
of 
age 
(see, 
e.g., 
Brooks 
et 
al. 
[2018] 
and 
Hallahan 
et 
al. 
[2004]). 
This 
type 
of 
time-dependence 
has 
also 
been 
used 
in 
the 
construction 
of 
Target 
Date 
Funds, 
which 
are 
widely 
used 
retirement 
portfolios 
that 
reduce 
equity 
risk 
as 
the 
client 
gets 
closer 
to 
retirement.3 
Second, 
risk 
aversion 
is 
impacted 
by 
idiosyncratic 



2Robo-advisors 
are 
duciaries 
under 
the 
Investment 
Advisers 
Act 
of 
1940, 
and 
as 
such 
are 
subject 
to 
the 
duty 
of 
acting 
in 
the 
client's 
best 
interest. 


3Target 
Date 
Funds 
are 
similar 
to 
the 
\set-and-forget” 
portfolios 
oered 
by 
the 
rst 
generation 
of 
robo-advisors, 
where 
changes 
in 
allocation 
over 
time 
are 
solely 
based 
on 
the 
client's 
age. 
While 
TDFs 
have 
virtually 
stayed 
the 
same 
since 
their 
inception 
over 
a 
quarter 
century 
ago, 
the 
technology-driven 
personalized 
advice 
of 
robo-advisors 
has 
continued 
to 
evolve. 


2 



shocks, 
such 
as 
a 
change 
in 
disposable 
income 
or 
an 
increase 
in 
the 
client's 
educational 
level 
or 
nancial 
literacy 
(see, 
e.g, 
Hallahan 
et 
al. 
[2004] 
and 
Allgood 
and 
Walstad 
[2016]). 
These 
shocks 
in 
particular 
capture 
changes 
in 
unobservable 
factors 
driving 
the 
client's 
risk 
aversion, 
consistent 
with 
empirical 
studies 
that 
have 
identied 
a 
substantial 
variation 
in 
idiosyncratic 
risk 
preferences 
that 
are 
unexplained 
by 
consumer 
attributes 
and 
demographic 
characteristics 
(see, 
e.g., 
Guiso 
and 
Paiella 
[2008], 
Sahm 
[2012], 
and 
Van 
de 
Venter 
et 
al. 
[2012]). 
Third, 
the 
client's 
risk 
aversion 
depends 
on 
realized 
market 
returns 
and 
prevailing 
economic 
conditions. 
Specically, 
the 
countercyclical 
nature 
of 
risk 
aversion 
has 
been 
extensively 
documented 
in 
the 
literature 
(see 
Bucciol 
and 
Miniaci 
[2018], 
Cohn 
et 
al. 
[2015], 
and 
Guiso 
et 
al. 
[2018], 
among 
others, 
for 
recent 
empirical 
and 
experimental 
evidence). 


The 
robo-advisor 
adopts 
a 
multi-period 
mean-variance 
investment 
criterion 
with 
a 
nite 
investment 
horizon. 
It 
is 
worth 
noting 
that 
most 
robo-advising 
rms 
employ 
asset 
allocation 
algorithms 
based 
on 
mean-variance 
analysis, 
citing, 
among 
other 
things, 
its 
tractability 
and 
the 
intuitive 
interpretation 
of 
the 
risk-return 
tradeoff 
(see, 
for 
instance, 
Beketov 
et 
al. 
[2018]). 
While 
these 
robo-advising 
algorithms 
assume 
the 
risk-return 
tradeoff 
coecient 
to 
be 
constant 
throughout 
the 
investment 
period, 
and 
statically 
reoptimize 
the 
portfolio 
in 
response 
to 
change 
in 
the 
client's 
risk 
prole, 
our 
framework 
enables 
the 
robo-advisor 
to 
adapt 
the 
portfolio 
strategy 
to 
its 
own 
model 
of 
the 
client's 
risk 
aversion 
process. 
Such 
a 
model 
is 
constructed 
from 
two 
sources 
of 
information. 
First, 
the 
robo-advisor 
observes 
both 
realized 
market 
returns 
and 
changes 
in 
the 
state 
of 
the 
economy, 
and 
continuously 
updates 
its 
model 
to 
re
ect 
this 
information. 
Second, 
at 
times 
of 
interaction 
with 
the 
client, 
the 
robo-advisor 
receives 
information 
about 
the 
idiosyncratic 
component 
of 
the 
client's 
risk 
aversion. 


We 
show 
that 
the 
optimal 
stock 
market 
allocation 
consists 
of 
two 
components. 
The 
rst 
component 
is 
akin 
to 
the 
standard 
single-period 
Markowitz 
strategy 
but 
also 
takes 
into 
account 
the 
expected 
return 
and 
variance 
of 
the 
optimal 
strategy 
throughout 
the 
investment 
period. 
The 
second 
component 
is 
intertemporal 
hedging 
demand, 
which 
depends 
on 
the 
relation 
between 
the 
current 
market 
return 
and 
future 
portfolio 
returns. 
A 
novel 
feature 
of 
our 
model 
is 
that 
this 
relation 
is 
driven 
by 
the 
client's 
dynamic 
risk 
prole, 
in 
contrast 
to 
extant 
literature 
(e.g., 
Liu 
[2007] 
and 
Basak 
and 
Chabakauri 
[2010]) 
where 
it 
depends 
only 
on 
the 
correlation 
between 
market 
returns 
and 
changes 
in 
a 
stochastic 
state 
variable. 
To 
understand 
why 
hedging 
demand 
arises 
in 
our 
model, 
consider 
the 
case 
where 
positive 
(negative) 
market 
returns 
have 
a 
tempering 
(in
ating) 
eect 
on 
the 
client's 
risk 
aversion 
process. 
A 
positive 
market 
return 
thus 
leads 
to 
increased 
future 
investment 
and 
higher 
anticipated 
portfolio 
returns, 
whereas 
a 
negative 
return 
has 
the 
opposite 
eect. 
This 
positive 
relation 
between 
market 
returns 
and 
future 
portfolio 
returns 
amplies 
the 
eect 
of 
the 
current 
allocation 
on 
the 
variance 
of 
terminal 
wealth. 
As 
a 
result, 
for 
a 
client 
whose 
risk 
aversion 
is 
negatively 


3 



correlated 
with 
market 
returns, 
there 
is 
a 
negative 
hedging 
demand, 
i.e., 
the 
robo-advisor 
reduces 
her 
market 
exposure 
relative 
to 
a 
client 
whose 
risk 
aversion 
is 
not 
sensitive 
to 
market 
returns. 


We 
show 
the 
existence 
of 
a 
tradeoff 
between 
the 
rate 
of 
information 
acquisition 
from 
the 
client 
and 
the 
accuracy 
of 
the 
acquired 
information. 
On 
the 
one 
hand, 
if 
interaction 
does 
not 
occur 
at 
all 
times, 
the 
robo-advisor 
may 
not 
always 
have 
access 
to 
up-to-date 
information 
about 
the 
client's 
risk 
prole. 
On 
the 
other 
hand, 
information 
communicated 
to 
the 
robo-advisor 
may 
not 
be 
representative 
of 
the 
client's 
true 
risk 
aversion, 
as 
the 
client 
is 
subject 
to 
behavioral 
biases, 
such 
as 
trend-chasing.4 
For 
example, 
if 
recent 
market 
returns 
have 
exceeded 
expectations, 
the 
client 
may 
feel 
overly 
exuberant 
and 
communicate 
a 
risk 
aversion 
value 
that 
is 
lower 
than 
her 
actual 
risk 
aversion. 
Vice 
versa, 
following 
a 
market 
underperformance, 
the 
client 
may 
feel 
overly 
pessimistic 
and 
exaggerate 
her 
risk 
aversion 
when 
communicating 
with 
the 
robo-advisor. 
The 
suboptimality 
of 
high 
interaction 
frequencies 
then 
hinges 
on 
the 
fact 
that 
reducing 
the 
frequency 
of 
interaction 
mitigates 
the 
eect 
of 
client's 
biases. 
The 
rationale 
is 
that 
over 
longer 
time 
periods, 

uctuations 
in 
realized 
market 
returns 
average 
out. 
Such 
a 
behavioral 
pattern 
is 
consistent 
with 
the 
notion 
of 
myopic 
loss 
aversion 
introduced 
in 
Benartzi 
and 
Thaler 
[1995], 
which 
refers 
to 
the 
empirical 
phenomenon 
that 
market 
underperformance 
has 
a 
stronger 
impact 
on 
risk 
aversion 
than 
market 
overperformance. 


We 
introduce 
a 
measure 
of 
portfolio 
personalization 
to 
analyze 
the 
aforementioned 
tradeo. 
This 
measure 
is 
dened 
in 
terms 
of 
the 
dierence 
between 
the 
client's 
actual 
risk 
aversion 
and 
the 
robo-advisor 
estimate 
of 
it. 
The 
lower 
this 
measure, 
the 
closer 
the 
investment 
strategy 
implemented 
by 
the 
robo-advisor 
is 
to 
the 
strategy 
matching 
the 
client's 
risk 
prole. 
We 
show 
that 
for 
a 
xed 
level 
of 
behavioral 
bias, 
quantied 
as 
the 
client's 
sensitivity 
to 
market 
return 

uctuations, 
this 
measure 
is 
minimized 
by 
a 
unique 
interaction 
frequency. 
Such 
a 
frequency 
allows 
the 
robo-advisor 
to 
strike 
a 
balance 
between 
obtaining 
information 
from 
the 
client 
in 
a 
timely 
manner 
and 
ensuring 
that 
the 
communicated 
information 
is 
not 
overly 
biased 
by 
recent 
market 
returns. 
Our 
result 
is 
supported 
by 
existing 
practices 
of 
robo-advising 
rms, 
which 
encourage 
clients 


5

to 
refrain 
from 
making 
frequent 
changes 
to 
their 
risk 
proles, 
and 
even 
limit 
their 
ability 
to 
do 
so. 
We 
also 
show 
that 
the 
optimal 
interaction 
frequency 
is 
decreasing 
in 
the 
amount 
of 
behavioral 
bias, 
and 
increasing 
in 
the 
rate 
at 
which 
the 
idiosyncratic 
component 
of 
the 
client's 
risk 
aversion 
changes. 
Therefore, 
a 
higher 
level 
of 
personalization 
is 
achieved 
for 
clients 
with 
limited 
behavioral 
biases 
and 
stable 
risk 
proles. 


We 
compare 
the 
investment 
performance 
of 
strategies 
that 
invest 
the 
same 
proportion 
of 
wealth 
in 
the 
stock 
market 
during 
periods 
of 
economic 
growth 
but 
dier 
in 
their 
market 
exposure 
during 
contractions. 
We 
show 
analytically 
that 
the 
Sharpe 
ratio 
of 
such 
strategies 
is 
generally 
increasing 
in 
the 
proportion 
of 


4See 
Kahneman 
and 
Riepe 
[1998] 
for 
a 
discussion 
of 
common 
behavioral 
biases 
and 
strategies 
to 
overcome 
them. 


5Wealthfront 
provides 
the 
following 
guidelines: 
\Our 
software 
limits 
our 
clients 
to 
one 
risk-score 
change 
per 
month. 
We 
encourage 
people 
who 
attempt 
more 
than 
three 
risk-score 
changes 
over 
the 
course 
of 
a 
year 
to 
try 
another 
investment 
manager.” 


4 



wealth 
allocated 
to 
the 
stock 
market 
in 
a 
state 
of 
contraction, 
when 
the 
market 
risk-return 
tradeoff 
is 
more 
favorable.6 
Because 
the 
client 
typically 
has 
a 
countercyclical 
risk 
aversion 
process, 
she 
would 
lean 
towards 
reducing 
market 
exposure 
during 
economic 
contractions 
and, 
as 
a 
result, 
attain 
a 
lower 
Sharpe 
ratio 
from 
her 
investment. 
The 
question 
that 
then 
arises 
is 
to 
what 
extent, 
if 
any, 
the 
robo-advisor 
should 
deviate 
from 
the 
strategy 
implied 
by 
the 
client's 
risk 
prole 
in 
order 
to 
improve 
the 
investment 
performance. 
We 
show 
that 
the 
Sharpe 
ratio 
of 
the 
optimal 
portfolio 
is 
concave 
with 
respect 
to 
the 
change 
in 
the 
market 
allocation 
when 
the 
economy 
moves 
to 
a 
state 
of 
contraction. 
This 
means 
that 
the 
Sharpe 
ratio 
drops 
more 
if 
the 
allocation 
is 
reduced, 
compared 
to 
how 
much 
it 
improves 
if 
the 
allocation 
is 
increased 
by 
the 
same 
amount. 
Our 
analysis 
thus 
suggests 
that 
a 
good 
middle 
ground 
for 
the 
robo-advisor 
is 
to 
rebalance 
the 
portfolio 
and 
maintain 
prespecied 
weights 
throughout 
the 
business 
cycle. 
This 
investment 
pattern 
is 
also 
in 
line 
with 
the 
long-term 
investment 
principle 
of 
riding 
out 
business 
cycles, 
and 
further 
reinforced 
by 
the 
fact 
that, 
in 
practice, 
it 
is 
dicult 
to 
detect 
changes 
in 
economic 
regimes 
and 
thus 
estimate 
the 
prevailing 
market 
risk-return 
tradeo. 


The 
remainder 
of 
the 
paper 
is 
organized 
as 
follows. 
In 
Section 
2, 
we 
brie
y 
review 
the 
related 
literature. 
In 
Section 
3, 
we 
introduce 
our 
robo-advising 
framework. 
In 
Section 
4, 
we 
present 
the 
solution 
to 
the 
associated 
optimal 
investment 
problem. 
In 
Section 
5, 
we 
introduce 
and 
study 
performance 
metrics 
for 
the 
robo-advisor's 
investment 
strategy. 
Section 
6 
oers 
concluding 
remarks. 
Appendix 
A 
contains 
theoretical 
and 
computational 
properties 
of 
the 
optimal 
investment 
strategy. 
Appendix 
B 
and 
Appendix 
C 
contain 
proofs 
and 
auxiliary 
results 
related 
to 
Sections 
4 
and 
5, 
respectively. 


Literature 
Review 


Our 
study 
contributes 
to 
the 
growing 
literature 
on 
robo-advising. 
D'Acunto 
and 
Rossi 
[2020] 
describe 
the 
main 
components 
of 
robo-advising 
systems 
and 
propose 
a 
classication 
in 
terms 
of 
four 
main 
features: 
(i) 
portfolio 
personalization, 
(ii) 
client 
involvement, 
(iii) 
client 
discretion, 
and 
(iv) 
human 
interaction. 
We 
oer 
a 
quantitative 
framework 
that 
aligns 
with 
this 
classication 
and 
is 
consistent 
with 
that 
of 
the 
most 
prominent 
stand-alone 
robo-advising 
rms. 
We 
proceed 
to 
brie
y 
describe 
each 
of 
the 
four 
features 
and 
how 
they 
t 
into 
our 
framework. 


(i) 
Portfolio 
personalization 
refers 
to 
the 
robo-advisor's 
ability 
to 
oer 
nancial 
advice 
tailored 
to 
the 
client's 
needs. 
A 
common 
criticism 
of 
robo-advising 
is 
the 
lack 
of 
customization, 
with 
risk 
proling 
based 
on 
information 
that 
is 
too 
limited.7 
In 
our 
framework, 
the 
robo-advisor 
achieves 
portfolio 
personalization 
6Since 
the 
seminal 
work 
of 
Fama 
and 
French 
[1989], 
it 
has 
been 
extensively 
documented 
that 
the 
market 
risk-return 
tradeoff 
is 
countercyclical, 
i.e., 
higher 
at 
business 
cycle 
troughs 
than 
peaks. 


7Risk 
proling 
can, 
in 
principle, 
be 
innitely 
customizable. 
Barron's 
2019 
annual 
ranking 
of 
robo-advisors 



5 



by 
soliciting 
information 
from 
the 
client. 
We 
do 
not 
explicitly 
model 
the 
process 
of 
collecting 
information, 
which 
can 
be 
based 
both 
on 
online 
questionnaires 
and 
on 
collection 
of 
client's 
data 
from 
various 
sources 
(e.g. 
savings 
and 
spending 
behavior, 
asset 
and 
liabilities). 


(ii) 
Client 
involvement 
refers 
to 
the 
client's 
participation 
in 
the 
design 
of 
the 
investment 
strategy. 
At 
one 
end 
of 
the 
spectrum, 
there 
are 
robo-advisors 
that 
require 
the 
client 
to 
approve 
every 
single 
trading 
decision. 
In 
this 
case, 
the 
client 
is 
actively 
involved 
and 
the 
term 
robo-advisor 
is 
descriptive, 
because 
the 
client 
decides 
in 
what 
way 
to 
follow 
the 
advice 
provided. 
Our 
model 
lies 
at 
the 
other 
end 
of 
the 
spectrum, 
where 
the 
robo-advisor 
automatically 
manages 
the 
portfolio 
on 
the 
client's 
behalf 
and 
for 
which 
the 
term 
robo-manager 
is 
more 
descriptive. 
(iii) 
Client 
discretion 
is 
the 
client's 
ability 
to 
override 
the 
robo-advisor's 
recommendation. 
In 
our 
framework, 
the 
client's 
behavioral 
biases 
can 
be 
viewed 
as 
the 
client 
overriding 
the 
robo-advisor's 
recommendations. 
This 
is 
considered 
a 
low 
level 
of 
discretion. 
It 
is 
consistent 
with 
the 
operations 
of 
robo-advisors 
focusing 
on 
long-term 
investing, 
where 
the 
client 
is 
allowed 
to 
adjust 
the 
level 
of 
portfolio 
risk, 
but 
has 
no 
control 
over 
which 
parts 
of 
the 
investment 
portfolio 
are 
modied. 
(iv) 
Human 
interaction 
refers 
to 
the 
degree 
of 
interaction 
between 
the 
client 
and 
a 
human-advisor. 
In 
our 
framework, 
there 
is 
no 
human 
contact 
which 
is 
also 
the 
case 
for 
automated 
robo-advisors 
that 
strive 
to 
minimize 
operating 
costs. 
The 
above 
classication 
is 
qualitative 
in 
nature. 
The 
quantitative 
components 
of 
our 
framework 
are 
constructed 
to 
resemble 
the 
algorithmic 
principles 
of 
actual 
robo-advisors. 
Beketov 
et 
al. 
[2018] 
provide 
an 
industry 
overview 
based 
on 
the 
analysis 
of 
over 
200 
robo-advisors 
globally. 
Their 
study 
shows 
that 
a 
large 
majority 
of 
robo-advisors 
use 
an 
asset 
allocation 
framework 
based 
on 
mean-variance 
analysis, 
with 
the 
asset 
universe 
consisting 
of 
low 
cost 
exchange-traded 
funds. 
They 
also 
show 
that 
risk 
proling 
of 
clients 
is 
primarily 
done 
using 
online 
questionnaires. 


Rossi 
and 
Utkus 
[2019a] 
conduct 
an 
extensive 
survey 
to 
study 
the 
\needs 
and 
wants” 
of 
individuals 
when 
they 
hire 
nancial 
advisors. 
They 
show 
that 
for 
traditionally-advised 
clients, 
algorithm 
aversion 
and 
the 
inability 
to 
interact 
with 
a 
human 
are 
the 
main 
obstacles 
for 
switching 
to 
robo-advising, 
while 
robo-advised 
clients 
do 
not 
have 
the 
same 
need 
for 
trust 
and 
access 
to 
expert 
opinion. 
Our 
model 
lends 
theoretical 
support 
to 
the 
notion 
that 
robo-advisors 
may 
be 
less 
suitable 
for 
algorithmic-averse 
clients. 
Namely, 
the 
robo-advisor 
can 
improve 
the 
portfolio 
performance 
by 
going 
against 
the 
wishes 
of 
the 
client, 
i.e., 
by 
investing 
in 
a 
way 


//webreprints.djreprints.com/4642511400002.pdf) 
reports 
the 
latest 
growth 
in 
robo-advising 
to 
be 
in 
cash 
management, 
with 
robo-advisors 
aiming 
to 
become 
everyday 
money 
managers 
of 
their 
clients, 
in 
addition 
to 
long-term 
investment 
planners. 
Robo-advising 
rms 
already 
oer 
cash 
management 
services 
such 
as 
direct 
deposits 
of 
paychecks, 
automatic 
bill 
payments, 
and 
FDIC-insured 
checking 
and 
savings 
accounts. 
This 
implies 
increased 
access 
to 
data 
which 
can 
in 
turn 
be 
used 
by 
robo-advisors 
to 
improve 
investment 
recommendations. 


6 



that 
may 
seem 
counterintuitive 
to 
the 
client. 
Doing 
so 
is 
more 
challenging 
for 
a 
robo-advisor 
than 
for 
a 
human-advisor, 
because 
market 
returns 
are 
random, 
and 
an 
algorithmic-averse 
client 
will 
be 
less 
forgiving 
to 
the 
robo-advisor 
in 
the 
event 
of 
adverse 
market 
returns. 


From 
a 
methodological 
perspective, 
our 
work 
contributes 
to 
the 
literature 
on 
time-inconsistent 
stochastic 
control 
(Bjork 
and 
Murgoci 
[2013]). 
Other 
related 
works 
include 
Li 
and 
Ng 
[2010] 
who 
solve 
a 
multi-period 
version 
of 
the 
classical 
Markowitz 
problem, 
and 
Basak 
and 
Chabakauri 
[2010] 
who 
solve 
a 
continuous-time 
version 
of 
the 
same 
problem. 
Bjork 
et 
al. 
[2014] 
solve 
the 
dynamic 
mean-variance 
problem 
in 
continuous 
time, 
with 
the 
mean-variance 
utility 
function 
applied 
to 
returns 
as 
in 
the 
classical 
single-period 
mean-variance 
analysis. 
A 
recent 
study 
of 
Dai 
et 
al. 
[2019] 
further 
develops 
a 
dynamic 
mean-variance 
framework 
based 
on 
log-returns, 
with 
the 
aim 
of 
generating 
policies 
conforming 
with 
conventional 
investment 
wisdom. 
In 
all 
of 
these 
works, 
the 
risk-return 
tradeoff 
is 
assumed 
to 
be 
constant 
throughout 
the 
investment 
horizon. 
By 
contrast, 
in 
our 
model, 
the 
risk-return 
tradeoff 
coecient 
is 
stochastic, 
with 
explicitly 
modeled 
dynamics 
that 
can 
be 
used 
to 
generate 
investment 
policies 
tailored 
to 
the 
client's 
risk 
prole. 


Our 
paper 
is 
also 
related 
to 
the 
literature 
on 
portfolio 
optimization 
models 
where 
the 
security 
price 
dynamics 
are 
driven 
by 
stochastic 
factors. 
Unlike 
Liu 
[2007] 
and 
Basak 
and 
Chabakauri 
[2010], 
intertemporal 
hedging 
demand 
does 
not 
arise 
because 
of 
dependence 
between 
the 
stochastic 
factor 
and 
market 
returns, 
which 
are 
assumed 
to 
be 
uncorrelated 
in 
our 
model. 
Rather, 
intertemporal 
hedging 
terms 
appear 
because 
of 
the 
correlation 
between 
market 
returns 
and 
future 
changes 
in 
the 
investor's 
risk 
aversion. 
Additionally, 
the 
stochastic 
factor 
itself 
impacts 
the 
client's 
risk 
aversion 
dynamics, 
which 
in 
turn 
determine 
the 
optimal 
allocation. 
It 
is 
widely 
agreed 
upon 
that 
risk 
aversion 
varies 
with 
the 
business 
cycle, 
and 
this 
characteristic 
is 
highly 
relevant 
for 
robo-advising 
where 
a 
signicant 
challenge 
is 
to 
keep 
clients 
invested 
in 
the 
stock 
market 
during 
economic 
downturns.8 


Modeling 
Framework 


Our 
robo-advising 
framework 
has 
four 
main 
components: 
(i) 
a 
regime 
switching 
model 
of 
market 
returns, 


(ii) 
a 
mechanism 
of 
interaction 
between 
the 
client 
and 
the 
robo-advisor, 
(iii) 
a 
dynamic 
model 
for 
the 
client's 
risk 
preferences, 
and 
(iv) 
an 
optimal 
investment 
criterion. 
We 
describe 
each 
of 
these 
components 
in 
Sections 
3.1-3.4. 
8The 
seminal 
work 
of 
Campbell 
and 
Cochrane 
[1999] 
provides 
an 
asset 
pricing 
framework 
that 
rationalizes 
the 
countercyclicality 
of 
both 
risk 
aversion 
and 
the 
market 
risk-return 
tradeo; 
see, 
also, 
Lettau 
and 
Ludvigson 
[2010] 
for 
a 
survey 
of 
the 
literature 
and 
extensive 
empirical 
evidence. 


7 



3.1 
Market 
and 
Wealth 
Dynamics 
The 
market 
consists 
of 
a 
risk-free 
money 
market 
account, 
(Bn)n0, 
and 
a 
risky 
asset, 
(Sn)n0, 
whose 
dynamics 
are 
described 
by 
the 
equations 


Bn+1 
= 
(1+ 
r(Yn))Bn;Sn+1 
= 
(1+ 
Zn+1(Yn))Sn, 


where 
B0 
= 
1 
and 
S0 
> 
0 
is 
a 
given 
constant. 
The 
risky 
asset 
is 
representative 
of 
the 
overall 
stock 
market, 
and 
for 
this 
reason 
we 
will 
refer 
to 
returns 
of 
the 
risky 
asset 
as 
market 
returns. 


The 
above 
dynamics 
are 
modulated 
by 
an 
observable 
state 
process, 
(Yn)n0, 
which 
captures 
macroeconomic 
conditions 
aecting 
interest 
rates 
and 
market 
returns 
(cf. 
Hamilton 
[1989]). 
We 
assume 
the 
economic 
state 
variable 
(Yn)n0 
to 
be 
a 
time-homogeneous 
Markov 
chain 
with 
transition 
matrix 
P 
, 
taking 
values 
in 
a 
nite 
set 
Y 
:= 
f1, 
2;:::;Mg, 
for 
some 
M 
≥ 
1. 
Conditioned 
on 
Yn 
= 
y 
2Y, 
the 
risk-free 
interest 
rate 
r(y) 
is 
constant, 
while 
the 
risky 
asset's 
return, 
Zn+1(y), 
admits 
a 
probability 
density 
function 
fZjy 
which 
depends 
only 
on 
the 
current 
economic 
state 
y, 
and 
has 
mean 
(y) 
and 
variance 
0 
<2(y) 
< 
1. 


For 
notational 
simplicity, 
we 
omit 
the 
dependence 
on 
the 
economic 
state. 
Hence, 
we 
use 
Zn+1 
in 
place 
of 
Zn+1(Yn), 
and 
denote 
its 
state-dependent 
mean 
and 
variance 
by 
n+1 
:= 
(Yn) 
and 
2 
:= 
2(Yn),

n+1 
respectively. 
Similarly, 
we 
use 
rn+1 
in 
place 
of 
r(Yn), 
and 
let 
Rn+1 
:= 
1+ 
rn+1. 
We 
denote 
by 
Ze n+1 
:= 
Zn+1 
− 
rn+1 
the 
excess 
return 
of 
the 
risky 
asset 
over 
the 
risk-free 
rate, 
which 
has 
state-dependent 
mean 
and 
variance 
given 
by 
~n+1 
:= 
n+1 
− 
rn+1 
and 
n 
2+1, 
respectively. 
We 
denote 
by 
Xn 
the 
wealth 
of 
the 
client 
at 
time 
n, 
allocated 
between 
the 
risky 
asset 
and 
the 
money 
market 
account, 
and 
use 
n 
to 
denote 
the 
amount 
invested 
in 
the 
risky 
asset. 
For 
a 
given 
self-nancing 
trading 
strategy 
π 
:= 
(n)n0, 
the 
wealth 
process 
(X)n0 
follows 
the 
dynamics

n 


Xn
π 
+1 
= 
Rn+1Xn
π 
+ 
Ze n+1n;X0 
π 
= 
x0. 
(3.1) 


The 
initial 
wealth, 
x0 
∈ 
R+ 
, 
and 
the 
initial 
state 
of 
the 
economy, 
Y0 
2Y, 
are 
assumed 
to 
be 
non-random. 
The 
random 
variables 
(Yn)n1 
and 
(Zn)n0 
are 
dened 
on 
a 
probability 
space 
(
, 
F, 
P), 
which 
additionally 
supports 
a 
sequence 
(n)n1 
of 
independent 
real-valued 
random 
variables. 
This 
source 
of 
randomness 
captures 
idiosyncratic 
changes 
to 
the 
client's 
risk 
preferences. 
Moreover, 
(n)n1 
is 
independent 
of 
(Yn)n0 
and 
(Zn)n1. 
We 
use 
(Fn)n0 
to 
denote 
the 
ltration 
generated 
by 
the 
three 
stochastic 
processes 
in 
our 
model: 


Fn 
:= 
(Y(n);Z(n);(n)), 
(3.2) 


8 



where 
Y(n) 
:= 
(Y0;:::;Yn), 
Z(n) 
:= 
(Z1;:::;Zn), 
and 
(n) 
:= 
(1;:::;n). 
We 
will 
use 
analogous 
notation 
to 
denote 
the 
paths 
of 
other 
stochastic 
processes 
throughout 
the 
paper. 


Remark 
3.1. 
In 
our 
discrete-time 
model, 
the 
price 
of 
the 
risky 
asset 
is 
not 
restricted 
from 
becoming 
negative. 
However, 
at 
any 
given 
time 
the 
optimal 
investment 
strategy 
presented 
in 
Section 
4 
does 
not 
depend 
on 
the 
current 
price 
of 
the 
risky 
asset, 
but 
only 
on 
the 
rst 
two 
moments 
of 
its 
returns 
distribution. 
Hence, 
for 
the 
optimal 
investment 
problem 
to 
be 
well-dened, 
it 
is 
sucient 
to 
assume 
the 
existence 
of 
a 
returns 
process 
(Zn)n1 
with 
a 
nite 
variance 
as 
described 
above. 


3.2 
Interaction 
between 
Client 
and 
Robo-Advisor 
A 
key 
component 
of 
the 
proposed 
framework 
is 
the 
interaction 
between 
the 
client 
and 
the 
robo-advisor. 
Following 
an 
initial 
interaction 
at 
the 
beginning 
of 
the 
investment 
process, 
the 
client 
and 
the 
robo-advisor 
interact 
repeatedly 
throughout 
the 
investment 
period. 
At 
each 
interaction 
time, 
the 
client 
translates 
the 
information 
communicated 
by 
the 
client 
into 
a 
numerical 
value, 
herein 
referred 
to 
as 
a 
risk 
aversion 
parameter. 
In 
our 
quantitative 
framework, 
we 
abstract 
from 
the 
construction 
of 
such 
a 
mapping, 
eectively 
assuming 
that 
the 
client 
communicates 
directly 
a 
single 
risk 
aversion 
parameter 
to 
the 
robo-advisor.9 
Note 
that 
between 
consecutive 
interaction 
times, 
the 
robo-advisor 
receives 
no 
input 
from 
the 
client. 


The 
interaction 
schedule, 
denoted 
by 
(Tk)k0, 
is 
an 
increasing 
sequence 
of 
stopping 
times 
with 
respect 
to 
the 
ltration 
(Fn)n0, 
dened 
in 
(3.2). 
That 
is, 
T0 
= 
0, 
Tk 
<Tk+1, 
and 
fTk 
≤ 
ng2Fn, 
for 
any 
n 
≥ 
0. 
Hence, 
interaction 
can 
be 
triggered 
by 
any 
combination 
of 
client-specic 
events, 
changes 
in 
the 
state 
of 
the 
economy, 
and 
market 
events 
such 
as 
a 
cascade 
of 
negative 
market 
returns. 


The 
rule 
used 
to 
determine 
the 
interaction 
schedule 
(Tk)k0 
is 
decided 
at 
the 
beginning 
of 
the 
investment 
process, 
and 
used 
throughout 
it. 
For 
future 
reference, 
we 
also 
dene 
the 
process 
(n)n0, 
where 


n 
:= 
supfTk 
: 
Tk 
≤ 
ng, 


is 
the 
last 
interaction 
time 
prior 
to 
and 
including 
time 
n. 


3.3 
Client's 
Risk 
Aversion 
Process 
We 
rst 
introduce 
the 
client's 
actual 
risk 
aversion 
process,(
C 
)n0, 
which 
is 
an 
R+-valued 
stochastic 
process 


n 
0 
adapted 
to 
the 
ltration 
(Fn)n0 
dened 
in 
(3.2). 
This 
means 
that 
at 
time 
n, 
the 
client's 
risk 
aversion 
may 


9The 
majority 
of 
robo-advisors 
elicit 
risk 
preferences 
by 
means 
of 
online 
questionnaires 
(Beketov 
et 
al. 
[2018]). 
The 
client 
is 
presented 
with 
questions 
regarding, 
e.g., 
demographics, 
investment 
goals, 
education 
and 
nancial 
literacy, 
and 
potential 
reactions 
to 
hypothetical 
gambles 
and 
market 
events. 
We 
refer 
to 
Charness 
et 
al. 
[2013] 
for 
an 
outline 
of 
the 
pros 
and 
cons 
of 
dierent 
methods 
used 
to 
assess 
risk 
preferences, 
and 
Cox 
and 
Harrion 
[2008] 
for 
a 
more 
comprehensive 
overview. 


9 



have 
shifted 
from 
its 
initial 
value 
due 
to 
changes 
in 
economic 
regimes, 
Y(n), 
and 
realized 
market 
returns 
Z(n), 
as 
well 
as 
because 
of 
idiosyncratic 
shocks 
to 
the 
client's 
risk 
aversion, 
(n). 


We 
also 
introduce 
the 
(Fn)n0-adapted 
process 
(n)n0, 
where 
n 
∈ 
R+ 
is 
the 
risk 
aversion 
parameter

0 


communicated 
by 
the 
client 
at 
the 
most 
recent 
interaction 
time, 
n. 
Observe 
that 
the 
process 
(n)n0 
depends 
on 
the 
interaction 
schedule 
(Tk)k0 
and, 
by 
construction, 
it 
remains 
constant 
between 
consecutive 
interaction 
times 
where 
no 
new 
information 
comes 
from 
the 
client, 
i.e., 
n 
= 
n 
. 


The 
robo-advisor 
then 
constructs 
a 
model 
of 
the 
client's 
risk 
aversion 
process, 
denoted 
by 
(
n)n0, 
and 
uses 
it 
to 
solve 
the 
optimal 
investment 
problem. 
While 
it 
is 
generally 
desirable 
for 
the 
model 
(
n)n0 
to 
accurately 
track 
the 
client's 
actual 
risk 
aversion, 
(
C 
)n0, 
the 
two 
processes 
may 
not 
coincide 
due 
to 
the

n 


following 
reasons. 
First, 
the 
client 
and 
the 
robo-advisor 
may 
not 
interact 
at 
all 
times, 
so 
the 
robo-advisor 
does 
not 
always 
have 
access 
to 
up-to-date 
information 
about 
the 
client's 
risk 
preferences. 
Specically, 
while 
the 
robo-advisor 
observes 
both 
market 
returns 
and 
changes 
in 
the 
economic 
regime, 
it 
cannot 
observe 
in 
real 
time 
the 
idiosyncratic 
shocks 
to 
the 
client's 
risk 
aversion. 
Second, 
even 
if 
interaction 
were 
to 
occur 
at 
all 
times, 
information 
communicated 
by 
the 
client 
may 
not 
be 
representative 
of 
the 
client's 
true 
risk 
preferences 
due 
to 
her 
behavioral 
biases 
(see 
Section 
5.1 
for 
further 
details). 


R+

Formally, 
the 
risk 
aversion 
process 
(
n)n0 
is 
an 
-valued 
stochastic 
process 
adapted 
to 
the 
robo


0 


advisor's 
ltration,(FR)n0, 
which 
is 
generated 
by 
the 
random 
variables 
(Dn)n0, 
dened 
as

n 


× 
Nn+1 
)n+1

Dn 
:= 
(Y(n);Z(n);(n);(n)) 
2Dn, 
Dn 
:= 
Yn+1 
× 
Rn 
× 
(R+ 
. 
(3.3)

0 


It 
then 
follows 
that 
at 
time 
n, 
the 
risk 
aversion 
process 
may 
be 
written 
as 



n 
:= 

n(Dn) 
2Fn
R 
, 
(3.4) 


for 
a 
measurable 
function 

n 
: 
Dn 
7
→ 
R+
0 
. 


Remark 
3.2. 
The 
random 
variable 
Dn 
in 
(3.3) 
can 
be 
decomposed 
as 
Dn 
=(Mn;In), 
where 
Mn 
:= 
(Y(n);Z(n)), 
and 
In 
:= 
((n);(n)). 
This 
shows 
that 
the 
robo-advisor's 
ltration 
(FR)n0 
has 
two 
sources

n 
of 
information. 
The 
rst 
component, 
Mn, 
re
ects 
the 
fact 
that 
the 
robo-advisor 
has 
the 
ability 
to 
process 
all 
available 
information 
about 
the 
market 
and 
the 
economy. 
The 
second 
component, 
In, 
is 
the 
result 
of 
its 
interaction 
with 
the 
client, 
and 
contains 
both 
the 
history 
of 
interaction 
times 
and 
the 
communicated 
risk 
aversion 
values. 
Under 
mild 
conditions, 
the 
robo-advisor's 
ltration 
grows 
with 
the 
frequency 
of 
interaction, 


10

and, 
if 
interaction 
occurs 
at 
all 
times, 
it 
becomes 
equal 
to 
the 
ltration 
(Fn)n0. 


10For 
example, 
assume 
the 
interaction 
times 
to 
be 
given 
by 
Tk 
= 
k, 
for 
some 
φ 
≥ 
1. 
If 
the 
sum 
of 
idiosyncratic 
shocks, 


10 



3.4 
Investment 
Criterion 
The 
robo-advisor's 
objective 
is 
to 
optimally 
invest 
the 
client's 
wealth, 
taking 
into 
account 
the 
stochastic 
nature 
of 
the 
client's 
risk 
preferences. 
For 
this 
purpose, 
we 
develop 
a 
dynamic 
version 
of 
the 
standard 
Markowitz 
[1952] 
mean-variance 
problem 
that 
adapts 
to 
the 
client's 
changing 
risk 
preferences. 
We 
proceed 
to 
introduce 
this 
criterion, 
which 
we 
refer 
to 
as 
an 
adaptive 
mean-variance 
criterion. 


Let 
T 
≥ 
1 
be 
a 
xed 
investment 
horizon. 
For 
each 
n 
2f0, 
1;:::;T 
− 
1g, 
x 
∈ 
R0, 
d 
2Dn, 
and 
a 
control 
law 
π 
:= 
(n)n0, 
we 
consider 
the 
mean-variance 
functional 


(d)

π 

n

Jn(x, 
d; 
) 
:= 
En;x;d[rn;T 
] 
− 
V 
arn;x;d[rn;T 
], 
(3.5)

2 


where, 
at 
time 
n, 
the 
risk-return 
tradeoff 

n 
is 
the 
robo-advisor's 
model 
of 
the 
client's 
risk 
aversion 
at 
this 




time, 
and 
rn;T 
is 
the 
simple 
return 
obtained 
by 
following 
the 
control 
law 
π 
until 
the 
terminal 
date 
T 
, 


Xπ 


− 
Xn 


r 
T 
. 
(3.6)

n;T 
:= 


Xn 


The 
initial 
condition 
in 
(3.5) 
is 
given 
by 
Xn 
= 
x 
and 
Dn 
= 
d, 
and 
both 
the 
expectation 
and 
the 
variance 
are 
computed 
with 
respect 
to 
the 
probability 
measure 
Pn;x;d() 
:= 
P(jXn 
= 
x, 
Dn 
= 
d). 
For 
future 
reference, 
we 
also 
introduce 
the 
probability 
measure 
Pn;d() 
:= 
P(jDn 
= 
d). 


Observe 
that 
the 
risk-return 
tradeoff 

n 
does 
not 
depend 
on 
the 
client's 
wealth. 
There 
are 
important 
reasons 
behind 
this 
assumption. 
First, 
it 
is 
consistent 
with 
the 
Markowitz 
mean-variance 
criterion, 
which 
is 
recovered 
as 
a 
special 
case 
of 
our 
model 
when 
there 
is 
a 
single 
investment 
period. 
Second, 
as 
we 
will 
see 
in 
Section 
4, 
the 
optimal 
investment 
strategy 
turns 
out 
to 
be 
consistent 
with 
that 
of 
an 
investor 
exhibiting 
constant 
relative 
risk 
aversion 
(CRRA), 
i.e., 
whose 
proportion 
of 
wealth 
invested 
in 
the 
risky 
asset 
is 
independent 
of 
the 
wealth 
level.11 


The 
objective 
functional 
(3.5), 
together 
with 
the 
risk 
aversion 
process 
(3.4), 
dene 
a 
family 
of 
sequentially 
adaptive 
optimization 
problems, 
in 
the 
sense 
that 
at 
each 
time 
a 
new 
problem 
arises, 
with 
properties 
that 
depend 
on 
realized 
market 
returns, 
economic 
state 
changes, 
and 
client-communicated 
information, 
but 
with 
the 
same 
initially 
specied 
terminal 
date. 
Moreover, 
observe 
that 
it 
is 
the 
robo-advisor 
that 
solves 
the 
optimization 
problem, 
and 
the 
initial 
condition 
of 
each 
optimization 
problem 
xes 
the 
value 
of 
the 
stochastic 
process 
that 
generates 
the 
robo-advisor's 
ltration, 
as 
well 
as 
the 
value 
of 
the 
client's 
wealth 
process. 


P 


n

( 
k)n0 
is 
measurable 
with 
respect 
to 
the 
robo-advisor's 
ltration, 
then 
(FR)n0 
increases 
to 
(Fn)n0, 
as 
φ 
↓ 
1.

k=1 
n 


11Empirical 
evidence 
suggests 
that 
CRRA 
is 
a 
good 
description 
of 
microeconomic 
behavior 
(see, 
e.g., 
extensive 
panel 
data 
studies 
carried 
out 
in 
Brunnermeier 
and 
Nagel 
[2008], 
Chiappori 
and 
Paiella 
[2011], 
and 
Sahm 
[2012]). 
However, 
the 
evidence 
is 
not 
universal. 
For 
instance, 
Calvet 
and 
Sodini 
[2014] 
and 
Guiso 
and 
Paiella 
[2008] 
reject 
CRRA 
in 
favor 
of 
decreasing 
relative 
risk 
aversion. 


11 



The 
control 
law 
π 
in 
(3.5), 
also 
referred 
to 
as 
a 
strategy 
or 
allocation, 
is 
such 
that 
for 
each 
n, 
the 
control 


n 
is 
a 
measurable 
real-valued 
function 
of 
the 
state 
variables 
Xn 
and 
Dn. 
Additionally, 
admissible 
control 
PT 
􀀀1 
 

laws 
are 
assumed 
to 
be 
self-nancing 
and 
to 
satisfy 
the 
square-integrability 
condition 
E 
2 
< 
1. 


n=0 
n 


Remark 
3.3. 
We 
assume 
the 
investment 
horizon 
T 
to 
be 
deterministic 
and 
xed. 
A 
stochastic 
horizon 
can 
be 
captured 
through 
distributional 
assumptions 
on 
the 
risk 
aversion 
process 
(
n)n0. 
For 
example, 
the 
possibility 
of 
client 
death 
can 
be 
modeled 
by 
introducing 
a 
time-dependent 
probability 
pn 
of 
the 
risk 
aversion 
parameter 

n+1 
becoming 
\innite". 
The 
probability 
pn 
would 
be 
increasing 
in 
n, 
and 
innity 
would 
be 
an 
absorbing 
state 
reached 
only 
in 
the 
event 
that 
the 
client 
dies. 
In 
the 
death-state, 
the 
client's 
portfolio 
is 
liquidated 
and 
the 
client's 
entire 
wealth 
is 
allocated 
to 
the 
risk-free 
asset. 
For 
the 
optimization 
problem 
described 
in 
this 
section, 
a 
non-zero 
value 
of 
pn 
would 
have 
the 
eect 
of 
tilting 
the 
risky 
asset 
allocation 
upward, 
because 
no 
more 
investing 
is 
possible 
after 
death. 
In 
the 
same 
vein 
as 
when 
accounting 
for 
client 
death, 
we 
may 
impose 
conditions 
on 
the 
dynamics 
of 
the 
risk 
aversion 
process 
that 
halt 
investment 
if 
certain 
market 
events 
or 
economic 
conditions 
occur. 


Remark 
3.4. 
There 
is 
a 
non-zero 
probability 
that 
the 
client's 
wealth 
becomes 
negative. 
This 
can 
be 
either 
due 
to 
short-selling 
or 
to 
an 
extreme 
negative 
return 
of 
the 
risky 
asset 
(see 
Remark 
3.1). 
Although 
the 
objective 
functional 
(3.5) 
and 
the 
optimal 
strategy 
presented 
in 
Section 
4 
are 
well-dened 
for 
negative 
wealth 
levels, 
they 
are 
not 
economically 
meaningful 
and, 
in 
practice, 
the 
robo-advisor 
would 
liquidate 
the 
client's 
portfolio 
as 
soon 
as 
the 
wealth 
becomes 
negative. 


In 
Appendix 
A.3, 
we 
modify 
the 
optimal 
strategy 
in 
a 
way 
that 
forces 
liquidation 
of 
the 
entire 
risky 
position 
if 
the 
wealth 
is 
negative. 
We 
show 
that 
the 
change 
in 
expectation 
and 
variance 
of 
the 
optimal 
portfolio's 
return 
(given 
in 
(3.6)), 
resulting 
from 
imposing 
this 
liquidation 
condition, 
can 
be 
bounded 
by 
a 
term 
that 
is 
extremely 
small 
for 
plausible 
values 
of 
the 
model 
parameters. 
It 
then 
follows 
that 
forcing 
liquidation 
has 
a 
small 
impact 
on 
the 
value 
of 
the 
objective 
functional 
(3.5). 


The 
liquidation 
condition 
is 
imposed 
ad 
hoc 
on 
the 
optimal 
strategy. 
Hence, 
it 
is 
myopic 
in 
the 
sense 
that 
the 
modied 
strategy 
coincides 
with 
the 
optimal 
strategy 
until 
the 
wealth 
achieves 
a 
negative 
value. 
In 
Appendix 
A.3, 
we 
also 
discuss 
how 
the 
optimal 
investment 
problem 
can 
be 
adjusted 
to 
handle 
portfolio 
constraints 
which 
are 
typically 
imposed 
by 
robo-advising 
rms, 
such 
as 
no 
borrowing 
and 
no 
short-selling. 
In 
that 
case, 
the 
constraints 
also 
aect 
the 
optimal 
strategy 
at 
times 
before 
they 
become 
binding, 
because 
of 
the 
dynamic 
nature 
of 
the 
optimization 
problem. 


Through 
the 
wealth 
dynamics 
(3.1), 
the 
mean-variance 
functional 
Jn 
depends 
on 
the 
control 
law 
π 
restricted 
to 
the 
time 
points 
fn, 
n 
+1;:::;T 
− 
1} 
and 
the 
robo-advisor 
chooses 
the 
control 
n 
given 
future 


12 



control 
decisions 
n+1:T 
:= 
fn+1;n+2;:::;T 
􀀀1g. 
Therefore, 
any 
candidate 
optimal 
control 
law 
∗ 
is 
such 
that 
for 
each 
n 
2f0, 
1;:::;T 
− 
1g, 
x 
∈ 
R0, 
and 
d 
2Dn, 


sup 
Jn(x, 
d; 
)= 
Jn(x, 
d; 
π 
∗ 
), 
(3.7) 


2A∗ 


n+1 


where 
A∗ 
n+1 
:= 
fπ 
: 
n+1:T 
= 
π 
n 
∗ 
+1:T 
} 
is 
the 
set 
of 
control 
laws 
that 
coincide 
with 
∗ 
after 
time 
n. 
Ifa 
control 
law 
∗ 
satisfying 
(3.7) 
exists, 
we 
dene 
the 
corresponding 
value 
function 
at 
time 
n 
as 


Vn(x, 
d) 
:= 
Jn(x, 
d; 
π 
∗ 
). 
(3.8) 


It 
is 
worth 
noticing 
that 
when 
seeking 
an 
optimal 
control 
∗ 
at 
time 
n, 
the 
robo-advisor 
takes 
into 


n 


account 
the 
dynamics 
of 
f
n;
n+1;:::;
T 
􀀀1g, 
i.e., 
the 
dynamics 
of 
the 
risk-return 
coecient 
throughout 
the 
investment 
horizon, 
with 
only 
the 
current 
value 

n 
being 
known. 
At 
the 
subsequent 
time 
n+1, 
the 
dynamics 
of 
the 
remaining 
values 
f
n+1;:::;
T 
􀀀1} 
are 
updated 
by 
the 
robo-advisor, 
and 

n+1 
becomes 
known. 
If 
n 
+ 
1 
is 
a 
non-interaction 
time, 
this 
update 
is 
based 
only 
on 
information 
about 
market 
returns 
and 
economic 
states, 
while 
if 
n 
+ 
1 
is 
a 
time 
of 
interaction 
it 
also 
accounts 
for 
information 
received 
from 
the 
client. 


Optimal 
Investment 
Strategy 


We 
analyze 
the 
optimization 
problem 
dened 
by 
the 
sequence 
of 
objective 
functionals 
(Jn)0n<T 
in 
(3.5) 
and 
the 
optimality 
criterion 
in 
(3.7). 
It 
is 
well 
known 
that, 
even 
if 
the 
risk-return 
tradeoff 
(
n)n0 
is 
constant 
through 
time, 
the 
family 
of 
optimization 
problems 
dened 
by 
(3.5) 
is 
time-inconsistent 
in 
the 
sense 
that 
the 
Bellman 
optimality 
principle 
does 
not 
hold. 
This 
means 
that 
if, 
at 
time 
n, 
the 
control 
law 
∗ 
maximizes 
the 
objective 
functional 
Jn, 
then, 
at 
time 
n 
+ 
1, 
the 
restriction 
of 
∗ 
to 
the 
time 
points 
fn 
+1;n 
+2;:::;T 
− 
1} 
may 
not 
maximize 
Jn+1. 
We 
refer 
to 
Bjork 
and 
Murgoci 
[2013] 
and 
references 
therein 
for 
a 
general 
framework 
of 
time-inconsistent 
stochastic 
control 
in 
discrete 
time. 


As 
standard 
in 
this 
literature, 
we 
view 
the 
optimization 
problem 
in 
(3.7) 
as 
a 
multi-player 
game, 
where 
the 
player 
at 
each 
time 
n 
2f0, 
1;:::;T 
− 
1} 
is 
thought 
of 
as 
a 
future 
self 
of 
the 
client. 
Player 
n 
then 
wishes 
to 
maximize 
the 
objective 
functional 
Jn, 
but 
decides 
only 
the 
strategy 
n 
at 
time 
n, 
while 
n+1;:::;T 
􀀀1 
are 
determined 
by 
her 
future 
selves. 
The 
resulting 
optimal 
control 
strategy, 
∗ 
, 
is 
the 
subgame 
perfect 
equilibrium 
of 
this 
game, 
and 
can 
be 
computed 
using 
backward 
induction. 
At 
time 
n 
= 
T 
􀀀1, 
the 
equilibrium 
control 
∗ 
is 
obtained 
by 
maximizing 
JT 
􀀀1 
over 
T 
􀀀1, 
which 
is 
a 
standard 
single-period 
optimization

T 
􀀀1 
problem. 
For 
n<T 
− 
1, 
the 
equilibrium 
control 
∗ 
is 
then 
obtained 
by 
letting 
player 
n 
choose 
n 
to

n 


13 



0

maximize 
Jn, 
given 
that 
player 
n0 
will 
use 
∗ 
0 
, 
for 
n 
= 
n 
+1;n 
+2;:::;T 
− 
1. 


n 


In 
Appendix 
B, 
we 
derive 
an 
extended 
Hamilton-Jacobi-Bellman 
(HJB) 
system 
of 
equations 
satised 
by 
the 
value 
function 
of 
the 
optimization 
problem. 
The 
following 
result 
presents 
the 
solution 
to 
this 
system, 
which 
is 
the 
optimal 
investment 
strategy 
for 
an 
interaction 
schedule 
(Tk)k0 
and 
a 
risk 
aversion 
process 
(
n)n0 
of 
the 
general 
form, 
respectively 
introduced 
in 
Sections 
3.2 
and 
3.3. 


Proposition 
4.1. 
The 
dynamic 
optimization 
problem 
(3.7) 
admits 
a 
solution 
∗ 
of 
the 
form 


π 
∗ 
π 
∗ 


(x, 
d)=˜ 
(d)x, 
0 
≤ 
n 
< 
T, 


nn 


for 
x 
∈ 
R0 
and 
d 
2Dn. 
The 
optimal 
proportion 
of 
wealth 
allocated 
to 
the 
risky 
asset 
is 
given 
by 


π 
∗ 
π 
∗ 
π 
∗ 


1 
En;d[Ze n+1r˜ 
n+1;T 
] 
Covn;d[Ze n+1r˜ 
n+1;T 
;r˜ 
n+1;T 
]
~n(d)= 
− 
Rn+1 
, 
(4.1)

π 
∗ 


∗ 



n 
V 
arn;d[Ze n+1r~] 
V 
arn;d[Ze n+1r~]

n+1;T 
n+1;T 


where 
we 
recall 
that 
Rn+1 
and 
Ze n+1 
have 
been 
dened 
in 
Section 
3.1, 
and 


Xπ 
∗ 


π 
∗ 
π 
∗ 


T 


r~n+1;T 
:= 
1+ 
r 
= 
, 
(4.2)

n+1;T 


Xn+1 


is 
the 
terminal 
value 
of 
one 
dollar 
invested 
in 
the 
optimal 
strategy 
∗ 
at 
time 
n 
+1. 


The 
above 
proposition 
characterizes 
the 
structure 
of 
the 
optimal 
strategy. 
It 
shows 
that 
the 
optimal 
allocation, 
i.e., 
the 
relative 
fraction 
of 
wealth 
allocated 
to 
each 
asset, 
is 
independent 
of 
the 
wealth 
level. 
In 
Appendix 
A, 
we 
use 
backward 
induction 
to 
develop 
an 
explicit 
representation 
of 
the 
optimal 
strategy, 
and 
discuss 
the 
computational 
complexity 
of 
this 
procedure. 
As 
a 
byproduct, 
we 
obtain 
formulas 
for 
the 
expected 
value 
and 
variance 
of 
the 
optimal 
portfolio's 
return, 
which 
in 
turn 
can 
be 
used 
to 
compute 
the 
value 
function 
(3.8). 


It 
is 
evident 
from 
(4.1) 
that 
the 
optimal 
strategy 
can 
be 
decomposed 
into 
two 
terms. 
The 
rst 
term 
resembles 
the 
standard 
single-period 
Markowitz 
strategy, 
~n+1=(
nn 
2+1). 
However, 
rather 
than 
depending 


π 
∗ 


only 
on 
statistics 
of 
the 
market 
return 
between 
n 
and 
n+1, 
it 
also 
accounts 
for 
the 
return 
r˜ 
achieved 
by 


n+1;T 


the 
optimal 
portfolio 
between 
times 
n 
+ 
1 
and 
T 
. 
The 
second 
term 
in 
the 
decomposition 
is 
the 
intertemporal 
hedging 
demand, 
which 
can 
be 
rewritten 
as 


 

π 
∗ 
π 
∗ 
π 
∗ 
π 
∗ 
π 
∗ 


e

Covn;d 
Zn+1r~n+1;T 
;r~n+1;T 
= 
Covn;d 
(Ze n+1 
− 
~n+1)~rn+1;T 
;r~n+1;T 
+ 
~n+1V 
arn;d(~rn+1;T 
), 


where 
the 
rst 
term 
captures 
the 
contribution 
of 
dynamic 
risk 
aversion. 
To 
analyze 
this 
term, 
it 
is 
convenient 


14 



to 
rst 
rewrite 
it 
as 


 

π 
∗ 
π 
∗ 
π 
∗ 
π 
∗ 


Covn;d 
(Ze n+1 
− 
~n+1)~rn+1;T 
;r~n+1;T 
= 
Covn;d 
(Ze n+1 
− 
~n+1)En+1;Dn+1 
[~rn+1;T 
], 
En+1;Dn+1 
[~rn+1;T 
] 
, 


which 
shows 
that 
its 
sign 
depends 
predominantly 
on 
the 
covariance 
between 
Ze n+1 
− 
~n+1, 
i.e., 
the 
current 
excess 
market 
return, 
and 
En+1;Dn+1 
[~rπ 
∗ 
], 
i.e., 
the 
future 
expected 
portfolio 
return. 
This 
covariance 
is 


n+1;T 


generally 
positive, 
resulting 
in 
a 
negative 
hedging 
demand. 
To 
see 
this, 
observe 
that 
we 
generally 
expect 
an 
above 
average 
market 
return, 
Ze n+1 
− 
~n+1 
> 
0, 
to 
push 
down 
the 
future 
risk 
aversion 
values 
(
k)n+1k<T 
; 
this, 
in 
turn, 
implies 
a 
positive 
relation 
between 
Ze n+1 
􀀀~n+1 
and 
future 
risky 
asset 
allocations 
(~k 
)n+1k<T 
. 
As 
a 
result, 
the 
expectation 
En+1;Dn+1 
[~rπ 
∗ 
], 
achieved 
through 
the 
allocations 
(~)n+1k<T 
, 
is 
larger

n+1;T 
k 
following 
a 
positive 
value 
of 
Ze n+1 
− 
~n+1. 
Altogether, 
the 
current 
market 
return 
and 
the 
future 
expected 
portfolio 
return 
thus 
move 
in 
the 
same 
direction, 
amplifying 
the 
eect 
of 
the 
current 
market 
return 
on 
the 
variance 
of 
the 
terminal 
wealth 
and 
leading 
to 
a 
negative 
hedging 
demand. 
This 
is 
akin 
to 
the 
intertemporal 
hedging 
term 
in 
Basak 
and 
Chabakauri 
[2010], 
which 
arises 
because 
of 
covariation 
between 
market 
returns 
and 
the 
state 
variable. 
In 
their 
setting, 
the 
hedging 
demand 
would 
vanish 
if 
market 
returns 
and 
changes 
in 
the 
state 
variable 
were 
uncorrelated, 
in 
which 
case 
trading 
in 
the 
risky 
asset 
cannot 
hedge 

uctuations 
in 
the 
state 
variable. 
In 
our 
setting, 
the 
hedging 
demand 
is 
driven 
by 
the 
dynamic 
risk 
aversion 
process 
that 
links 
current 
market 
return 
with 
future 
portfolio 
returns. 
This 
hedging 
demand 
appears 
even 
though 
the 
market 
returns 
in 
our 
model 
are 
conditionally 
independent 
of 
changes 
in 
the 
state 
variable.12 
Next, 
we 
consider 
the 
special 
case 
where 
intertemporal 
hedging 
due 
to 
dynamic 
risk 
aversion 
vanishes, 
i.e., 
when 
future 
risk 
aversion 
values 
are 
conditionally 
independent 
of 
the 
current 
market 
return. 
In 
this 
case, 
the 
optimal 
allocation 
strategy 
admits 
a 
more 
explicit 
expression, 
given 
only 
in 
terms 
of 
the 
rst 
two 
moments 
of 
the 
return 
variables 
Ze n+1 
and 
r~π 
∗ 


n+1;T 
. 


Corollary 
4.2. 
Given 
Dn 
= 
d, 
assume 
the 
risk 
aversion 
values 
(
n+1;
n+2;:::;
T 
􀀀1) 
to 
be 
independent 
of 
the 
market 
return 
Ze n+1. 
The 
optimal 
proportion 
of 
wealth 
allocated 
to 
the 
risky 
asset 
at 
time 
n 
is 
given 
by 


π 
∗ 
π 
∗ 


1 
~n+1En;d[~r 
] 
~n+1V 
arn;d[~r 
]

n+1;T 
n+1;T

~n 
∗ 
(d)= 
∗ 
∗ 
− 
Rn+1 
∗ 
∗ 
;

22 
22


n 
En;d[(~r 
)2]+ 
˜ 
r 
] 
En;d[(~r 
)2]+ 
˜ 
r 
]

n+1 
n+1;T 
n+1V 
arn;d[~n+1;T 
n+1 
n+1;T 
n+1V 
arn;d[~n+1;T 


where 
~n+1 
= 
En;d[Ze n+1] 
and 
n 
2+1 
= 
V 
arn;d[Ze n+1]. 


e

12Conditionally 
on 
the 
value 
of 
Yn, 
the 
market 
return 
Zn+1 
is 
independent 
of 
Yn+1 
− 
Yn. 


15 



13

The 
optimal 
allocation 
given 
in 
the 
corollary 
can 
alternatively 
be 
written 
as 


􀀀 

π 
∗ 
π 
∗ 
π 
∗ 


˜ 
En;d[~r 
] 
− 
Rn+1
n 
En;d[(~r 
)2] 
− 
(En;d[~r 
])2 


n+1 
n+1;T 
n+1;T 
n+1;T

˜ 
∗ 
(d)= 


n 
2 
2􀀀, 
(4.3)


nn+1 
∗ 
~n+1 
∗ 


En;d[(~r 
)2]+ 
n+1 
En;d[(~r 
)2] 
− 
(En;d[~r 
])2 


n+1;T 
n+1;T 
n+1;T 


which 
allows 
to 
pin 
down 
the 
relation 
with 
the 
optimal 
investment 
strategy 
in 
the 
classical 
mean-variance 
setup. 
Specically, 
it 
is 
proportional 
to 
the 
single-period 
Markowitz 
strategy, 
~n+1=(
nn 
2+1), 
i.e., 
the 
optimal 
allocation 
of 
a 
myopic 
investor 
whose 
objective 
functional 
spans 
a 
single 
period. 
This 
fraction 
depends 
on 
the 
current 
economic 
conditions, 
and 
the 
client's 
current 
risk 
aversion. 
The 
proportionality 


π 
∗ 


factor 
in 
(4.3) 
depends 
on 
the 
future 
return 
of 
the 
investment 
strategy, 
r˜ 
n+1;T 
, 
which 
in 
turn 
depends 
on 
both 
future 
economic 
conditions 
and 
the 
client's 
future 
risk 
aversion 
dynamics. 
Consistently 
with 
intuition, 


π 
∗ 


this 
factor 
is 
increasing 
in 
the 
rst 
moment 
of 
r˜ 
and 
decreasing 
in 
its 
second 
moment. 
In 
the 
nal 


n+1;T 


time 
period, 
the 
proportionality 
factor 
is 
equal 
to 
one 
and 
the 
optimal 
allocation 
is 
given 
explicitly 
by 
the 
Markowitz 
strategy 
in 
this 
time 
period. 


5 
Performance 
of 
the 
Robo-Advising 
Framework 


We 
analyze 
the 
investment 
performance 
of 
the 
proposed 
robo-advising 
framework. 
Our 
analysis 
will 
be 
based 
on 
a 
specic 
model 
that 
ts 
into 
the 
general 
framework, 
and 
which 
we 
introduce 
in 
Section 
5.1. 
In 
Section 
5.2, 
we 
consider 
the 
interplay 
between 
interaction 
and 
portfolio 
personalization, 
and 
show 
the 
existence 
of 
a 
tradeoff 
between 
the 
rate 
of 
information 
acquisition 
from 
the 
client 
and 
the 
eect 
of 
the 
client's 
behavioral 
biases. 
In 
Section 
5.3, 
we 
explore 
how 
the 
optimal 
investment 
strategy 
is 
aected 
by 
transitions 
between 
economic 
states 
and 
the 
associated 
changes 
in 
the 
client's 
risk 
aversion. 
We 
also 
discuss 
whether 
the 
robo-advisor 
should 
cater 
to 
client 
wishes 
or 
go 
against 
them 
to 
improve 
the 
investment 
performance. 


5.1 
A 
Robo-Advising 
Model 
In 
the 
following 
paragraphs, 
we 
specify 
each 
component 
of 
the 
framework 
introduced 
in 
Sections 
3.1-3.4. 


Market 
Dynamics. 
The 
risky 
asset 
has 
conditionally 
Gaussian 
returns. 
That 
is, 
given 
the 
economic 
state 
Yn 
= 
y 
at 
time 
n, 
the 
return 
Zn+1 
has 
a 
Gaussian 
distribution 
with 
mean 
(y) 
and 
variance 
2(y). 


State 
Process 
Dynamics. 
We 
assume 
a 
two-state 
economy 
(Yn)n0. 
This 
choice 
is 
supported 
by 
the 
methodology 
of 
the 
National 
Bureau 
of 
Economic 
Research 
(NBER), 
which 
splits 
business 
cycles 
into 
periods 


13An 
extension 
of 
formula 
(4.3) 
can 
be 
derived 
for 
the 
general 
model 
considered 
in 
Proposition 
4.1 
(see 
Appendix 
B). 


16 



of 
economic 
expansions 
and 
contractions.14 
We 
use 
y 
= 
1 
to 
denote 
the 
state 
of 
economic 
growth 
and 
y 
=2 
to 
denote 
the 
state 
of 
recession. 
We 
use 
P 
to 
denote 
the 
transition 
probability 
matrix, 
so 
that 
Pij 
is 
the 
probability 
that 
the 
economy 
transits 
from 
state 
i 
to 
state 
j 
in 
a 
single 
time 
step. 


Interaction 
Schedule. 
The 
sequence 
of 
interaction 
times 
is 
deterministic 
and 
equally 
spaced. 
The 
interaction 
schedule 
(Tk)k0 
is 
then 
characterized 
by 
a 
xed 
integer 
parameter 
φ 
≥ 
1, 
with 
Tk 
= 
k. 
The 
two 
extreme 
cases 
are 
φ 
= 
1, 
which 
corresponds 
to 
communication 
of 
risk 
preferences 
at 
all 
times, 
and 
φ 
≥ 
T 
, 
which 
corresponds 
to 
risk 
preferences 
communicated 
only 
at 
the 
beginning 
of 
the 
investment 
process. 


Client's 
Risk 
Aversion. 
The 
client's 
risk 
aversion 
process, 
(
C 
)n0, 
is 
of 
the 
form

n 



C 
= 
e 
n 

id
Y 
. 
(5.1)

n 
nn 


n

The 
rst 
component, 
(en 
)n0, 
is 
deterministic 
and 
time-varying. 
For 
example, 
the 
specication 
e 
= 
􀀀(T 
􀀀n)

e 
captures 
the 
empirical 
observation 
that 
risk 
aversion 
increases 
with 
age, 
with 
the 
parameter 
α 
≥ 
0 
species 
the 
rate 
of 
increase. 


The 
second 
component, 
(
id)n0, 
depends 
on 
the 
client's 
personal 
circumstances 
and 
has 
stochastic 


n 
= 

id 
n

dynamics, 

id 
n􀀀1e 
, 
where 
(n)n1 
is 
an 
i.i.d. 
sequence 
of 
random 
variables. 
Specically, 
n 
= 
Wn􀀀2 


n 


2 


with 
probability 
p 
∈ 
[0, 
1], 
where 
 
> 
0 
and 
(Wn)n1 
is 
an 
i.i.d. 
sequence 
of 
standard 
Gaussian 
random 
variables, 
and 
n 
= 
0 
with 
probability 
1 
− 
p. 
This 
component 
captures 
idiosyncratic 
shocks 
to 
the 
client's 
risk 
aversion, 
which 
are 
unrelated 
to 
economic 
state 
transitions 
and 
market 
dynamics. 
The 
multiplicative 
innovation 
terms 
(en 
)n1 
are 
independent 
and 
with 
unit 
mean, 
making 
(
id)n0 
a 
martingale, 
devoid 
of 
a

n 


predictable 
component. 
The 
third 
component, 
(
Y 
)n0, 
is 
given 
by 

Y 
= 

¯ 
n(Yn), 
where 

¯ 
n 
: 
Y 
7
→ 
R+ 
is 
a 
possibly 
time-varying 


nn 
0 


function 
of 
the 
current 
economic 
state. 
This 
component 
captures 
the 
empirical 
fact 
that 
risk 
aversion 
varies 
with 
the 
business 
cycle. 


Client's 
Behavioral 
Bias. 
At 
time 
n, 
the 
risk 
aversion 
parameter 
communicated 
by 
the 
client 
at 
the 
most 
recent 
interaction 
time, 
n, 
is 
of 
the 
form 


􀀀

Pn􀀀1

􀀀β 
(Zk+1􀀀k+1)

k=n􀀀

n 
= 

C 

Z 
:= 

C 
e 
1 
, 
(5.2)

n 
n 
n 


14The 
work 
of 
Chauvet 
and 
Hamilton 
[2006] 
shows 
that 
a 
Markov 
switching 
model 
successfully 
identies 
NBER's 
business 
cycle 
turning 
points. 


17 



where 

Z 
is 
a 
factor 
that 
in
ates 
or 
de
ates 
the 
client's 
actual 
risk 
aversion, 

C 
, 
based 
on 
recent 
market 


n 
n 


returns. 
Namely, 
the 
sum 
in 
the 
exponent 
is 
the 
cumulative 
excess 
return 
of 
the 
risky 
asset 
over 
its 
expected 
value, 
since 
the 
previous 
interaction 
time, 
n 
− 
. 
Because 
previous 
market 
returns 
have 
no 
predictive 
value 
for 
future 
market 
returns, 
given 
the 
state 
of 
the 
economy, 
the 
factor 

Z 
is 
representative 
of 
common

n 


behavioral 
biases, 
and 
the 
coecient 
β 
≥ 
0 
determines 
the 
magnitude 
of 
this 
eect. 


We 
emphasize 
two 
important 
properties 
of 
the 
component 


Z 
n 
. 
First, 
the 
convexity 
of 
the 
exponential 
function 
allows 
us 
to 
capture 
loss 
aversion: 
the 
upward 
risk 
aversion 
bias 
following 
a 
market 
underperformance 
is 
greater 
than 
the 
downward 
bias 
when 
the 
market 
exceeds 
expectations 
by 
the 
same 
amount 
(Tversky 


2(y) 


2

and 
Kahneman 
[1979]). 
Second, 
in 
a 
model 
with 
a 
single 
economic 
state 
y, 
we 
have 
E[
Z 
]= 
e 
, 
which 


n 


shows 
that 
the 
average 
eect 
of 
the 
behavioral 
bias 
decreases 
as 
the 
time 
between 
interaction 
increases,15 
consistent 
with 
the 
notion 
of 
myopic 
loss 
aversion, 
introduced 
in 
Benartzi 
and 
Thaler 
[1995]. 


The 
bias 

Z 
may 
be 
interpreted 
as 
the 
client 
overriding 
the 
robo-advisor's 
decisions. 
That 
is, 
at 
an

n 
interaction 
time 
n, 
the 
robo-advisor 
proposes 
a 
portfolio 
tailored 
to 
the 
client's 
characteristics, 

C 
, 
but 
the

n 


client 
makes 
changes 
to 
the 
proposed 
allocation 
based 
on 
recent 
market 
returns. 
This 
results 
in 
a 
portfolio 
allocation 
consistent 
with 
a 
risk 
aversion 
coecient 

C 

Z 
. 
The 
eect 
of 
this 
override, 
which 
is 
driven 
by 


nn 


the 
client's 
behavioral 
biases, 
prevails 
until 
the 
subsequent 
time 
of 
interaction, 
n 
+ 
, 
when 
the 
client 
again 
adjusts 
the 
portfolio 
allocation 
proposed 
by 
the 
robo-advisor. 
This 
time, 
however, 
the 
adjustment 
is 
based 
on 
market 
returns 
realized 
in 
the 
time 
interval 
[n, 
n 
+ 
]. 


Robo-Advisor's 
Model 
of 
Client's 
Risk 
Aversion. 
The 
risk 
aversion 
process 
(
n)n0 
is 
of 
the 
form 



Y 


n􀀀n 
nn


n 
= 
e. 
(5.3)


Y 


n 


The 
component 
n 
is 
the 
risk 
aversion 
parameter 
communicated 
by 
the 
client 
at 
the 
most 
recent 
interaction 
time, 
n, 
and, 
in 
the 
robo-advisor's 
model, 
it 
stays 
constant 
until 
the 
subsequent 
time 
of 
interaction, 
n 
+ 
. 


n

On 
the 
other 
hand, 
the 
model 
is 
adjusted 
for 
the 
passage 
of 
time 
through 
the 
factor 
e 
􀀀n 
, 
and 
for 
changes 
in 
economic 
states 
through 
the 
ratio 

Y 
=
Y 
. 
The 
above 
equation 
can 
be 
written 
in 
an 
alternative 
form 
as

nn 



n 
= 

n(d)= 

Z 
En;d[
C 
];

n 
n 


where 
we 
recall 
from 
(3.3) 
that 
Dn 
= 
d 
is 
the 
information 
set 
of 
the 
robo-advisor 
at 
time 
n. 
This 
shows 
that 
the 
robo-advisor's 
view 
of 
the 
client 
risk 
aversion 
is 
equal 
to 
the 
expectation 
of 
client's 
actual 
risk 
aversion 


2(y) 
2φ 




15In 
a 
setup 
with 
multiple 
economic 
states 
we 
have, 
conditionally 
on 
Yn􀀀φ 
= 
y 
2Y, 
that 
E[
Z 
]= 
e 
+ 
O(1 
− 
Py;y).

n 


18 



times 
bias 
factor 
from 
the 
previous 
interaction 
time. 


From 
the 
above 
expression 
it 
can 
be 
observed 
that 
interaction 
impacts 
the 
robo-advisor's 
inferred 
value 
of 
the 
client's 
risk 
aversion 
in 
two 
dierent 
ways. 
First, 
between 
interaction 
times, 
the 
expectation 
En;d[
C 
]

n 


is 
not 
updated 
in 
response 
to 
changes 
in 
the 
idiosyncratic 
component 
of 
the 
client's 
risk 
aversion, 
because 
such 
changes 
cannot 
be 
inferred 
from 
observables 
like 
market 
returns 
or 
economic 
indicators. 
Second, 
a 
higher 
interaction 
frequency 
comes 
at 
the 
expense 
of 
increased 
behavioral 
bias, 
tilting 
the 
robo-advisor's 
model 
further 
away 
from 
the 
client's 
actual 
risk 
aversion. 


Calibration 
of 
Risk 
Aversion 
Process. 
The 
multiplicative 
model 
introduced 
in 
this 
section 
provides 
a 
parsimonious 
description 
of 
the 
client's 
risk 
aversion. 
Under 
this 
specication, 
the 
risk 
aversion 
is 
guaranteed 
to 
be 
non-negative, 
and 
its 
parameters 
can 
be 
estimated 
from 
historical 
portfolio 
allocations. 
We 
next 
sketch 
a 
calibration 
procedure 
for 
models 
of 
this 
form. 


Consider 
a 
sequence 
of 
historical 
portfolio 
allocations 
for 
a 
set 
of 
self-directed 
investors. 
Such 
data 
is 
available 
to 
nancial 
rms 
oering 
discount 
brokerage 
services, 
in 
particular 
the 
growing 
number 
of 
low-
cost 
online 
brokerages.16 
Assume 
that 
the 
portfolio 
allocations 
are 
consistent 
with 
a 
myopic 
mean-variance 
criterion, 
for 
which 
there 
exists 
a 
one-to-one 
relationship 
between 
allocations 
and 
risk 
aversion 
levels. 
Then, 
the 
allocations 
can 
equivalently 
be 
viewed 
as 
historical 
sequences 
of 
implied 
risk 
aversion 
coecients. 


For 
a 
given 
client, 
the 
risk 
aversion 
model 
can 
be 
calibrated 
using 
the 
subset 
of 
investors 
that 
have 
demographic 
characteristics 
similar 
to 
the 
client.17 
Specically, 
the 
three 
components 
of 
the 
risk 
aversion 
process 
(5.1) 
and 
the 
behavioral 
bias 
in 
(5.2) 
can 
be 
estimated 
using 
the 
following 
sequential 
procedure. 
First, 
the 
temporal 
component 
can 
be 
inferred 
from 
the 
initial 
portfolio 
composition 
chosen 
by 
investors 
at 
dierent 
life 
stages. 
For 
a 
personalized 
service, 
this 
component 
can 
also 
be 
used 
to 
incorporate 
a 
client-specic 
time-dependence 
of 
risk 
aversion. 
Adjusting 
for 
the 
eect 
of 
time, 
the 
average 
investment 
levels 
during 
each 
economic 
regime 
(e.g., 
periods 
of 
expansions 
and 
contractions 
-see 
Section 
5.3) 
then 
provide 
information 
about 
the 
process 
component 
which 
depends 
on 
the 
economic 
state. 
Next, 
the 
extent 
of 
behavioral 
bias 
can 
be 
estimated 
from 
the 
relationship 
between 
market 
returns 
and 
subsequent 
changes 
in 
the 
portfolio's 
market 


18

exposure. 
In 
addition, 
for 
a 
given 
client, 
data 
on 
nancial 
literacy, 
investment 
experience, 
and 
cognitive 
abilities, 
can 
be 
used 
to 
adjust 
the 
estimated 
behavioral 
bias 
(see, 
e.g., 
studies 
by 
Oechssler 
et 
al. 
[1997] 
and 
Seasholes 
and 
Feng 
[2005]). 
Finally, 
after 
adjusting 
for 
the 
passage 
of 
time, 
economic 
regimes, 
and 
bias, 


16See, 
among 
others, 
the 
seminal 
work 
of 
Barber 
and 
Odean 
[2000] 
where 
such 
a 
data 
set 
is 
analyzed 
and 
Glaser 
and 
Weber 
[2009] 
for 
a 
more 
recent 
study 
using 
online 
brokerage 
data. 


17In 
practice, 
robo-advising 
rms 
manage 
a 
nite 
number 
of 
portfolios 
and 
group 
clients 
with 
similar 
proles 
into 
risk 
categories. 
For 
instance, 
Wealthfront 
constructs 
a 
composite 
Risk 
Score 
ranging 
from 
0.5 
to 
10, 
in 
increments 
of 
0.5. 


18The 
literature 
on 
individual 
investor 
performance 
focuses 
to 
a 
large 
extent 
on 
biases 
and 
investor's 
mistakes. 
For 
instance, 
Statman 
et 
al. 
[2006] 
study 
the 
role 
of 
investor 
overcondence 
by 
examining 
the 
lead-lag 
relationship 
between 
market 
returns 
and 
trading 
volume. 


19 



Figure 
1: 
The 
graphs 
plot 
the 
optimal 
allocation 
~n 
∗ 
as 
a 
function 
of 
the 
client's 
risk 
aversion 

n
C 
, 
for 
the 
model 
in 
Section 
5.1, 
where 
we 
set 
Y0 
= 
1 
and 
P 
equal 
to 
the 
two-dimensional 
identity 
matrix. 
In 
both 
graphs, 
the 
solid 
line 
refers 
to 
the 
benchmark 
case 
of 
constant 
risk 
aversion 
and 
no 
behavioral 
bias, 
i.e., 
n 
= 
p 
= 
β 
= 
0. 
Left 
panel: 
Impact 
of 
idiosyncratic 
risk 
aversion 
shocks, 
obtained 
by 
letting 
p 
2f0:05, 
0:10} 
and 
 
=0:64. 
Right 
panel: 
Impact 
of 
behavioral 
bias, 
obtained 
by 
choosing 
β 
= 
4 
and 

n
Z 
2f0:76, 
1:30g. 
These 
values 
of 
β 
and 

n
Z 
correspond 
to 
a 
cumulative 
market 
return 
between 
two 
interaction 
times 
which 
is 
1:3 
standard 
deviations 
above/below 
its 
expected 
value. 
The 
annualized 
market 
parameters 
in 
state 
Y0 
are 
set 
to 
r(Y0) 
= 
0, 
(Y0)=0:10, 
(Y0)=0:20, 
and 
one 
time 
step 
in 
the 
model 
corresponds 
to 
one 
month. 
The 
investment 
horizon 
is 
T 
= 
36 
months, 
and 
the 
time 
between 
interaction 
is 
φ 
= 
3 
months. 
We 
show 
the 
allocations 
prevailing 
one 
year 
after 
the 
start 
of 
the 
investment 
process, 
i.e., 
at 
time 
n 
= 
12. 


the 
size 
and 
frequency 
of 
allocation 
changes 
made 
by 
investors 
provide 
information 
about 
the 
idiosyncratic 
component 
of 
the 
risk 
aversion 
process. 


Sensitivity 
of 
Optimal 
Allocation 
to 
Idiosyncratic 
Shock 
and 
Behavioral 
Bias. 
In 
Figure 
1, 
we 
display 
how 
the 
optimal 
allocation 
in 
Proposition 
4.1 
depends 
on 
the 
variability 
of 
the 
idiosyncratic 
component 
of 
the 
client's 
risk 
aversion 
and 
the 
client's 
behavioral 
bias. 
The 
left 
panel 
shows 
that 
if 
the 
client's 
idiosyncratic 
risk 
preferences 

uctuate 
more 
due 
to 
a 
larger 
value 
of 
the 
parameter 
p, 
then 
the 
optimal 
allocation 
deviates 
more 
from 
that 
of 
the 
benchmark 
case 
with 
no 
idiosyncratic 
shocks. 
The 
right 
panel 
shows 
that 
the 
client's 
behavioral 
bias 
following 
a 
negative 
market 
return 
(
Z 
> 
1) 
has 
a 
stronger

n 


in
uence 
on 
the 
optimal 
allocation 
than 
the 
bias 
following 
a 
positive 
market 
return 
of 
the 
same 
magnitude 
(
Z 
< 
1). 
This 
numerical 
nding 
is 
consistent 
with 
the 
notion 
of 
loss 
aversion, 
as 
discussed 
above. 


n 


5.2 
Interaction 
and 
Optimal 
Personalization 
In 
our 
framework, 
the 
client 
and 
robo-advisor 
do 
not 
interact 
at 
all 
times 
and, 
thus, 
the 
robo-advisor 
is 
not 
always 
immediately 
aware 
of 
changes 
in 
the 
client's 
risk 
prole. 
While 
a 
higher 
interaction 
frequency 
is 
the 
only 
way 
to 
reduce 
this 
information 
asymmetry, 
it 
also 
increases 
the 
amount 
of 
behavioral 
bias 
in 
the 
communicated 
information. 
The 
goal 
of 
this 
section 
is 
to 
analyze 
this 
tradeoff 
quantitatively. 


20 



We 
start 
by 
dening 
a 
measure 
of 
portfolio 
personalization. 
This 
measure 
depends 
on 
the 
relation 
between 
the 
client's 
risk 
aversion 
process, 
(
C 
)n0, 
given 
by 
(5.1), 
and 
the 
robo-advisor's 
model 
of 
the 
client's 
risk

n 
aversion, 
(
n)n0, 
given 
by 
(5.3). 
Recall 
from 
Section 
4 
that 
at 
time 
n 
= 
T 
− 
1, 
the 
optimal 
risky 
asset 
allocation 
is 
proportional 
to 
the 
risk 
tolerance 
parameter 
1=
n, 
and 
it 
is 
approximately 
proportional 
to 
1=
n 
for 
n<T 
− 
1 
(see 
(4.3)). 
We 
therefore 
choose 
to 
dene 
personalization 
in 
terms 
of 
the 
expected 
relative 
dierence 
between 
the 
risk 
tolerance 
parameters 
1=
n 
and 
1=
C 
, 
averaged 
over 
the 
investment 


n 


period. 
Specically, 
for 
φ 
≥ 
1 
and 
β 
≥ 
0, 
we 
introduce 
the 
personalization 
measure 


"# 

T 
􀀀11 
1

X − 


n

R(, 
) 
:= 
E 
1 

n 

C 
. 
(5.4)

1

T 



C 


n=0 
n 


A 
lower 
value 
of 
R(, 
) 
means 
a 
higher 
level 
of 
portfolio 
personalization. 
Full 
personalization 
is 
achieved 
if 
and 
only 
if 
φ 
= 
1 
and 
β 
= 
0, 
which 
leads 
to 
R(1, 
0) 
= 
0. 
This 
is 
because 
the 
processes 
(
n)n0 
and 
(
n
C 
)n0 
coincide 
only 
in 
this 
case, 
when 
there 
is 
no 
behavioral 
bias 
and 
the 
client 
and 
the 
robo-advisor 
interact 
at 
all 
times. 
Although 
not 
explicitly 
highlighted 
in 
the 
notation, 
we 
note 
that 
the 
value 
of 
R(, 
) 
also 
depends 
on 
the 
parameters 
p 
∈ 
[0, 
1] 
and 
 
> 
0, 
which 
govern 
the 
distribution 
of 
idiosyncratic 
risk 
aversion 
shocks. 


For 
a 
given 
value 
of 
, 
our 
objective 
is 
to 
study 
the 
dependence 
of 
the 
measure 
R 
on 
. 
For 
this, 
we 
consider 
an 
approximation 
Re that 
is 
analytically 
more 
tractable 
than 
R. 
In 
the 
following 
proposition, 
we 
characterize 
this 
approximation 
and 
show 
that 
it 
is 
minimized 
by 
a 
unique 
value 
of 
. 
In 
Figure 
2, 
we 
show 
graphically 
that 
Re and 
R 
are 
close, 
for 
dierent 
interaction 
frequencies 
and 
levels 
of 
behavioral 
bias. 


Proposition 
5.1. 
Set 
0 
:= 
(Y0). 
The 
following 
statements 
hold: 


(i) 
The 
measure 
R(, 
) 
satises 
the 
relation 
T 


Tφ 


Re
(, 
)+ 
ER(, 
) 
Re
(, 
)+ 
E, 
(5.5)

TT 


where 
Tφ 
(resp. 
T 
) 
is 
the 
largest 
(resp. 
smallest) 
multiple 
of 
φ 
that 
is 
less 
than 
(resp. 
greater 
than) 


2

or 
equal 
to 
T 
, 
the 
error 
term 
E 
is 
of 
order 
O(p 
 
2 
+ 
2)+ 
O(1 
− 
P 
T 
􀀀1 
), 
and

y0;y0 


s

r 

 

2 
0 
φ 
− 
1 
22 
φ 
− 
1

e 0 
+ 
2

R(, 
) 
:= 
√ 
1 
− 
p 
+ 
p 
. 


φ 
2 
φ 
2 


(ii) 
Let 
β 
and 
p 
be 
such 
that 
β 
+ 
p 
> 
0. 
Then, 
there 
exists 
a 
unique 
value 
of 
φ 
≥ 
1 
that 
minimizes 
21 



19

Re
(, 
). 
Specically, 


8 

1;β 
=0;

>

< 

arg 
min 
Re
(, 
)= 
0 
∈ 
[1, 
1), 
> 
0;p 
> 
0, 


1 
>: 

1;p 
=0. 


Furthermore, 
0 
satises 
the 
monotonicity 
properties 


@0 
@0 
@0 
@0 


> 
0;> 
0;< 
0;< 
0. 
(5.6)

@β 
@0 
@p 
@ 


The 
error 
term 
of 
order 
O(1 
− 
P 
T 
􀀀1 
) 
in 
the 
approximation 
(5.5) 
results 
from 
xing 
the 
economic 
state

y0;y0 


throughout 
the 
investment 
period. 
Typically, 
transitions 
between 
economic 
states 
are 
infrequent 
(see 
(5.12) 
in 
Section 
5.3) 
and 
the 
error 
term 
vanishes 
if 
the 
model 
consists 
of 
a 
single 
economic 
state. 
From 
the 
signs 
of 
the 
derivatives 
given 
in 
(5.6), 
it 
can 
be 
seen 
that 
if 
the 
economy 
transits 
to 
a 
state 
with 
a 
higher 
return 
volatility, 
i.e., 
if 
0 
increases, 
the 
optimal 
time 
between 
consecutive 
interactions 
also 
increases. 
This 
is 
because 
the 
client's 
behavioral 
bias 
is 
based 
on 
market 
return 

uctuations, 
which 
are 
magnied 
if 
the 
return 
volatility 
is 
higher. 


The 
above 
proposition 
conrms 
two 
intuitive 
claims. 
First, 
in 
the 
absence 
of 
behavioral 
biases, 
i.e., 
β 
= 
0, 
it 
is 
optimal 
for 
the 
robo-advisor 
to 
interact 
with 
the 
client 
at 
all 
times. 
Second, 
if 
there 
are 
no 
idiosyncratic 
risk 
aversion 
shocks, 
i.e., 
p 
= 
0, 
then 
it 
is 
optimal 
to 
never 
interact. 
Most 
interestingly, 
if 
both 
> 
0 
and 
p 
> 
0, 
then 
it 
may 
be 
suboptimal 
to 
interact 
at 
all 
times. 
This 
is 
because 
a 
higher 
frequency 
of 
interaction 
comes 
at 
the 
expense 
of 
increased 
behavioral 
bias 
in 
the 
communicated 
risk 
aversion 
parameter. 
Furthermore, 
the 
signs 
of 
the 
derivatives 
in 
(5.6) 
show 
that 
a 
larger 
value 
of 
β 
increases 
the 
optimal 
time 
between 
consecutive 
interactions, 
while 
larger 
values 
of 
p 
and 
 
imply 
a 
greater 
variance 
of 
idiosyncratic 
risk 
aversion 
shocks 
and 
push 
down 
the 
optimal 
time 
between 
interaction. 
In 
the 
proof 
of 
the 
proposition, 
we 
show 
that 


p 
@Re
(, 
)

< 
1=⇒ 
< 
0;

0 
@φ 
=1 


which 
gives 
a 
sucient 
condition 
for 
when 
it 
is 
optimal 
to 
refrain 
from 
interacting 
at 
all 
times.20 
In 
the 
above 
inequality, 
we 
compare 
the 
rate 
of 
change 
of 
the 
idiosyncratic 
risk-aversion 
component, 
as 
measured 
by 
p, 
with 
the 
amount 
of 
behavioral 
bias, 
quantied 
by 
the 
product 
0 
of 
the 
client's 
sensitivity 
to 


19If 
β 
e

= 
p 
= 
0, 
the 
values 
R(, 
) 
and 
R(, 
) 
are 
independent 
of 
. 
20This 
condition 
is 
also 
close 
to 
being 
necessary. 
See 
Eq. 
(C.2) 
in 
Appendix 
C. 


22 



Figure 
2: 
The 
graphs 
plot 
the 
personalization 
measure 
R(, 
) 
and 
its 
approximation 
Re
(, 
) 
as 
a 
function 
of 
the 
time 
φ 
between 
consecutive 
interactions. 
Each 
panel 
corresponds 
to 
a 
dierent 
value 
of 
the 
parameter 
. 
We 
consider 
the 
same 
market 
parameters 
and 
investment 
horizon 
as 
in 
Figure 
1, 
with 
Y0 
= 
1, 
P 
= 
I2, 
and 
each 
time 
step 
in 
the 
model 
corresponding 
to 
one 
month. 
The 
parameters 
of 
the 
risk 
aversion 
model 
are 
n 
= 
0, 
p 
=0:05, 
and 
 
=0:64. 


market 
returns 
and 
the 
volatility 
of 
returns. 
If 
the 
latter 
is 
greater 
than 
the 
former, 
then 
the 
derivative 
of 
Re at 
φ 
= 
1 
is 
negative, 
i.e., 
it 
is 
suboptimal 
to 
interact 
at 
all 
times. 


To 
ensure 
a 
high 
level 
of 
personalization, 
the 
robo-advisor 
must 
construct 
a 
process 
(
n)n0 
which 
is 
as 
close 
as 
possible 
to 
the 
client's 
actual 
risk 
aversion 
process 
(
C 
)n0. 
A 
related 
measure 
of 
personalization 


n 
may 
thus 
be 
directly 
built 
on 
the 
proximity 
of 
the 
investment 
strategy 
corresponding 
to 
(
n)n0 
and 
the 
strategy 
corresponding 
to 
(
n
C 
)n0. 
The 
latter 
is 
the 
strategy 
that 
achieves 
full 
personalization 
and 
can 
only 
be 
attained 
if 
interaction 
occurs 
at 
all 
times 
and 
there 
is 
no 
behavioral 
bias, 
in 
which 
case 
the 
two 
risk 
aversion 
processes 
coincide. 


Denote 
by 
(~∗ 
(
n))0n<T 
and 
(~(
C 
))0n<T 
the 
optimal 
allocations 
corresponding 
to 
(
n)0n<T 
and

n 
nn 
(
C 
)0n<T 
, 
respectively. 
In 
line 
with 
the 
denition 
of 
R(, 
) 
in 
(5.4), 
we 
introduce 
the 
measure

n 


"# 

T 
􀀀1

X

1 
~∗ 
(
n) 
− 
~(
C 
)

n 
nn

S(, 
) 
:= 
E 
. 


T~(
C 
)

nn

n=0 


23 



A 
smaller 
value 
of 
S(, 
) 
implies 
a 
higher 
level 
of 
personalization, 
and 
full 
personalization 
is 
achieved 
if 
and 
only 
if 
S(, 
) 
= 
0. 
We 
observe 
that 
the 
dierence 
between 
~(
n) 
and 
~∗ 
(
C 
) 
is 
not 
a 
simple 
function 
of

n 
nn 
the 
dierence 
between 

n 
and 

C 
. 
Nevertheless, 
in 
Appendix 
C 
we 
establish 
a 
direct 
relation 
between 
the

n 


two 
measures 
R 
and 
S, 
namely, 


 

S(, 
)= 
R(, 
)+ 
O((φ 
− 
1)p 
2)+ 
O 

φ 
2σ 
22 
, 
(5.7) 


which 
shows 
that 
a 
small 
dierence 
between 
(
n)0n<T 
and 
(
n
C 
)0n<T 
translates 
into 
a 
small 
dierence 
between 
the 
corresponding 
investment 
strategies. 
In 
the 
above 
equation, 
the 
rst 
error 
term 
is 
due 
to 
the 
idiosyncratic 
component 
of 
the 
client's 
risk 
aversion 
and 
it 
vanishes 
if 
φ 
= 
1. 
The 
second 
error 
term 
originates 
from 
the 
client's 
behavioral 
bias 
and 
it 
is 
maximized 
at 
φ 
= 
1. 


Figure 
3 
indicates 
that 
the 
value 
of 
φ 
that 
minimizes 
R(, 
) 
is 
a 
lower 
bound 
for 
the 
value 
of 
φ 
that 
minimizes 
S(, 
). 
In 
other 
words, 
minimizing 
R(, 
) 
provides 
a 
conservative 
estimate 
for 
the 
time 
between 
interaction 
that 
minimizes 
the 
allocation 
dierence 
S(, 
). 
This 
is 
because 
R(, 
) 
underestimates 
the 
impact 
of 
the 
client's 
behavior 
bias. 
Specically, 
R(, 
) 
equals 
the 
average 
relative 
dierence 
between 
(
C 
)n0 
and 
(
n)n0 
in 
any 
single 
time 
interval 
dened 
by 
two 
consecutive 
interaction 
times. 
Instead, 
the 


n 


optimal 
allocation 
at 
any 
given 
time 
depends 
on 
all 
future 
allocations 
and, 
thus, 
on 
the 
future 
path 
of 
the 
client's 
risk 
aversion. 
As 
a 
result, 
the 
behavioral 
bias 
in 
future 
investment 
decisions 
feeds 
into 
the 
investment 
decisions 
made 
at 
earlier 
times, 
and 
this 
is 
accounted 
for 
by 
the 
measure 
S(, 
). 


Remark 
5.2. 
Uniformly 
spaced 
interaction 
times 
yield 
a 
conservative 
estimate 
for 
the 
optimal 
interaction 
frequency. 
If 
the 
client 
were 
to 
interact 
with 
the 
robo-advisor 
at 
times 
triggered 
by 
market 
conditions, 
then 
we 
expect 
interaction 
to 
be 
more 
likely 
to 
occur 
after 
a 
period 
of 
extreme 
returns. 
The 
client 
would 
either 
be 
overly 
exuberant 
following 
a 
period 
of 
positive 
returns, 
or 
overly 
pessimistic 
after 
a 
period 
of 
negative 
returns. 
This 
magnies 
the 
impact 
of 
the 
client's 
behavioral 
bias, 
relative 
to 
a 
uniform 
interaction 
schedule, 
and 
would 
result 
in 
a 
larger 
value 
for 
. 


5.3 
Economic 
Transitions, 
Risk 
Aversion, 
and 
Investment 
Performance 
We 
analyze 
how 
the 
optimal 
investment 
strategy 
is 
aected 
by 
economic 
state 
transitions 
and 
the 
corresponding 
changes 
in 
the 
client's 
risk 
aversion. 
To 
focus 
exclusively 
on 
the 
implications 
of 
economic 
transitions 
on 
investment 
decisions, 
we 
let 
the 
client's 
risk 
aversion 
depend 
only 
on 
the 
current 
economic 
state. 
In 
this 
case, 
the 
risk 
aversion 
process 
in 
(5.3) 
takes 
the 
form 

n 
= 

¯ 
n(Yn). 
We 
calibrate 
this 
process 
so 
that 
the 
resulting 
optimal 
allocation 
(~n 
)0n<T 
is 
time-homogeneous, 
given 
the 
current 
economic 
state. 
Specically, 


24 



Figure 
3: 
The 
graphs 
plot 
the 
personalization 
measures 
S(, 
) 
(left 
y-axis) 
and 
R(, 
) 
(right 
y-axis) 
as 
a 
function 
of 
the 
time 
φ 
between 
consecutive 
interactions. 
Each 
panel 
corresponds 
to 
a 
dierent 
value 
of 
the 
parameter 
. 
The 
model 
parameters 
are 
the 
same 
as 
in 
Figure 
2. 


in 
Appendix 
C 
(see 
Proposition 
C.1) 
we 
show 
that, 
for 
a 
given 
¯ 
> 
0 
and 
> 
􀀀1, 
there 
exists 
a 
unique 
risk 


()

aversion 
process 
(
n 
)n0 
such 
that 
the 
corresponding 
optimal 
allocation 
is 
given 
by 


8 >

< 

;¯ 
Yn 
=1, 
˜ 
= 
(5.8)

π 
∗ 


n 


>

: (1 
+ 
);Yn 
=2. 


That 
is, 
in 
times 
of 
growth 
(y 
= 
1), 
the 
client's 
risky 
asset 
allocation 
is 
equal 
to 
, 
21 
and 
when 
the 
economy 
transits 
to 
the 
recessionary 
regime 
(y 
= 
2), 
the 
allocation 
changes 
to 
(1+), 
where 
the 
value 
of 
δ 
determines 
the 
change 
in 
allocation. 


It 
is 
well 
known 
from 
empirical 
studies 
that 
both 
the 
market 
Sharpe 
ratio 
and 
the 
risk 
aversion 
of 
retail 
investors 
are 
higher 
during 
periods 
of 
contractions. 
Consequently, 
retail 
investors 
may 
shift 
wealth 
away 
from 
the 
risky 
asset 
precisely 
when 
the 
benet 
of 
investing, 
as 
measured 
by 
the 
expected 
reward 
per 
unit 


21For 
example, 
=0:60 
corresponds 
to 
the 
classical 
60/40 
portfolio 
composition. 
This 
strategy 
was 
popularized 
by 
Jack 
Bogle, 
the 
founder 
of 
Vanguard, 
and 
is 
commonly 
used 
as 
a 
benchmark 
in 
portfolio 
allocation. 


25 



risk, 
is 
higher.22 
For 
these 
investors, 
a 
robo-advisor 
which 
caters 
to 
the 
client's 
wishes 
would 
construct 
a 
()

risk 
aversion 
process 
(
n 
)n0 
such 
that 
< 
0. 
By 
contrast, 
a 
robo-advisor 
which 
goes 
against 
the 
client's 


()

wishes 
would 
construct 
a 
risk 
aversion 
process 
(
n 
)n0 
such 
that 
δ 
≥ 
0, 
i.e., 
invest 
more 
in 
the 
risky 
asset 
when 
the 
economy 
is 
in 
a 
state 
of 
contraction 
and 
the 
return 
per 
unit 
risk 
is 
high. 


The 
remainder 
of 
the 
section 
proceeds 
as 
follows. 
In 
Section 
5.3.1, 
we 
analyze 
the 
Sharpe 
ratio 
achieved 
by 
the 
optimal 
investment 
strategy 
and 
its 
dependence 
on 
the 
parameter 
. 
In 
Section 
5.3.2, 
we 
analyze 
numerically 
the 
dependence 
of 
the 
client's 
terminal 
wealth 
distribution 
on 
δ 
and 
discuss 
how 
the 
roboadvisor 
should 
balance 
the 
client's 
risk 
preferences 
with 
the 
opportunity 
to 
improve 
the 
portfolio's 
investment 
performance. 


5.3.1 
Sharpe 
Ratio 
of 
Optimal 
Investment 
Strategy 
The 
Sharpe 
ratio 
of 
the 
strategy 
(5.8) 
is 
dened 
as 


π 
∗ 


π 
∗ 
˜ 


s 
() 
:= 
(5.9)

∗ 
, 


π 
∗ 


where 
˜ 
and 
π 
∗ 
are 
the 
long-run23 
mean 
and 
volatility 
of 
the 
excess 
returns 
achieved 
by 
∗ 
: 


h T 
􀀀1 
ih T 
􀀀1 
i

XX 

π 
∗ 
1 
π 
∗ 
1 
π 
∗ 
π 
∗ 


˜ 
:= 
lim 
E 
(rn;n+1 
− 
rn+1) 
, 
(π 
∗ 
)2 
:= 
lim 
E 
(rn;n+1 
− 
rn+1 
− 
~)2 
. 


T 
!∞ 
T 
T 
!∞ 
T 


n=0 
n=0 


We 
recall 
that 
rπ 
∗ 
is 
the 
return 
of 
the 
strategy 
∗ 
, 
between 
times 
n 
and 
n 
+ 
1, 
and 
that 
rn+1 
is 
the

n;n+1 


risk-free 
rate. 
In 
Lemma 
C.2 
we 
show 
that 
the 
Sharpe 
ratio 
(5.9) 
can 
be 
explicitly 
computed. 


Figure 
4 
indicates 
that, 
for 
a 
xed 
value 
of 
, 
the 
portfolio's 
Sharpe 
ratio 
is 
increasing 
in 
the 
stationary 
probability 
λ 
of 
the 
recessionary 
state 
(y 
= 
2). 
Formally, 
λ 
:= 
limn!∞ 
P(Yn 
= 
2), 
and 
λ 
also 
equals 
the 
long-run 
proportion 
of 
time 
spent 
in 
the 
recessionary 
state. 
Additionally, 
the 
Sharpe 
ratio 
is 
increasing 
in 
a 
:= 
~(2)=~(1), 
which 
is 
the 
relative 
change 
in 
mean 
excess 
returns 
between 
the 
two 
states, 
and 
decreasing 
in 
b 
:= 
(2)=(1), 
which 
is 
the 
relative 
change 
in 
the 
return 
volatility. 
These 
monotonicity 
properties 
turn 
out 
to 
hold 
under 
mild 
conditions 
(see 
Lemma 
C.3). 


Furthermore, 
Figure 
4 
shows 
that 
the 
Sharpe 
ratio 
(C.5) 
is 
generally 
increasing 
in 
, 
i.e., 
it 
is 
higher 
if 
a 
larger 
amount 
of 
wealth 
is 
invested 
in 
the 
risky 
asset 
when 
the 
economy 
is 
in 
a 
state 
of 
recession 
and, 
thus, 


22The 
economic 
state 
variable 
(Yn)n0 
is 
assumed 
to 
be 
observable, 
and 
it 
follows 
from 
(5.1) 
that 
the 
client's 
risk 
aversion 
reacts 
instantaneously 
to 
a 
change 
in 
economic 
conditions. 
In 
reality, 
the 
economic 
state 
may 
be 
hidden, 
and 
its 
value 
can 
only 
be 
inferred 
probabilistically. 
We 
expect 
that 
extending 
the 
model 
to 
such 
a 
setting 
would 
not 
have 
a 
qualitative 
eect 
on 
our 
results. 
Namely, 
the 
extended 
model 
would 
capture 
the 
fact 
that, 
throughout 
the 
business 
cycle, 
the 
client 
is 
on 
average 
less 
willing 
to 
invest 
in 
the 
risky 
asset 
when 
the 
market 
Sharpe 
ratio 
is 
high. 


23We 
compute 
the 
\long-run” 
Sharpe 
ratio 
of 
the 
strategy 
∗ 
, 
which 
is 
independent 
of 
the 
initial 
economic 
state, 
Y0. 


26 



the 
market 
Sharpe 
ratio 
is 
high. 
However, 
as 
the 
third 
panel 
shows, 
there 
may 
be 
situations 
when 
a 
larger 
value 
of 
δ 
may 
result 
in 
a 
smaller 
Sharpe 
ratio. 


In 
Lemma 
C.3, 
we 
derive 
the 
following 
characterization 
for 
the 
monotonicity 
of 
the 
Sharpe 
ratio 
with 
respect 
to 
, 


@sπ 
∗ 
() 
2(1) 
 b22(1) 
 

> 
0 
(⇒ 
1+ 
>a 
1+ 
(1+ 
). 
(5.10)

@δ 
~2(1) 
a2~2(1) 


Whether 
or 
not 
the 
condition 
above 
is 
satised 
depends 
on 
the 
values 
of 
a 
and 
b, 
which 
determine 
the 
dierence 
in 
market 
Sharpe 
ratios 
between 
the 
two 
economic 
states. 
In 
particular, 
consider 
the 
case 
where 
the 
allocation 
is 
the 
same 
in 
both 
economic 
states, 
i.e., 
δ 
= 
0. 
For 
a 
xed 
b> 
1, 
it 
can 
be 
observed 
from 


(5.10) 
that 
there 
exists 
a 
threshold 
a 
(b) 
>b 
that 
a 
needs 
to 
exceed 
for 
the 
condition 
to 
be 
satised. 
In 
other 
words, 
for 
the 
portfolio's 
Sharpe 
ratio 
to 
increase 
with 
additional 
investment 
during 
recessions, 
the 
market 
Sharpe 
ratio 
needs 
to 
be 
suciently 
high 
in 
such 
an 
economic 
state. 
The 
reason 
for 
why 
a 
marginally 
higher 
market 
Sharpe 
ratio 
may 
be 
insucient 
is 
that 
larger 
market 
returns 
in 
an 
economic 
state 
increase 
both 
the 
numerator 
and 
the 
denominator 
of 
the 
Sharpe 
ratio, 
because 
the 
\between-state” 
standard 
deviation 
of 
returns 
is 
then 
higher. 
We 
refer 
to 
the 
discussion 
following 
Lemma 
C.3 
for 
additional 
details. 
Condition 
(5.10) 
is 
generally 
satised 
for 
empirically 
plausible 
parameter 
values. 
That 
is, 
the 
portfolio's 
Sharpe 
ratio 
increases 
if 
more 
wealth 
is 
allocated 
to 
the 
risky 
asset 
when 
the 
market 
Sharpe 
ratio 
is 
high. 
However, 
Figure 
4 
indicates 
that 
the 
gain 
is 
modest, 
and 
that 
the 
Sharpe 
ratio 
decreases 
more 
when 
the 
allocation 
to 
the 
risky 
asset 
is 
decreased, 
compared 
to 
how 
much 
it 
increases 
when 
the 
allocation 
to 
the 
risky 


π 
∗ 


asset 
is 
increased 
by 
the 
same 
amount. 
In 
Appendix 
C, 
we 
show 
that 
s 
() 
is 
concave 
in 
a 
neighborhood 
of 
δ 
= 
0, 
namely, 


π 
∗ 


@2s 
() 
2(1) 
2(1)

2

/− 
a 
+ 
b2 
λ 
+ 
O(2). 
(5.11)

@2 
~2(1) 
~2(1)

=0 


This 
conrms 
that 
in 
order 
to 
maintain 
a 
satisfactory 
Sharpe 
ratio, 
it 
is 
more 
important 
not 
to 
reduce 
the 
risky 
asset 
allocation 
in 
a 
state 
of 
recession 
than 
to 
increase 
it. 


5.3.2 
Wealth 
Distribution 
and 
Cyclicality 
of 
Risk 
Aversion 
The 
portfolio's 
Sharpe 
ratio 
is 
determined 
by 
the 
rst 
two 
moments 
of 
its 
returns, 
which 
may 
not 
be 
sucient 
to 
characterize 
the 
entire 
return 
distribution. 
Therefore, 
comparing 
portfolios 
in 
terms 
of 
their 
Sharpe 
ratios 
therefore 
leaves 
out 
the 
impact 
of 
higher 
return 
moments. 
This 
is 
especially 
relevant 
in 
the 
presence 
of 
multiple 
economic 
states, 
given 
that 
the 
unconditional 
return 
distribution 
is 
then 
leptokurtic 
and 
skewed. 


27 



Figure 
4: 
The 
graphs 
plot 
the 
Sharpe 
ratio 
(5.9) 
as 
a 
function 
of 
. 
We 
set 
the 
state-dependent 
parameters 
r, 
, 
σ 
and 
the 
transition 
matrix 
P 
to 
the 
values 
specied 
in 
(5.12)-(5.13). 
This 
specication 
yields 
λ 
=1=3, 
a 
=2:1, 
and 
b 
=1:1. 
Left 
panel: 
We 
vary 
the 
parameter 
, 
while 
keeping 
a 
and 
b 
xed. 
Middle 
panel: 
We 
vary 
the 
parameter 
a, 
while 
keeping 
λ 
and 
b 
xed. 
Right 
panel: 
We 
vary 
the 
parameter 
b, 
while 
keeping 
λ 
and 
a 
xed. 
Each 
time 
step 
in

√ 


the 
model 
is 
one 
month, 
and 
we 
annualize 
the 
Sharpe 
ratio 
by 
multiplying 
(5.9) 
by 
12. 


We 
use 
numerical 
simulations 
to 
estimate 
the 
terminal 
distribution 
of 
the 
client's 
wealth, 
for 
dierent 
values 
of 
the 
parameter 
. 
We 
assume 
monthly 
portfolio 
rebalancing 
(a 
time 
step 
of 
one 
month) 
and 
set 
the 
transition 
matrix 
of 
the 
state 
variable 
(Yn)n0 
to 


"#" # 

P11 
P12 
0:95 
0:05 
P 
== 
. 
(5.12) 


P21 
P22 
0:10 
0:90 


These 
transition 
probabilities 
are 
based 
on 
empirical 
values 
reported 
in 
Chauvet 
and 
Hamilton 
[2006], 
who 
also 
show 
that 
a 
regime 
switching 
model 
captures 
well 
the 
economic 
state 
transitions 
described 
by 
the 
NBER's 
business 
cycle 
chronology. 
These 
values 
show 
that, 
on 
average, 
economic 
expansions 
last 
longer 
than 
contractions. 


We 
set 
the 
state-dependent 
return 
parameters 
in 
accordance 
with 
Tang 
and 
Whitelaw 
[2011], 
who 
report 
historical 
averages 
for 
changes 
in 
the 
mean 
and 
volatility 
of 
stock 
market 
returns, 
as 
well 
as 
for 
changes 
in 
the 
market 
Sharpe 
ratio, 
between 
the 
peak 
of 
the 
business 
cycle 
and 
the 
subsequent 
trough. 
Specically, 
we 
set 
the 
annual 
risk-free 
rate, 
mean 
and 
volatility 
of 
market 
returns 
to 


r 
= 
(0:015, 
0);µ 
= 
(0:081, 
0:137);σ 
= 
(0:155, 
0:173). 
(5.13) 


Figure 
5 
shows 
the 
simulated 
distribution 
of 
the 
return 
of 
the 
optimal 
investment 
strategy 
at 
maturity, 
and 
the 
corresponding 
annualized 
rate 
of 
return. 
It 
is 
evident 
from 
the 
gure 
that 
the 
skewness 
and 
kurtosis 
are 
higher 
when 
the 
risky 
asset 
allocation 
is 
maintained 
or 
increased 
in 
a 
state 
of 
recession, 
and 
that 
in 
those 
cases, 
the 
return 
upside 
is 
considerably 
higher, 
with 
a 
limited 
additional 
downside 
risk. 
The 
same 
pattern 


28 



is 
observed 
from 
the 
summary 
statistics 
of 
the 
simulations, 
reported 
in 
Table 
1. 


The 
above 
ndings 
indicate 
that 
both 
the 
Sharpe 
ratio 
and 
the 
terminal 
wealth 
achieved 
by 
the 
strategy 
dened 
in 
(5.8) 
are 
higher 
if 
δ 
≥ 
0, 
compared 
to 
the 
case 
< 
0. 
In 
other 
words, 
the 
investment 
benets 
are 
greater 
if 
the 
risky 
asset 
allocation 
is 
maintained 
or 
increased 
during 
recessions 
(δ 
≥ 
0). 
The 
question 
thus 
arises 
of 
how 
far 
the 
robo-advisor 
can 
reach 
\against 
the 
will” 
of 
a 
client 
whose 
risk 
preferences 
are 
countercylical 
and 
thus 
consistent 
with 
the 
case 
< 
0. 


While 
higher 
expected 
returns 
will 
be 
obtained 
in 
the 
long 
run, 
the 
client 
may 
suer 
from 
adverse 
market 
moves 
in 
the 
short 
run, 
and 
may 
not 
have 
an 
adequate 
understanding 
of 
the 
long-term 
benets. 
In 
a 
state 
of 
recession, 
with 
worsening 
economic 
outlook 
and 
risk 
aversion 
rising, 
the 
client 
may 
be 
particularly 
sensitive 
to 
what 
can 
be 
perceived 
as 
an 
investment 
mistake 
of 
the 
robo-advisor. 
The 
importance 
of 
this 
dilemma 
faced 
by 
robo-advisors 
is 
emphasized 
by 
Rossi 
and 
Utkus 
[2019a], 
who 
show 
empirically 
that 
algorithm 
aversion, 
i.e., 
the 
tendency 
of 
individuals 
to 
prefer 
a 
human 
forecaster 
over 
an 
algorithm, 
and 
to 
more 
quickly 
lose 
condence 
in 
an 
algorithm 
than 
in 
a 
human 
after 
observing 
them 
make 
the 
same 
mistake 
(Dietvorst 
et 
al. 
[2015]), 
is 
one 
of 
the 
main 
obstacles 
for 
the 
adoption 
of 
robo-advising. 


Our 
analysis 
suggests 
that 
a 
good 
middle 
ground 
for 
the 
robo-advisor 
is 
to 
encourage 
the 
client 
to 
simply 
maintain 
a 
xed 
portfolio 
composition, 
which 
is 
consistent 
with 
the 
long-term 
investing 
principle 
of 
riding 
out 
business 
cycles. 
To 
that 
end, 
the 
robo-advisor 
may 
present 
statistics 
such 
as 
those 
reported 
in 
Table 
1 
and 
Figure 
5 
to 
the 
client. 
Thus, 
the 
client 
may 
observe 
that, 
over 
time, 
higher 
returns 
can 
be 
earned 
with 
limited 
additional 
risk 
by 
maintaining 
exposure 
to 
the 
risky 
asset 
during 
recessions 
instead 
of 
reducing 
it.24 
This 
behavior 
would 
also 
be 
consistent 
with 
that 
of 
most 
robo-advising 
rms. 
Namely, 
modifying 
the 
portfolio 
allocation 
based 
on 
economic 
conditions 
is 
a 
form 
of 
active 
management 
and, 
in 
general, 
roboadvising 
rms 
which 
focus 
on 
long-term 
investing 
do 
not 
engage 
in 
such 
market 
timing.25 
Rather, 
they 
urge 
clients 
to 
stay 
the 
course 
through 
changing 
market 
conditions, 
in 
order 
to 
reap 
the 
benets 
of 
long-term 
investing. 


24In 
the 
context 
our 
model, 
this 
amounts 
to 
\changing” 
the 
client's 
risk 
aversion 
process 
from 
(
n 
())n0 
such 
that 
< 
0, 
to 


(0) 
()
(
n 
)n0. 
We 
recall 
that 
(
n 
) 
is 
the 
risk 
aversion 
process 
implied 
by 
the 
strategy 
given 
in 
(5.8). 


25One 
of 
the 
claimed 
benets 
of 
robo-advising 
is 
that 
by 
managing 
the 
portfolio 
on 
the 
client's 
behalf, 
the 
client 
is 
helped 
to 
resist 
the 
temptation 
of 
attempting 
to 
time 
the 
market. 
The 
robo-advising 
rms 
Betterment 
and 
Wealthfront 
also 
mention 
empirical 
work, 
such 
as 
the 
Dalbar's 
annual 
Quantitative 
Analysis 
of 
Investors 
report, 
which 
shows 
that 
investors 
who 
try 
to 
time 
the 
market 
tend 
to 
perform 
much 
worse 
than 
a 
\buy-and-hold” 
investor, 
and 
that 
the 
average 
investor 
signicantly 
underperforms 
a 
broad 
stock 
market 
index. 


29 



Figure 
5: 
Simulated 
distributions 
of 
the 
return 
of 
the 
strategy 
(5.8) 
between 
time 
0 
and 
time 
T 
(top 
panels), 
and 
the 
corresponding 
annualized 
rate 
of 
return 
(bottom 
panels). 
The 
parameters 
of 
the 
strategy 
are 
=0:6 
and 
δ 
∈ 
f􀀀0:3, 
0, 
0:3g. 
One 
time 
step 
in 
the 
model 
corresponds 
to 
one 
month, 
the 
market 
parameters 
are 
given 
in 
(5.12)-(5.13), 
the 
initial 
economic 
state 
is 
Y0 
= 
1, 
and 
the 
investment 
horizon 
is 
T 
= 
120 
months. 


Mean 
SD 
Skewness 
Kurtosis 
90% 
VaR 
95% 
VaR 
99% 
VaR 
δ 
< 
0 
0.740 
0.485 
0.838 
4.257 
-0.179 
-0.067 
0.117 
δ 
= 
0 
0.881 
0.589 
0.970 
4.712 
-0.213 
-0.085 
0.118 
δ 
> 
0 
1.036 
0.735 
1.231 
5.934 
-0.233 
-0.091 
0.134 
δ 
< 
0 
0.053 
0.029 
0.066 
3.011 
-0.017 
-0.006 
0.012 
δ 
= 
0 
0.061 
0.032 
0.092 
3.016 
-0.019 
-0.008 
0.012 
δ 
> 
0 
0.068 
0.037 
0.162 
3.089 
-0.021 
-0.009 
0.014 


Table 
1: 
Summary 
statistics 
for 
the 
simulated 
return 
distributions 
in 
Figure 
5. 
The 
top 
half 
of 
the 
table 
reports 
statistics 
for 
the 
return 
of 
the 
strategy 
throughout 
the 
investment 
period. 
The 
bottom 
half 
of 
the 
table 
gives 
the 
statistics 
for 
the 
annualized 
rate 
of 
return. 


Concluding 
Remarks 


The 
past 
decade 
has 
witnessed 
the 
rapid 
emergence 
of 
robo-advisors, 
which 
are 
online 
platforms 
allowing 
clients 
to 
interact 
directly 
with 
automated 
investment 
algorithms. 
Recent 
literature 
has 
provided 
empirical 
evidence 
on 
the 
characteristics 
of 
those 
investors 
who 
are 
more 
likely 
to 
switch 
to 
robo-advising, 
and 
how 


30 



robo-advising 
tools 
aect 
the 
portfolio 
composition 
of 
investors. 


In 
this 
work, 
we 
build 
a 
novel 
framework 
that 
incorporates 
important 
features 
of 
modern 
robo-advising 
systems. 
In 
this 
framework, 
a 
robo-advisor 
undertakes 
the 
task 
of 
optimally 
investing 
a 
client's 
wealth. 
The 
client 
has 
a 
risk 
prole 
that 
changes 
in 
response 
to 
market 
returns, 
economic 
conditions, 
and 
idiosyncratic 
events, 
and 
to 
which 
the 
robo-advisor's 
investment 
performance 
criterion 
dynamically 
adapts. 
We 
derive 
and 
analyze 
optimal 
investment 
strategies, 
and 
highlight 
the 
role 
of 
risk 
aversion 
process 
in 
driving 
the 
intertemporal 
hedging 
demand. 


The 
frequency 
of 
interaction 
between 
the 
client 
and 
robo-advisor 
determines 
the 
level 
of 
portfolio 
personalization, 
which 
is 
dened 
in 
terms 
of 
how 
accurately 
the 
robo-advisor 
is 
able 
to 
track 
the 
client's 
risk 
prole. 
We 
show 
that 
there 
exists 
an 
optimal 
interaction 
frequency, 
which 
maximizes 
portfolio 
personalization 
by 
striking 
a 
balance 
between 
receiving 
information 
from 
the 
client 
in 
a 
timely 
manner, 
and 
mitigating 
the 
eect 
of 
the 
client's 
behavioral 
biases. 


We 
quantify 
how 
the 
Sharpe 
ratio 
of 
the 
optimal 
investment 
strategy 
depends 
on 
the 
allocation 
of 
wealth 
within 
economic 
regimes, 
and 
study 
the 
potential 
gains 
achieved 
by 
a 
robo-advisor's 
strategy 
during 
periods 
of 
high 
market 
Sharpe 
ratio. 
The 
implementation 
of 
this 
strategy 
may 
require 
the 
robo-advisor 
to 
go 
against 
the 
client's 
wishes, 
because 
both 
the 
client's 
risk 
aversion 
and 
the 
market 
Sharpe 
ratio 
tend 
to 
be 
countercyclical. 
We 
show 
that 
by 
simply 
rebalancing 
the 
portfolio 
to 
maintain 
constant 
weights 
throughout 
the 
business 
cycle, 
the 
portfolio's 
Sharpe 
ratio 
is 
close 
to 
being 
optimal. 
We 
also 
show 
that 
the 
portfolio 
return 
distribution 
is 
signicantly 
improved 
relative 
to 
the 
situation 
where 
the 
investment 
in 
the 
risky 
asset 
is 
reduced 
during 
periods 
of 
economic 
contractions. 


Our 
framework 
can 
be 
extended 
and 
further 
aligned 
to 
the 
practices 
of 
modern 
robo-advising 
systems. 
Indeed, 
the 
market 
model 
can 
be 
allowed 
to 
include 
multiple 
tradable 
assets 
and 
portfolio 
rebalanced 
only 
if 
the 
portfolio 
weights 
have 
drifted 
signicantly 
from 
the 
target 
weights, 
due 
to 
price 
moves 
of 
the 
underlying 
securities. 
Robo-advisors 
generally 
use 
such 
threshold 
updating 
rules 
to 
rebalance 
their 
portfolios 
(Beketov 
et 
al. 
[2018]), 
while 
minimizing 
expense 
ratios 
and 
maximizing 
tax 
eciency. 
Furthermore, 
the 
regime 
switching 
model 
can 
be 
generalized 
to 
make 
the 
economic 
state 
variable 
hidden, 
in 
line 
with 
the 
fact 
that 
economic 
conditions 
are 
typically 
not 
transparently 
observed, 
or 
observed 
with 
a 
lag. 
If 
the 
state 
variable 
is 
hidden, 
then 
the 
robo-advisor 
runs 
the 
risk 
of 
not 
acting 
in 
the 
client's 
best 
interest 
by 
making 
investment 
decisions 
based 
on 
misclassied 
economic 
conditions. 
Finally, 
one 
may 
account 
for 
noise 
in 
the 
information 
communicated 
by 
the 
client. 
As 
the 
level 
of 
noise 
is 
expected 
to 
increase 
with 
the 
frequency 
of 
interaction, 
this 
would 
act 
as 
a 
further 
incentive 
to 
reduce 
interaction 
with 
the 
client. 


Herein, 
market 
returns 
are 
assumed 
to 
be 
conditionally 
independent 
of 
economic 
state 
transitions. 
Nev


31 



ertheless, 
these 
transitions 
are 
commonly 
associated 
with 
signicant 
market 
moves, 
in 
particular 
when 
the 
economy 
enters 
a 
recession.26 
Such 
market 
moves 
would 
eectively 
result 
in 
the 
client 
\buying 
high” 
and 
\selling 
low", 
and 
thus 
exacerbate 
the 
adverse 
eects 
of 
comonotonicity 
between 
risk 
aversion 
and 
the 
market 
Sharpe 
ratio. 
This 
would 
further 
incentivize 
the 
robo-advisor 
to 
act 
against 
the 
client's 
wishes, 
e.g., 
if 
a 
market 
drop 
is 
likely 
to 
happen 
following 
a 
change 
in 
economic 
conditions, 
the 
portfolio's 
market 
exposure 
could 
be 
adjusted 
to 
account 
for 
the 
probability 
of 
a 
near 
term 
market 
drop.27 


A 
Properties 
of 
Optimal 
Investment 
Strategy 


A.1 
Computation 
of 
Optimal 
Investment 
Strategy 
In 
the 
following 
proposition, 
we 
provide 
a 
characterization 
of 
the 
optimal 
investment 
strategy 
given 
in 
Proposition 
4.1, 
which 
depends 
on 
recursively 
computable 
expressions. 


Proposition 
A.1. 
The 
optimal 
allocation 
in 
Proposition 
4.1 
admits 
the 
representation 


az 
bz 
aaz

1 
µ 
(d) 
− 
Rn+1
n(µ 
(d) 
− 
µ 
(d)µ 
(d))

n 
nnn

˜ 
∗ 
(d)= 
, 
(A.1)

n 


bz2 
(d) 
− 
(az


n 
(d))2 


nn 


for 
any 
d 
2Dn, 
where 


a 
az

n(d) 
:= 
En;d[an+1(Dn+1)];n 
(d) 
:= 
En;d[an+1(Dn+1)Ze n+1], 


b 
bz 
bz2 


n(d) 
:= 
En;d[bn+1(Dn+1)];n 
(d) 
:= 
En;d[bn+1(Dn+1)Ze n+1];n 
(d) 
:= 
En;d[bn+1(Dn+1)Ze 
n 
2+1]. 


(A.2) 


The 
sequences 
(an(d))0n<T 
and 
(bn(d))0n<T 
satisfy 
the 
recursions 


π 
∗ 


an(d) 
:= 
En;d[(Rn+1 
+ 
Ze n+1 
~n(d))an+1(Dn+1)], 


(A.3) 


π 
∗ 


bn(d) 
:= 
En;d[(Rn+1 
+ 
Ze n+1 
~n(d))2bn+1(Dn+1)], 


with 
aT 
(d)= 
bT 
(d)=1, 
for 
all 
d 
2DT 
. 


26This 
is 
also 
the 
case 
in 
the 
consumption-based 
asset 
pricing 
frameworks 
which 
generate 
countercyclical 
variation 
in 
risk 
aversion, 
such 
as 
Campbell 
and 
Cochrane 
[1999]. 
In 
their 
framework, 
a 
worsening 
economic 
outlook 
leads 
to 
an 
increase 
in 
risk 
aversion, 
and 
investors 
demand 
higher 
reward 
for 
carrying 
risk, 
which 
in 
turn 
leads 
to 
a 
fall 
in 
stock 
prices. 


27Portfolio 
allocation 
under 
regime 
switching 
is 
widely 
studied. 
Related 
to 
our 
work, 
Tang 
and 
Whitelaw 
[2011] 
show 
how 
simple 
market 
timing 
strategies 
can 
exploit 
the 
fact 
that 
Sharpe 
ratios 
are 
countercyclical, 
and 
Coudert 
and 
Gex 
[2008] 
show 
that 
risk 
aversion 
indices 
published 
by 
nancial 
institutions 
are 
good 
leading 
indicators 
of 
stock 
market 
crises. 
Kritzman 
et 
al. 
[2012] 
show 
how 
a 
Markov 
switching 
model 
can 
be 
used 
to 
avoid 
large 
portfolio 
losses 
related 
to 
\event 
regimes", 
during 
which 
asset 
return 
dynamics 
start 
deviating 
from 
their 
past 
levels 
and 
the 
market 
risk 
premium 
is 
low. 


32 



The 
quantities 
an(d) 
and 
bn(d) 
in 
Proposition 
A.1 
are 
the 
rst 
and 
second 
moments 
of 
the 
future 
value 
of 
one 
dollar 
invested 
optimally 
between 
time 
n 
and 
the 
terminal 
date 
T 
, 
conditionally 
on 
Dn 
= 
d. 
That 
is, 


π 
∗ 
π 
∗ 


an(d) 
:= 
En;d[1 
+ 
rn;T 
];bn(d) 
:= 
En;d[(1 
+ 
rn;T 
)2], 
(A.4) 


π 
∗ 


with 
the 
simple 
return 
rn;T 
dened 
in 
(3.6). 
Because 
both 
an(d) 
and 
bn(d) 
are 
independent 
of 
the 
wealth 
x 
at 
time 
n, 
it 
follows 
from 
(3.8) 
that 
the 
value 
function 
at 
time 
n 
is 
also 
independent 
of 
x, 
and 
given 
by 



n(d) 


2

Vn(x, 
d)= 
Vn(d) 
:= 
an(d) 
− 
1 
− 
(bn(d) 
− 
a 
(d)). 
(A.5)

n

2 
Finally, 
Proposition 
A.1 
shows 
that 
the 
optimal 
proportion 
of 
wealth 
allocated 
to 
the 
risky 
asset, 
~∗ 
, 
is 
also

n 


independent 
of 
the 
wealth 
variable. 
The 
expected 
values 
in 
(A.2) 
admit 
integral 
representations, 
which 
in 
turn 
can 
be 
used 
to 
compute 
the 


az

expected 
values 
in 
(A.3). 
Next, 
we 
provide 
such 
a 
representation 
for 
µ 
(d), 
both 
in 
the 
general 
case 
and 
in 


n 


the 
specic 
case 
described 
in 
Section 
5.1. 


Lemma 
A.2. 
(a) 
Assume 
that 
given 
Dn 
= 
d, 
the 
random 
variable 
(n+1) 
admits 
a 
generalized 
probability 
density 
function, 
f(n+1)jd. 
Then, 


ZZ

X 

az 


n 
(d)= 
Pyn;y0 
an+1(Dn+1)~z 
0fZjyn 
(z 
0)f(n+1)jd(0)dz0d0 
, 
z02R 


02Rn+1 


y02Y 


0

where 
z˜ 
:= 
z0 
􀀀r(yn), 
and 
Dn+1 
=(Y(n+1);Z(n+1);(n+1);(n+1)) 
2Dn+1 
is 
such 
that 
Y(n+1) 
=(y, 
y0), 
Z(n+1) 
=(z, 
z0), 
(n+1) 
=(, 
n+1), 
and 
(n+1) 
=(, 
n+1). 
The 
value 
of 
n+1 
is 
determined 
by 
the 
triplet 
(Y(n+1);Z(n+1);(n+1)). 
If 
n+1 
= 
n, 
then 
n+1 
= 
n, 
while 
if 
n+1 
= 
n 
+1, 
n+1 
is 
determined 
by 
(Y(n+1);Z(n+1);(n+1)). 


(b) 
For 
the 
model 
in 
Section 
5.1, 
i.e., 
where 
the 
risk 
aversion 
process 
(
n)n0 
is 
given 
by 
(5.3) 
and 
the 
interaction 
times 
are 
of 
the 
form 
Tk 
= 
k, 
for 
some 
φ 
≥ 
1, 
we 
have 
(P R 

0

Pyn;y 
02R 
an+1(Dn+1)~z0fZjyn 
(z0)dz0 
;n+1 
<n 
+1;

y02Y 
z

az 


µ 
(d) 
= 
(A.6)

n 


P RR 

()

Pyn;y0 
an+1(Dn+1)~z0fZjyn 
(z0)f 
(0)dz0d0 
;n+1 
= 
n 
+1;

y02Y 
z02R 
02R 


()

where 
fZjyn 
is 
the 
Gaussian 
probability 
density 
function 
with 
mean 
(yn) 
and 
variance 
2(yn), 
f 
is 


33 



the 
-fold 
convolution 
of 
the 
generalized 
density 
function 
of 
the 
i.i.d. 
sequence 
(n)n1, 
and28 


(􀀀  

(y, 
y0), 
(z, 
z0), 
(, 
n) 
;n+1 
<n 
+1, 
Dn+1 
= 


􀀀 

(y, 
y0), 
(z, 
z0), 
(, 
n+1) 
;n+1 
= 
n 
+1. 


If 
n+1 
= 
n 
+1, 
then 
n+1 
is 
given 
by 
an 
explicit 
function 
of 
((y, 
y0), 
(z, 
z0);n;0). 


Equation 
(A.6) 
shows 
that 
two 
distinct 
cases 
need 
to 
be 
considered, 
depending 
on 
whether 
or 
not 
the 


az

client's 
risk 
preferences 
are 
solicited 
at 
time 
n. 
In 
both 
cases, 
the 
computation 
of 
µ 
(d) 
involves 
a 
sum 
over 


n 
the 
distribution 
of 
the 
economic 
state 
Yn+1, 
and 
an 
integral 
with 
respect 
to 
the 
distribution 
of 
the 
market 
az

return 
Zn+1. 
Additionally, 
if 
n+1 
= 
n 
+ 
1, 
the 
client's 
risk 
preferences 
are 
solicited 
at 
time 
n 
+ 
1 
and 
µ 
(d)

n 


involves 
an 
additional 
integral 
with 
respect 
to 
the 
distribution 
of 
the 
cumulative 
idiosyncratic 
risk 
aversion 


P

n 
()

shock 
k=n 
k+1. 
Hence, 
the 
probability 
distributions 
fZjyn 
, 
Pyn;, 
and 
f 
, 
link 
the 
optimal 
allocation 
at 
time 
n 
to 
the 
optimal 
allocations 
at 
time 
n 
+ 
1. 
We 
observe 
that 
if 
n+1 
<n 
+ 
1, 
the 
dynamics 
are 
only 
based 
on 
incoming 
market 
and 
economic 
information, 
modeled 
through 
Zn+1 
and 
Yn+1, 
while, 
in 
the 
case 


P

n

n+1 
= 
n 
+ 
1, 
they 
also 
depend 
on 
information 
received 
from 
the 
client, 
given 
by 
k=n 
k+1. 


π 
∗ 


Remark 
A.3. 
Equation 
(A.3) 
shows 
how 
the 
rst 
two 
moments 
of 
1 
+ 
rn;T 
can 
be 
computed 
recursively. 


(m) 
π 
∗ 
This 
can 
be 
extended 
to 
the 
m-th 
nite 
moment, 
µ 
(d) 
:= 
En;d[(1 
+ 
r 
)m], 
which 
satises 
the 
recursion

n 
n;T 


􀀀 

m

(m) 
π 
∗ 
(m)
n 
(d)= 
En;d 
Rn+1 
+ 
Ze n+1 
~n(d) 
n+1(Dn+1) 
. 


Under 
mild 
conditions, 
a 
probability 
distribution 
with 
nite 
moments 
of 
all 
orders 
is 
uniquely 
determined 


π 
∗ 


by 
its 
moments 
(see 
Billingsley 
[1995], 
Sec. 
30). 
In 
that 
case, 
the 
distribution 
of 
the 
portfolio 
return 
rn;T 


(1) 
(M)
can 
be 
recovered 
from 
a 
nite 
set 
of 
moments 
n 
;:::;n 
, 
for 
some 
M 
≥ 
1. 


A.2 
Computational 
Complexity 
of 
Optimal 
Investment 
Strategy 
The 
optimal 
investment 
strategy 
in 
Proposition 
A.1 
is 
computed 
using 
backward 
induction, 
which 
requires 
discretization 
of 
the 
state 
variable 
Dn, 
for 
each 
n. 
This 
variable 
is 
high-dimensional, 
as 
it 
contains 
the 
history 
of 
economic 
states, 
market 
returns, 
interaction 
times, 
and 
communicated 
risk 
aversion 
parameters. 
However, 
the 
optimal 
investment 
strategy 
at 
time 
n 
can 
in 
general 
be 
written 
as 
a 
function 
of 
a 
lower-dimensional 
random 
variable 
De n, 
which 
is 
measurable 
with 
respect 
to 
Dn. 
For 
instance, 
in 
the 
model 
of 
Section 
5.1, 
the 


28With 
a 
deterministic 
interaction 
schedule, 
we 
omit 
the 
interaction 
times 
n 
from 
the 
state 
variable 
Dn. 


34 



variable 
De n 
consists 
of 
four 
components:29 


X􀀀1

 n 
n􀀀1 


X􀀀  

De n 
:= 
n, 
(Zk+1 
− 
k+1);Zk+1 
− 
k+1 
;Yn 
∈ 
R+
0 
× 
R2 
Y. 
k=n􀀀k=n 


That 
is, 
De n 
consists 
of 
the 
most 
recently 
communicated 
risk 
aversion 
parameter, 
the 
sum 
of 
excess 
market 
returns 
between 
the 
two 
most 
recent 
interaction 
times, 
the 
sum 
of 
excess 
market 
returns 
since 
the 
most 
recent 
interaction 
time, 
and 
the 
current 
economic 
state. 
If 
a 
step 
size 
γ 
is 
used 
to 
discretize 
the 
risk 
aversion 
parameter, 
a 
step 
size 
z 
is 
used 
for 
each 
of 
the 
return 
variables, 
and 
a 
general 
number 
jY| 
≥ 
1 
of 
economic 
states 
is 
assumed, 
the 
number 
of 
points 
in 
the 
discretization 
grid 
is 
of 
order 


T 
jY| 
 1 
 

1f>1} 
+ 
1f=1} 
;


z 
z 


where 
each 
point 
requires 
numerical 
integration 
to 
compute 
each 
of 
the 
expected 
values 
in 
(A.2) 
(see 
(A.6)). 


In 
the 
general 
case, 
one 
may 
use 
properties 
of 
the 
risk 
aversion 
process 
to 
reduce 
the 
computational 


az

complexity. 
For 
example, 
to 
compute 
µ 
in 
Lemma 
A.2, 
the 
numerical 
integration 
can 
be 
avoided 
by 


n 
evaluating 
Zn+1 
at 
its 
expected 
value, 
n+1. 
This 
leads 
to 
the 
approximation 


 T 
􀀀1

X 1=2 

az 


n 
(d)= 
En;d[an+1(Dn+1)Z˜ 
n+1jZn+1 
= 
n+1]+ 
O 
E 
(~k 
∗ 
(
k) 
− 
~k 
∗ 
(
k 
0 
))2 
. 
k=n+1 


)T 
􀀀1

In 
the 
above 
error 
term, 
(~(
0 
))Tk= 
− 
n 
1+1 
are 
the 
future 
optimal 
allocations 
corresponding 
to 
(
0 
k=n+1, 
which 


kk 
is 
the 
risk 
aversion 
process 
resulting 
from 
setting 
Zn+1 
= 
n+1. 
In 
particular, 
if 
the 
future 
risk 
aversion 
)T 
􀀀1

values 
are 
independent 
of 
Zn+1, 
then 
(
0 
=(
k)k
T 
= 
− 
n 
1+1, 
and 
the 
error 
term 
vanishes. 
In 
general, 
the

kk=n+1 


eect 
of 
a 
single 
market 
return 
on 
the 
future 
risk 
aversion 
path 
is 
limited 
-either 
temporary, 
or 
quickly 
diluted 
by 
the 
eect 
of 
future 
returns. 
For 
instance, 
in 
the 
risk 
aversion 
model 
of 
Section 
5.1, 
the 
return 
Zn+1 
impacts 
the 
risk 
aversion 
process 
only 
in 
a 
time 
interval 
bounded 
by 
two 
consecutive 
interaction 
times. 


The 
computational 
complexity 
can 
also 
be 
reduced 
by 
using 
properties 
of 
the 
economic 
state 
transition 
matrix. 
In 
particular, 
for 
a 
single 
time 
step, 
the 
transition 
probability 
out 
of 
the 
current 
state 
is 
generally 


az

small 
(see 
(5.12)). 
In 
the 
computation 
of 
µ 
(d), 
this 
leads 
to 
the 
approximation 


n 


X  X 

az 
0 


n 
(d)= 
Pyn;y0 
En;d 
an+1(Dn+1)Z˜ 
n+1 
Yn+1 
= 
y 
+ 
O 
1 
− 
Pyn;y0 
, 
y02Ye 
y02Ye 


29The 
functional 
Jn 
in 
(3.5) 
depends 
on 
d 
2Dn. 
In 
this 
example, 
for 
a 
xed 
d˜ 
∈ 
R+ 
× 
R2 
Y, 
the 
value 
of 
Jn 
is 
the 
same

0 


e 
~

for 
any 
d 
2Dn 
such 
that 
if 
Dn 
= 
d 
then 
Dn 
= 
d. 


35 



ee

where 
YY. 
For 
instance, 
if 
Y 
= 
fyng, 
we 
condition 
on 
staying 
in 
the 
current 
economic 
state, 
while 
if 


e

Y 
= 
fyn 
− 
1;yn;yn 
+1g, 
we 
condition 
on 
staying 
in 
the 
current 
state 
or 
transitioning 
to 
neighboring 
states. 


A.3 
Investment 
Constraints 
The 
dynamic 
optimization 
problem 
analyzed 
in 
Section 
3 
can 
be 
enhanced 
to 
handle 
portfolio 
constraints 
typically 
imposed 
by 
robo-advising 
rms. 
For 
example, 
we 
may 
assume 
that 
the 
space 
of 
admissible 
strategies 
is 
restricted 
to 
control 
laws 
π 
=(n)0n<T 
such 
that 
the 
proportion 
of 
wealth 
invested 
in 
the 
risky 
asset, 
denoted 
by 
˜ 
=(~n)0n<T 
, 
satises 


􀀀∞ 
<π 
≤ 
~n 
≤ 
¯ 
n 
< 
1, 
(A.7)

n 


where 
(π 
)0n<T 
and 
(n)0n<T 
are 
deterministic 
sequences. 
In 
particular, 
no 
short-selling 
and 
no 
borrow-

n 


ing 
constraints 
correspond 
to 
π 
≡ 
0 
and 
π 
≡ 
1, 
respectively. 


In 
this 
case, 
the 
optimal 
allocation 
formula 
is 
given 
by 
a 
truncated 
version 
of 
the 
unconstrained 
optimal 
allocation 
formula. 
Namely, 
in 
the 
unconstrained 
case, 
the 
proof 
of 
Proposition 
4.1 
shows 
that 
the 
optimal 
allocation 
~∗ 
is 
obtained 
by 
maximizing 
a 
second 
order 
polynomial 
hn 
with 
a 
negative 
leading 
order 
coecient 


n 


(see 
(B.9)). 
Under 
the 
above 
portfolio 
constraint, 
the 
optimal 
allocation 
is 
thus 
obtained 
by 
truncating 
the 
outcome 
of 
the 
unconstrained 
allocation 
formula 
(A.1) 
from 
below 
by 
π 
, 
and 
from 
above 
by 
n.

n 


We 
next 
consider 
the 
eect 
of 
truncating 
the 
optimal 
investment 
strategy 
∗ 
to 
zero 
whenever 
the 
wealth 
level 
is 
negative. 
This 
results 
in 
the 
investment 
strategy 
o 
given 
by 


o 


(x, 
d)= 
π 
∗ 
(x, 
d)1fx0g. 
(A.8)

nn 


Hence, 
o 
coincides 
with 
the 
optimal 
strategy 
∗ 
if 
the 
wealth 
variable 
x 
is 
non-negative, 
but 
switches 
to 
a 
risk-free 
portfolio 
when 
the 
wealth 
becomes 
negative. 
In 
the 
following 
lemma, 
we 
study 
the 
dierence 
between 
the 
strategies 
o 
and 
∗ 
. 


Lemma 
A.4. 
Let 
∗ 
be 
the 
optimal 
strategy 
in 
Proposition 
4.1 
under 
the 
constraint 
(A.7) 
with 
π 
≡ 
0 
and 
¯ 
≡ 
1. 
For 
x> 
0 
and 
d 
2Dn, 
we 
have 
the 
following 
relations 
between 
the 
expectation 
and 
variance 
of 
the 
portfolio 
return 
achieved 
under 
the 
strategy 
∗ 
and 
the 
constrained 
strategy 
o 
dened 
in 
(A.8): 


o 
π 
∗ 


En;x;d[1 
+ 
rn;T 
]= 
En;d[1 
+ 
rn;T 
]+ 
O(Pn;d(Ze n+1 
< 
􀀀1)), 


o 
π 
∗ 


V 
arn;x;d[1 
+ 
rn;T 
]= 
V 
arn;d[1 
+ 
rn;T 
]+ 
O(Pn;d(Ze n+1 
< 
􀀀1)). 


36 



Furthermore, 
for 
x> 
0 
and 
d 
2Dn, 
the 
objective 
functional 
(3.5) 
evaluated 
at 
o 
satises 
the 
relation 


Jn(x, 
d, 
o)= 
Vn(d)+ 
O(Pn;d(Ze n+1 
< 
􀀀1)), 


where 
Vn(d) 
is 
the 
value 
function 
in 
(A.5). 


Observe 
that 
in 
the 
previous 
lemma, 
the 
expectation 
and 
variance 
terms 
under 
o 
do 
not 
depend 
on 
the 
value 
of 
x, 
as 
long 
as 
x> 
0. 
The 
same 
is 
true 
if 
x< 
0, 
in 
which 
case 
they 
only 
depend 
on 
the 
risk-free 
rate 
throughout 
the 
investment 
horizon, 
and 
can 
be 
written 
as 


hT 
􀀀1

hT 
􀀀1 
i Yi

Y 

o 
o 


En;x;d[1 
+ 
rn;T 
]= 
En;d 
Rk+1 
, 
Varn;x;d[1 
+ 
rn;T 
]= 
V 
arn;d 
Rk+1 
. 
k=nk=n 


The 
proof 
of 
the 
lemma 
shows 
that 
the 
constants 
in 
the 
O-terms 
admit 
explicit 
upper 
bounds 
depending 
only 
on 
n 
and 
can 
thus 
be 
uniformly 
bounded 
for 
all 
0 
≤ 
n<T 
. 
The 
order 
of 
the 
O-terms 
can 
also 
be 
uniformly 
bounded 
by 
a 
constant 
independent 
of 
n 
and 
d, 
because 


Pn;d(Ze n+1 
< 
􀀀1) 
≤ 
max 
P(Ze 1 
< 
􀀀1jY0 
= 
y). 


y2Y 


For 
reasonable 
parameter 
values, 
the 
above 
probability 
is 
very 
small. 
For 
example, 
standard 
annualized 
parameter 
values 
for 
the 
mean 
and 
variance 
of 
Ze1 
are 
~=0:1 
and 
σ 
=0:2. 
In 
that 
case, 
the 
event 
fZ1 
< 
􀀀1} 
corresponds 
to 
a 
negative 
return 
whose 
magnitude 
exceeds 
ve 
standard 
deviations. 
As 
the 
discrete 
step 
size 
in 
the 
model 
gets 
smaller 
(e.g., 
monthly 
rather 
than 
annual), 
the 
probability 
becomes 
smaller, 
and 
vanishes 
in 
the 
continuous-time 
limit. 
This 
can 
be 
seen 
explicitly 
for 
the 
model 
considered 
in 
Section 
5.1, 
where 
returns 
are 
conditionally 
Gaussian. 
In 
that 
case, 
we 
have 
the 
bound 


1

− 


22(y)

P(Ze n+1 
< 
􀀀1jYn 
= 
y) 
≤ 
(y)e, 


and 
the 
right-hand 
side 
converges 
to 
zero 
as 
(y) 
tends 
to 
zero. 


B 
Proofs 
and 
Auxiliary 
Results 
for 
Section 
4 


We 
start 
by 
proving 
a 
lemma 
that 
will 
be 
used 
in 
the 
proof 
of 
Proposition 
4.1. 


37 



Lemma 
B.1. 
Let 
π 
=(n)n0 
be 
an 
admissible 
control 
law 
of 
the 
form 
n(x, 
d)= 
~n(d)x, 
(B.1) 
for 
any 
x 
∈ 
R, 
and 
d 
2Dn. 
Then, 
the 
return 
moments 


π 
π 


an(d) 
:= 
En;d[1 
+ 
rn;T 
];bn(d) 
:= 
En;d[(1 
+ 
rn;T 
)2], 


satisfy 
the 
recursions 
in 
(A.3) 
with 
∗ 
= 
. 
Proof 
of 
Lemma 
B.1: 
For 
n 
= 
T 
− 
1, 
it 
follows 
from 
the 
wealth 
dynamics 
(3.1) 
that 




En;d[1 
+ 
rn;T 
]= 
En;d[Rn+1 
+ 
Ze n+1~n(d)] 
= 
Rn+1 
+ 
~n+1~n(d). 


Next, 
let 
n 
2f0, 
1;:::;T 
− 
2} 
and 
assume 
that 
the 
result 
holds 
for 
n 
+1;n 
+2;:::;T 
− 
1. 
Then, 


h T 
􀀀1 
i

Y 



En;d[1 
+ 
rn;T 
]= 
En;x;d 
(Rn+1 
+ 
Ze n+1~n(d)) 
(Rk+1 
+ 
Zek+1~k(Dk)) 
k=n+1 


h T 
􀀀1 
= 
En;x;d 
(Rn+1 
+ 
Ze n+1~n(d))En+1;Xπ 
;Dn+1 
(Rk+1 
+ 
Ze k+1~k(Dk)) 


h Yii 

n+1 


k=n+1 
π 


= 
En;x;d[(Rn+1 
+ 
Ze n+1~n(d))an+1(Dn+1)] 
π 


= 
En;d[(Rn+1 
+ 
Ze n+1~n(d))an+1(Dn+1)], 


The 
assertion 
for 
the 
bn-sequence 
is 
shown 
in 
the 
same 
way. 
Next, 
we 
derive 
the 
extended 
HJB 
system 
of 
equations 
necessarily 
satised 
by 
an 
optimal 
control 
law 
for 
the 
optimization 
problem 
dened 
by 
(3.5)-(3.7). 
To 
simplify 
notation, 
we 
introduce 
the 
random 
variable 


De n 
:= 
(Xn;Dn) 
2De n+1 
:= 
R0 
Dn. 


Furthermore, 
we 
write 


De
π 
=(Xn
π 
+1;Dn+1);

n+1 


where 
Xn
π 
+1 
is 
obtained 
by 
applying 
the 
control 
law 
π 
to 
the 
wealth 
x 
at 
time 
n. 
Proposition 
B.2. 
Assume 
that 
an 
optimal 
control 
law 
∗ 
for 
the 
optimization 
problem 
(3.5)-(3.7) 
exists. 


38 



Then, 
the 
value 
function 
(3.8) 
satises 
the 
recursive 
equation 


n  

Vn(d~) 
= 
sup 
E 
n;d~[Vn+1(De n
π 
+1)] 
− 
E 
n;d~[fn+1;n+1(De n
π 
+1; 
De n
π 
+1)] 
− 
E 
n;d~[fn+1;n(De n
π 
+1; 
d~)] 
(B.2) 
π 


h  Dπ 
2i h Dπ 
i2o


n+1(Dn+1) 
gn+1( 
e n+1) 

n(d) 
gn+1( 
e n+1)

− 
E 
˜ 
− 
E 
˜ 
;

n;d 
n;d

2 
Xπ 
2 


x

n+1 


(B.3) 
for 
0 
≤ 
n<T 
and 
d~= 
(x, 
d) 
2De n, 
with 
terminal 
condition 
VT 
(d~) 
= 
0;d˜ 
2De T 
. 


Herein, 
for 
any 
xed 
k 
=0, 
1;:::;T 
and 
d~0 
=(x0;d0) 
2Dek, 
the 
function 
sequence 
(fn;k(; 
d~0))0nT 
, 
where 
fn;k(; 
d~0): 
De n 
7
→ 
R, 
is 
determined 
by 
the 
recursion 


Dπ 
∗ 


fn;k(d~; 
d~0)= 
E 
~[fn+1;k( 
e n+1; 
d~0)];d˜ 
2De n, 
0 
≤ 
n 
< 
T, 


n;d 


2

x
k(d0) 
x 


fT;k(d~; 
d~0)= 
− 
1 
− 
;d˜ 
2De
T 
;

00

x 
2 
x 
and 
the 
function 
sequence 
(gn)0nT 
, 
where 
gn 
: 
De n 
7
→ 
R, 
is 
determined 
by 
the 
recursion 


(d~) 
= 
E 
Dπ 
∗ 
d˜ 
∈ 
e 0 
≤ 
n 
< 
T, 


gn 
~[gn+1( 
e n+1)], 
Dn, 
gT 
(d~) 
= 
x, 
d˜ 
2De
T 
. 


n;d 


Furthermore, 
the 
function 
sequences 
admit 
the 
probabilistic 
representations 


hXπ 
∗ 
Xπ 
∗ 
2i


k(d0)

TT

fn;k(d~; 
d~0)= 
E 
˜ 
− 
1 
− 
;gn(d~) 
= 
En;d[XT
π 
∗ 
]. 


n;d 
00

x 
2 
x 
Proof 
of 
Proposition 
B.2: 
We 
write 
the 
objective 
functional 
at 
time 
n 
as 
(˜ 
(˜ 
(~[X

Jn 
d; 
)= 
E 
~[Fn 
d, 
XT)] 
+ 
Gn 
d, 
E 
˜ 
T 
]);

n;d 
n;d 


where, 
for 
d~= 
(x, 
d) 
2De n 
and 
y 
∈ 
R, 


2 
2

y
n(d~) 
y
n(d~) 
y

(˜ 
(~

Fn 
d, 
y) 
:= 
− 
1 
− 
;Gn 
d, 
y) 
:= 
. 
(B.4) 


x 
2 
x 
2 
x 


39 



The 
proof 
now 
consists 
of 
two 
parts. 
First, 
we 
derive 
the 
recursive 
equation 
satised 
by 
the 
sequence 
of 
objective 
functionals 
for 
any 
admissible 
control 
law 
. 
Then, 
we 
derive 
the 
system 
of 
equations 
that 
an 
optimal 
control 
law 
∗ 
must 
satisfy. 


Step 
1: 
Recursion 
for 
Jn(d~; 
). 
For 
a 
given 
admissible 
control 
law 
, 
and 
xed 
0 
≤ 
k 
≤ 
T 
and 
d~0 
2De k, 
we 
dene 
the 
function 
sequences 


fπ 
d;˜ 
d˜ 
∈ 
e 

n;k(˜ 
d0) 
:= 
E 
n;d~[Fk(d~0;XT)], 
Dn, 
0 
≤ 
n 
≤ 
T, 
(˜ 
[Xπ 
d˜ 
∈ 
e

gd) 
:= 
E 
˜ 
T 
], 
Dn, 
0 
≤ 
n 
≤ 
T, 


n 
n;d 


and 
note 
that, 
by 
the 
law 
of 
iterated 
expectations, 




fπ 
Dπ 
Dπ 


n;k(d~; 
d~0)= 
E 
~[fn
π 
+1;k( 
e n+1; 
d~0)];gn(d~) 
= 
E 
~[gn+1( 
e n+1)]. 
(B.5)

n;d 
n;d 


For 
De n+1 
2De n+1, 
the 
objective 
functional 
at 
time 
n 
+ 
1 
can 
then 
be 
written 
as 


Jn+1(De n+1; 
)= 
E 
e 
[Fn+1(De n+1;XT)] 
+ 
Gn+1(De n+1, 
E 
e 
[XT])

n+1;Dn+1 
n+1;Dn+1 


π 


= 
fn
π 
+1;n+1(De n+1; 
De n+1)+ 
Gn+1(De n+1;gn+1(De n+1)). 


Taking 
expectations 
with 
respect 
to 
P 
n;d˜ 
and 
applying 
the 
control 
law 
π 
at 
time 
n 
yields 




E 
n;d~[Jn+1(De n
π 
+1; 
)] 
= 
E 
n;d~[fn
π 
+1;n+1(De n
π 
+1; 
De n
π 
+1)] 
+ 
E 
n;d~[Gn+1(De n
π 
+1;gn+1(De n
π 
+1)]. 


Adding 
and 
subtracting 
Jn(d~; 
) 
gives 


E 
n;d~[Jn+1(De n
π 
+1; 
)] 
= 
Jn(˜ 
n;d~[fn
π 
+1;n+1(De n
π 
+1; 
De n
π 
+1)] 
− 
E 
n;d˜ 
(˜ 
T 
)]

d; 
)+ 
E 
[Fn 
d, 
Xπ 




+ 
E 
Dn
π 
+1;g 
Dn
π 
+1))] 
− 
Gn(d;˜ 
E 
[XT]). 
n;d~[Gn+1( 
e n+1( 
e n;d˜ 


Using 
(B)-(B.5), 
we 
then 
obtain 


 

Jn(d~; 
)= 
E 
n;d~[Jn+1(De n
π 
+1; 
)] 
− 
E 
n;d~[fn
π 
+1;n+1(De n
π 
+1; 
De n
π 
+1)] 
− 
E 
n;d~[fn
π 
+1;n(De n
π 
+1; 
d~)] 
(B.6)

 



− 
E 
~[Gn+1(De n
π 
+1;g 
Dn
π 
+1)] 
− 
Gn(d;˜ 
E 
~[gDn
π 
+1)]) 
. 


n;d 
n+1( 
e n;d 
n+1( 
e 

Step 
2: 
Recursion 
for 
Vn(d~). 
Assume 
the 
existence 
of 
an 
optimal 
control 
law 
∗ 
and 
consider 
a 
control 
law 


40 



π 
that 
coincides 
with 
∗ 
after 
time 
n, 
i.e., 
k 
≡ 
k 
∗ 
, 
for 
k 
= 
n 
+1;:::;T 
− 
1. 
By 
denition, 
we 
then 
have 


(˜ 
(~(d~; 
π 
∗ 
);d˜ 
∈ 
e

Jn 
d; 
) 
≤ 
Vn 
d)= 
Jn 
Dn. 
Recall 
the 
denition 
of 
function 
sequences 
in 
(B). 
For 
the 
optimal 
control 
law 
∗ 
, 
let 


π 
∗ 


fn;k(d~; 
d~0) 
:= 
fπ 
∗ 
d; 
d~0);gn(d~) 
:= 
g 
(d~). 
(B.7)

n;k(˜ 
n 
Since 
π 
and 
∗ 
coincide 
after 
time 
n, 
for 
any 
De n+1 
2De n+1 
we 
have 
that 




Jn+1(De n+1; 
)= 
Vn+1(De n+1);fn+1;k(De n+1; 
d~0)= 
fn
π 
+1;k(De n+1; 
d~0);gn+1(De n+1)= 
gn+1(De n+1). 
In 
turn, 
using 
the 
recursion 
(B.6) 
for 
Jn(d; 
), 
we 
may 
write 
for 
d˜ 
2De n, 


n  

Vn(d~) 
= 
sup 
E 
n;d~[Vn+1(De n
π 
+1)] 
− 
E 
n;d~[fn+1;n+1(De n
π 
+1; 
De n
π 
+1)] 
− 
E 
n;d~[fn+1;n(De n
π 
+1; 
d~)] 
π 


 o 

− 
E 
Dn
π 
+1;gn+1(De
π 
(d;˜ 
E 
Dn
π 
+1)]) 
;

n;d~[Gn+1( 
e n+1)] 
− 
Gn 
n;d~[gn+1( 
e 

with 
the 
terminal 
condition 
VT 
(d~) 
= 
0, 
for 
d˜ 
2DT 
. 
The 
recursions 
and 
probabilistic 
representations 
of 
(fn;k(; 
d~0))0nT 
and 
(gn)0nT 
then 
follow 
from 
(B.4)-(B.5), 
and 
(B.7). 


Proof 
of 
Proposition 
4.1: 
Assuming 
the 
existence 
of 
an 
optimal 
control 
law 
∗ 
, 
the 
value 
function 
at 
time 
n 
+ 
1 
satises 


!2 

n+1(Dn+1) 
gn+1(De n+1)

Vn+1(De n+1)= 
fn+1;n+1(De n+1; 
De n+1)+ 
. 
2 
Xn+1 


Plugging 
the 
above 
expression 
into 
the 
HJB 
equation 
(B.2) 
gives 


!2n 
n(d) 
E 
n;d~[gn+1(De n
π 
+1)] 
o 

Vn(d~) 
= 
sup 
E 
n;d~[fn+1;n(De n
π 
+1; 
d~)] 
+ 
. 
(B.8) 


π 
2 
x 


Next, 
we 
look 
for 
a 
candidate 
optimal 
control 
law 
of 
form 
(B.1), 
i.e., 
n(d~) 
= 
~n(d)x. 
It 
then 
follows 
from 
Lemma 
B.1, 
along 
with 
(B.4), 
(B), 
and 
(B.7) 
that, 
for 
this 
candidate 
optimal 
law, 


2 


π 
x
n(d~0) 
x 


fn+1;n(d~; 
d~0)= 
an+1(d) 
− 
1 
− 
bn
π 
+1(d) 
;

00

x 
2 
x 


π 


gn+1(d~) 
= 
an+1(d)x. 


41 



Plugging 
the 
above 
expression 
into 
(B.8), 
using 
the 
wealth 
dynamics 
(3.1) 
and, 
for 
brevity, 
writing 
R 
for 




Rn+1, 
~n 
for 
~n(d), 
an+1 
for 
an+1(Dn+1), 
and 
bn+1 
for 
bn
π 
+1(Dn+1), 
yields 


nh Xπ 
Xπ 
2i h Xπ 
i2o 

n+1 

n(d) 
n+1 

n(d) 
n+1

Vn(d~) 
= 
sup 
E 
n;d˜ 
an+1 
− 
1 
− 
bn+1 
+ 
E 
n;d˜ 
an+1 
(B.9) 


π 
x 
2 
x 
2 
x 


nh i2o


n(d) 

n(d)

π 


= 
sup 
E 
˜ 
an+1(R 
+ 
Ze n+1~n) 
− 
1 
− 
bn+1(R 
+ 
Ze n+1~n)2 
+ 
E 
~[an+1(R 
+ 
Ze n+1~n)]

n;d 
n;d 


π 
22 
(B.10) 


nh i


n(d)

π 
bπ 
e 2 
Ze2 


= 
sup 
E 
n;d˜ 
an+1(R 
+ 
Ze n+1~n) 
− 
1 
− 
n+1(R2 
+2R~nZn+1 
+~nn+1) 
(B.11) 
π 
2 



n(d) 
 
π 
π 
e 2 
π 
e o 

+ 
R2(E 
~[an+1])2 
+2R~nE 
~[a 
~[aZn+1]+ 
˜ 
(E 
~[aZn+1])2 
=: 
sup 
hn(~n);
2 
n;d 
n;d 
n+1]E 
n;d 
n+1 
n 
n;d 
n+1 
π 
(B.12) 


where 
hn 
is 
a 
second 
order 
polynomial 
with 
derivative 


􀀀

π 


hn 
0 
(~n)= 
E 
~[an+1Ze n+1] 
− 
R
n(d) 
E 
~[bn+1Ze n+1] 
− 
E 
~[an+1]E 
~[an+1Ze n+1]

n;d 
n;d 
n;d 
n;d 


􀀀



− 

n(d) 
E 
n;d~[bn+1Ze 
n 
2+1] 
− 
(E 
n;d~[an+1Ze n+1])2 
~n. 


Ze2 
π 
e

By 
Jensen's 
inequality, 
E 
n;d~[bn+1 
n+1] 
− 
(E 
n;d~[an+1Zn+1])2 
> 
0, 
and 
solving 
for 
h0 
n(~n) 
= 
0 
yields 
the 
formulation 
in 
Proposition 
4.1. 
One 
can 
then 
easily 
check 
that 
this 
solves 
the 
HJB 
equation 
(B.2). 
To 
obtain 
the 
allocation 
formula 
(4.1), 
we 
rst 
use 
(A.3) 
and 
the 
law 
of 
iterated 
expectations 
to 
rewrite 
the 
identities 
in 
(A.2), 


π 
∗ 
π 
∗ 


a 


n(d)= 
En;d[En+1;Dn+1 
[1 
+ 
rn+1;T 
]] 
= 
En;d[1 
+ 
rn+1;T 
], 
az 


π 
∗ 
π 
∗ 


n 
(d)= 
En;d[Ze n+1En+1;Dn+1 
[1 
+ 
rn+1;T 
]] 
= 
En;d[Ze n+1(1 
+ 
rn+1;T 
)], 
bz 


π 
∗ 
π 
∗ 


n 
(d)= 
En;d[Ze n+1En+1;Dn+1 
[(1 
+ 
rn+1;T 
)2]] 
= 
En;d[Ze n+1(1 
+ 
rn+1;T 
)2], 
bz2 
Z2 
Z2

π 
∗ 
π 
∗ 


n 
(d)= 
En;d[ 
e n+1En+1;Dn+1 
[(1 
+ 
rn+1;T 
)2]] 
= 
En;d[ 
e n+1(1 
+ 
rn+1;T 
)2]. 


It 
then 
follows 
from 
the 
denition 
of 
variance 
and 
covariance 
that 


π 
∗ 


bz2 
az 


µ 
(d) 
− 
(µ 
(d))2 
= 
V 
arn;d[Ze n+1(1 
+ 
rn+1;T 
)];

nn 
bz 
aaz 


π 
∗ 
π 
∗ 


n 
(d) 
− 
n(d)n 
(d)= 
Covn;d[Ze n+1(1 
+ 
rn+1;T 
), 
1+ 
rn+1;T 
], 


and 
(4.1) 
is 
obtained 
by 
plugging 
the 
above 
into 
formula 
(A.1). 


42 



Proof 
of 
Proposition 
A.1: 
It 
follows 
directly 
from 
the 
proof 
of 
Proposition 
4.1. 


Proof 
of 
Lemma 
A.4: 
Observe 
that 
no 
short-selling 
and 
borrowing 
implies 
0 
≤ 
~∗ 
(d) 
≤ 
1. 
Let

n 


π 
∗ 


An(d) 
:= 
f1+ 
Ze n+1 
~(d) 
< 
0g;

n 


which, 
for 
any 
positive 
wealth 
level 
at 
time 
n, 
is 
the 
event 
of 
the 
wealth 
becoming 
negative 
at 
time 
n 
+ 
1. 
Recall 
from 
(A.4) 
the 
return 
moments 
an(d) 
and 
bn(d) 
for 
the 
optimal 
strategy 
∗ 
, 
and, 
for 
x> 
0, 
dene 
for 
o 
the 
return 
moments 




o 
o 


o 


an(d) 
:= 
En;x;d[1 
+ 
rn;T 
];bn
o 
(d) 
:= 
En;x;d 
(1 
+ 
rn;T 
)2 
, 


which 
are 
independent 
of 
the 
value 
of 
x. 
This 
is 
because 
the 
probability 
of 
the 
wealth 
becoming 
negative, 


􀀀 

Pn;x;d 
Xo 
< 
0 
for 
some 
k 
2fn 
+1;:::;T 
− 
1} 
, 
is 
independent 
of 
the 
value 
of 
x> 
0.

k 


We 
use 
induction 
to 
show 
that, 
for 
any 
d 
2Dn, 


􀀀 􀀀 

o 


e

ja 
(d) 
− 
an(d)j≤ 
2 
T 
− 
(n 
+ 
1) 
KT 
􀀀nPn;d 
Zn+1 
< 
􀀀1 
:= 
Kn:

n 


􀀀  

where 
K 
:= 
maxy2Y 
1+ 
r(y)+ 
E 
Ze 1 
jY0 
= 
y 
is 
a 
constant. 
First, 
for 
n 
= 
T 
− 
1, 
we 
have 
ao 
(d)= 
an(d).

n 


Then, 
for 
a 
general 
n 
2f0, 
1;:::;T 
− 
2g, 
we 
have 


   

oo 
o 


an(d)= 
En;d 
(Rn+1 
+ 
Ze n+1~n 
∗ 
(d))an+1(Dn+1)1A 
n
c 
+ 
En;d 
(Rn+1 
+ 
Ze n+1~n 
∗ 
(d))an+1(Dn+1)1An 


  

oo 


= 
En;d 
(Rn+1 
+ 
Ze n+1˜ 
∗ 
(d))an+1(Dn+1) 
− 
En;d 
(Rn+1 
+ 
Ze n+1˜ 
∗ 
(d))an+1(Dn+1)1An

nn 
 T 
􀀀1 


 Y 

π 
∗ 


+ 
En;d 
(Rn+1 
+ 
Ze n+1 
~n(d)) 
Rk+1 
1An 
, 
k=n+1 


∗ 
e

so, 
assuming 
the 
conjecture 
to 
hold 
for 
n 
+ 
1, 
and 
by 
using 
0 
≤ 
~n 
≤ 
1, 
Rn+1 
= 
1+ 
rn+1, 
and 
that 
Zn+1 


43 



has 
mean 
n+1 
− 
rn+1, 
we 
obtain 


  

oo

π 
∗ 
π 
∗ 


jan(d) 
− 
an(d)j≤ 
Kn+1En;d 
jRn+1 
+ 
Ze n+1 
~n(d)| 
+ 
En;d 
jRn+1 
+ 
Ze n+1 
~n(d)jan+1(Dn+1)1An 


 T 
􀀀1

h Yi 

+ 
En;d 
jRn+1 
+ 
Ze n+1~n 
∗ 
(d)| 
Rk+1 
1An 
k=n+1 
≤ 
Kn+1K 
+2KT 
􀀀nPn;d(Ze n+1 
< 
􀀀1) 


≤ 
2(T 
− 
(n 
+ 
2))KT 
􀀀nPn;d(Ze n+1 
< 
􀀀1) 
+ 
2KT 
􀀀nPn;d(Ze n+1 
< 
􀀀1) 


= 
Kn. 


A 
similar 
result 
can 
be 
derived 
for 
the 
second 
moment 
bo(d). 
The 
results 
for 
the 
variance 
and 
objective 
functional 
then 
follow. 


az

Proof 
of 
Lemma 
A.2: 
The 
formulas 
for 
µ 
(d) 
follow 
directly 
from 
(A.2)-(A.3) 
and 
the 
denition 
of 
the

n 


random 
variable 
Dn+1. 
In 
part 
(a), 
the 
value 
of 
n+1 
is 
determined 
by 
(Y(n+1);Z(n+1);(n+1)), 
because 
the 
interaction 
schedule 
(Tk)k0 
is 
adapted 
to 
the 
ltration 
(Fn)n0 
in 
(3.2). 
Conditionally 
on 
n+1 
= 
n 
+ 
1, 
the 
value 
of 
n+1 
is 
determined 
by 
(Y(n+1);Z(n+1);(n+1)) 
for 
the 
same 
reason. 
In 
part 
(b), 
(5.1) 
and 
(5.2) 
yield 
that 
if 
n+1 
= 
n 
+ 
1, 
then 


P


Z 


n 
k+1 

¯ 
n+1(Yn+1) 
n+1

n+1􀀀n 
n 


n+1 
= 
e 


e 


k=n 



Z 
, 


n 



¯ 
n 
(Yn 
) 


where 

n
Z 
+1 
and 

Z 
depend 
on 
fYn􀀀;:::;Yn} 
and 
fZn􀀀+1;:::;Zn+1g, 
and 
n 
= 
φ 
− 
1 
is 
the 
interaction 


n 


time 
prior 
to 
n 
+ 
1. 
Proof 
of 
(4.3): 
The 
optimal 
allocation 
in 
Proposition 
4.1 
can 
be 
written 
as 


hih ihi 

  

En;d 


e

Zn+1 
~n+1 


r~

π 
∗ 


n+1;T 


e

Zn+1 
~n+1 


(~r

π 
∗ 


n+1;T 


)2

e

Zn+1 
~n+1 


r~

π 
∗ 


n+1;T 


π 
∗ 


En;d 


− 
En;d 


En;d

− 
Rn+1
n 


r~

~n+1 


n+1;T 


˜ 
∗ 


n

(d)= 
h 

2i h 

i2 


. 


2 


n+1


n

e

Zn+1 
n+1 


r˜ 


e

Zn+1 
n+1 


r~

∗ 


n+1;T 


∗ 


n+1;T

En;d 


− 


En;d 


This 
simplies 
to 
formula 
(4.3) 
under 
the 
assumption 
of 
Corollary 
4.2, 
in 
which 
case 
the 
expected 
values 
in 
the 
previous 
formula 
factor 
into 
products 
of 
expectations. 


44 



C 
Proofs 
and 
Auxiliary 
Results 
for 
Section 
5 


Proof 
of 
Proposition 
5.1: 
From 
the 
denitions 
of 

n 
and 

C 
, 
it 
follows 
that

n 


T 
􀀀1 
hi

X 
id

1 


n

R(, 
)= 
E 
− 
1 
. 
(C.1)


id 

Z

T 


n 
n

n=0 


Let 
Y0 
= 
y0 
and 
extend 
the 
probability 
space 
(
, 
F, 
P) 
to 
include 
an 
independent 
sequence 
of 
random 
variables 
(Zn)n0, 
such 
that 
Zn 
N 
(~(y0);2(y0)). 
For 
a 
given 
n, 
dene 
the 
event 
An 
:= 
fYn􀀀φ 
= 
· 
= 
Yn􀀀1 
= 
y0g, 
on 
which 
the 
economic 
state 
variable 
is 
xed. 
We 
then 
have 


h 
id 
i h􀀀 
1 
Pn􀀀1 
 P 
n􀀀1 
i􀀀  
E 
n 
− 
1= 
E 
e 
β 
k=n􀀀φ 
Zk+1􀀀k+1 
+ 
k=n 
k+1 
− 
1 
An 
+ 
O 
1 
− 
P 
n􀀀1 
;


id 

Zy0;y0 
n 
n 


􀀀1

where 
Py
τ 
0 
n 
;y0 
:= 
(P 
n􀀀1)y0;y0 
is 
the 
probability 
of 
staying 
in 
state 
y0 
from 
time 
zero 
to 
time 
n 
− 
1. 
For 
the 
rst 
term 
appearing 
in 
the 
exponent, 
we 
have 


X􀀀1

 n 
 

1 
22 


0

Zk+1 
− 
k+1 
An 
N 
0;. 


φ 


k=n􀀀φ 


For 
the 
second 
term, 
we 
dene 
the 
random 
variable 
J 
:= 
jfn 
≤ 
k 
≤ 
n 
− 
1: 
k+1 
6=0g| 
∼ 
Bin(n 
− 
n;p), 
which 
is 
equal 
to 
the 
number 
of 
idiosyncratic 
risk 
aversion 
jumps 
between 
times 
n 
and 
n. 
Hence, 


n􀀀1 
 

 


X k+1 
fJ 
= 
jgN 
− 
j2 
, 
j 
2 
. 


2 


k=n 


For 
Z 
N 
(0, 
1), 
a 
∈ 
R, 
and 
b 
≥ 
0, 
we 
have 
E[jea+bZ 
− 
1j]= 
bE[jZj]+ 
O(ja| 
+ 
b2). 
Therefore, 
conditioning 
on 
the 
value 
of 
J 
and 
using 
the 
absolute 
Gaussian 
moment 
formula 
gives 


s

r

h 
id 
i 

2 
0 
22 


n 
􀀀10 
􀀀1

E 
− 
1= 
(1 
− 
p)n􀀀n 
√ 
+(n 
− 
n)p(1 
− 
p)n􀀀n 
+ 
2 
++ 
O(1 
− 
P 
n 
);


id 

Z 
y0;y0

φ 


n 
n 


where 
we 
have 
denoted 
by 
Θ 
a 
term 
of 
order 
O(p2 
2 
+ 
2). 
Next, 
plugging 
the 
above 
expression 
into 
(C.1), 
and 
noting 
that 
the 
sum 
is 
the 
same 
for 
each 
interval 
bounded 
by 
consecutive 
times 
of 
interaction, 
we 
obtain 


s

r 

􀀀1 
􀀀1 


Tφ 
21 
0 
X 202 
X 

R(, 
) 
√ 
(1 
− 
p)n 
++ 
 
2 
np(1 
− 
p)n􀀀1 
++ 
O(1 
− 
Py
T 
0 
− 
;y
φ 
0 
􀀀1)

Tφ 
φ 


n=0 
n=0 


s

r 



Tφ 
21 
0 
1 
− 
(1 
− 
p)φ 
22 
1 
− 
(1 
− 
p)φ 
− 
(1 
− 
p)􀀀1p

0 


= 
√ 
++ 
 
2 
++ 
O(1 
− 
Py
T 
0 
− 
;y
φ 
0 
􀀀1)

Tφ 
p 
p 


Tφ 


e

= 
R(, 
)++ 
O(1 
− 
P 
T 
􀀀1 
);

y0;y0

T 


45 



where 
the 
nal 
equality 
follows 
from 
using 
a 
third-order 
Taylor 
approximation 
for 
(1 
− 
p)φ 
and 
the 
fact 
that 
P 
T 
􀀀􀀀1 


is 
increasing 
in 
φ 
≥ 
1. 
The 
upper 
bound 
in 
(5.5) 
follows 
from 
a 
symmetric 
argument. 


y0;y0 


Next, 
to 
show 
that 
there 
exists 
a 
unique 
minimizing 
φ 
for 
Re
(, 
), 
we 
dene 
the 
function 


s

r 

2 
e 0 
 φ 
− 
1 
 22 
φ 
− 
1

0

f() 
:= 
R(, 
)= 
√ 
1 
− 
p 
++ 
2 
p. 


φ 
2 
φ 
2 


Observe 
that 
f 
≥ 
0 
and 
that 
if 
p 
= 
0 
and 
β 
= 
0, 
then 
f 
≡ 
0. 
If 
p 
= 
0 
and 
> 
0, 
then 
f 
is 
strictly 
decreasing 
for 
φ 
≥ 
1, 
and 
converges 
to 
zero 
as 
φ 
!1. 
If 
β 
= 
0 
and 
p 
> 
0, 
then 
f 
is 
strictly 
increasing 
for 
φ 
≥ 
1, 
and 
equal 
to 
zero 
for 
φ 
= 
1. 
Furthermore, 


s



1 
0 
φ 
− 
1 
0 
p 
1 
22 
φ 
− 
1 
22 
p

00

f0()= 
− 
1 
− 
p 
􀀀√ 
− 
q p 
++ 
2 




2 
3=2 
2 
φ 
2 
20
2 
2 
2 
φ 
2

2+ 
2 


 


s

p

 p 

1 
0p 
φ 
11 
 
2φ 
1 
0p

3=2 


= 
− 
+1 
− 
q (φ 
− 
1)+ 
1+ 
− 
1 
=: 
g(), 


2

2 
2 
p 
2 
φ 
22 
2 
2 


1+ 
0

 


22 


0 


 


and 
it 
follows 
that 
the 
derivative 
of 
f 
at 
φ 
= 
1 
satises 


 


s



1 
2 
1 
p2 
1



f0(1) 
= 
0p 
1+ 
− 
1 
􀀀≥ 
0 
(⇒ 
≥ 
2+ 
. 


2 
22 
p 
22 
p

00 


Observe 
that, 
since 
the 
value 
p 
is 
in 
general 
small, 
we 
have 
p2 
1 
p 
p

 


≥ 
2+ 
(⇒ 
≥ 
1+2p 
≈ 
1, 
(C.2)

22 
p 
0

0 


which 
shows 
that 
p=(0) 
> 
1 
is, 
at 
this 
approximation 
level, 
a 
sucient 
and 
necessary 
condition 
for 
f0(1) 
< 
0. 
Furthermore, 


s

h 

1 
􀀀1=2 
11 
p i0 
3 
 
21=2 
1 
 
2 
3=2 


g 
0()= 
− 
+1 
− 
q (φ 
− 
1)+ 
1+ 
− 
1+ 
q

2φ 
2 
22 
2φ 
22 


1+ 
0 
2 
1+ 
0

2 
p 
2 


22 


0 


22 


0

s

 

11 
2 
1 


􀀀1=2 
􀀀1=2

− 
+ 
1+ 
− 
1 
φ 
≥ 
g(1). 


2 
p 
22 
2

0 


It 
then 
follows 
that 
if 
g(1) 
≥ 
0, 
then 
g0() 
≥ 
0, 
for 
all 
φ 
≥ 
1. 
Hence, 
f0() 
≥ 
0 
for 
all 
φ 
≥ 
1, 
and 
f 
is 
minimized 
for 
φ 
= 
1. 
If 
g(1) 
< 
0, 
and 
thus 
f0(1) 
< 
0, 
it 
can 
be 
shown 
that 
g 
is 
strictly 
convex 
and 
g() 
!1, 
as 
φ 
!1. 
Hence, 
there 
exists 
a 
unique 
point 
where 
g() 
= 
0, 
and 
where 
f 
is 
minimized. 
Finally, 
from 
the 
form 
of 
the 
function 
f, 
it 
is 
easy 
to 
see 
the 
sign 
of 
the 
derivatives 
of 
the 
optimal 
value 
of 
φ 
with 
respect 
to 


46 



, 
0;p, 
and 
. 


aa

Proof 
of 
(5.7): 
For 
the 
two 
investment 
strategies 
we 
denote 
the 
coecient 
µ 
(Dn) 
in 
(A.2) 
by 
µ 
(
n)

nn 
a

and 
µ 
(
C 
), 
and 
show 
inductively 
that

nn 




22 


aa

E[jµ 
(
n) 
− 
µ 
(
C 
)j]= 
O((φ 
− 
1)p 
2)+ 
O:

n 
nn 


2 


2

b 
az 
az 
bz

Analogous 
identities 
can 
be 
obtained 
for 
µ 
, 
µ 
, 
µ 
, 
and 
µ 
. 
One 
may, 
then, 
inductively 
show 
that

nnn 
n 





C 
22 


n

˜ 
∗ 
(
n)= 
˜ 
∗ 
(
C 
)+ 
O((φ 
− 
1)p 
2)+ 
O2 
;

n 
nn


n 


and 
the 
result 
follows. 


The 
following 
proposition 
shows 
that 
there 
exists 
a 
one-to-one 
relation 
between 
risk 
aversion 
processes 
and 
investment 
strategies 
that 
depend 
only 
on 
time 
and 
the 
economic 
state. 
For 
such 
investment 
strategies, 
the 
proof 
shows 
how 
the 
corresponding 
risk 
aversion 
process 
can 
be 
constructed 
using 
backward 
induction. 


Proposition 
C.1. 
Fix 
a 
sequence 
(~n)0n<T 
, 
with 
~n 
: 
Y 
7
→ 
R0+ 
. 
Then, 
there 
exists 
a 
unique 
risk 
aversion 
process 
(
n)n0, 
with 

n 
: 
Y 
7
→ 
R0+ 
, 
such 
that 
(~n)0n<T 
is 
the 
optimal 
relative 
risky 
asset 
allocation 
corresponding 
to 
(
n)0n<T 
. 


Proof 
of 
Proposition 
C.1: 
We 
construct 
the 
process 
(
n)0n<T 
using 
backward 
induction. 
First, 
for 
n 
= 
T 
− 
1, 
we 
have 

n(y)= 
~(y)=(~n(y)2(y)). 
For 
n<T 
− 
1, 
consider 
the 
function 


 a 
 a 
ba

1 
~(y) 
µ 
− 
R(y)x(µ 
− 
(µ 
)2)

n 
nnn

h 
:0, 
7
→ 
(􀀀~n(y), 
1);h(x)= 
2 
− 
~n(y);
R(y) 
b 
− 
(a 
)2 
x2(y) 
~(y)

nn 


b 
+(b 
− 
(a 
)2)

n(y) 
nn 


aa 
bb

where 
R(y) 
:=1+ 
r(y), 
µ 
= 
µ 
(y), 
and 
µ 
= 
µ 
(y). 
The 
function 
h 
is 
strictly 
decreasing 
on 
its 
domain,

nn 
nn 
and 
we 
set 
the 
value 
of 

n(y) 
to 
be 
the 
unique 
root 
of 
h. 
Using 
Proposition 
A.1 
and 
(4.3), 
it 
is 
simple 
to 
check 
that 
(~n)0n<T 
is 
the 
optimal 
allocation 
corresponding 
to 
the 
constructed 
process 
(
n)0n<T 
. 


In 
the 
following 
lemma, 
we 
compute 
the 
Sharpe 
ratio 
(5.9) 
for 
a 
strategy 
π 
of 
the 
form 


~n 
= 
(Yn). 
(C.3) 


That 
is, 
at 
any 
time 
n, 
in 
economic 
state 
y 
2Y, 
the 
proportion 
of 
wealth 
invested 
in 
the 
risky 
asset 
is 
given 
by 
(y), 
for 
some 
function 
: 
Y 
7
→ 
R0+ 
. 
For 
brevity, 
we 
write 
¯ 
y 
for 
(y). 
Additionally, 
we 
denote 
the 
mean 


47 



~(y) 
and 
standard 
deviation 
(y) 
of 
excess 
market 
returns 
by 
~y 
and 
y, 
respectively, 
and 
the 
stationary 
distribution 
of 
the 
Markov 
chain 
(Yn)n0 
by 
(y)y2Y 
. 


48 



Lemma 
C.2. 


(a) 
The 
Sharpe 
ratio 
(5.9) 
of 
the 
strategy 
π 
in 
(C.3) 
satises 
P 

π 


π 
˜ 
y2Y 
y~y¯ 
y 


s 
= 
= 
(C.4)

qP􀀀 . 


π 


y 
22 
+ 
(~y¯ 
y 
− 
~)2 


y2Y 
yy 


Moreover, 


~y 
y0 


0

(i) 
s 
π 
≤ 
max 
, 
(ii) 
s 
π 
􀀀→ 
q , 
if 
~y 
!1;
P 

y2Y 
y 


y0 
(1 
− 
y0 
)2 
+ 
2 


y0 
y6=y0 
y 


and 
the 
maximum 
in 
(i) 
is 
achieved 
if 
and 
only 
if 
jY| 
=1. 


(b) 
If 
jY| 
=2 
and 
¯ 
2 
= 
¯ 
1(1 
+ 
), 
formula 
(C.4) 
can 
be 
written 
as 
1 


s 
π 
∗ 
= 
q , 
(C.5)

2(1) 
1􀀀2+2b2(1+)2 
1􀀀2+2a2(1+)2 


+ 
− 
1 


~2(1) 
(1+2(a(1+)􀀀1))2 
(1+2(a(1+)􀀀1))2 


where 
a 
:= 
~(2)=~(1) 
and 
b 
:= 
~(2)=~(1). 


The 
previous 
lemma 
shows 
that 
the 
Sharpe 
ratio 
of 
π 
is 
bounded 
by 
the 
largest 
market 
Sharpe 
ratio, 
and 
is 
equal 
to 
the 
market 
Sharpe 
ratio 
in 
the 
case 
of 
a 
single 
economic 
state. 
From 
(i) 
it 
also 
follows 
that 
if 
all 
states 
have 
the 
same 
market 
Sharpe 
ratio 
> 
0, 
then 
the 
Sharpe 
ratio 
of 
π 
is 
strictly 
smaller 
than 
. 
This 
can 
be 
seen 
by 
looking 
at 
the 
contribution 
of 
state 
y 
to 
the 
variance 
in 
the 
Sharpe 
ratio 
formula 
(C.4), 
which 
consists 
of 
a 
\within-state” 
variance 
term, 
y 
2¯ 
y 
2 
, 
and 
a 
\between-state” 
variance 
term, 
(~y¯ 
y 
− 
~)2 
, 


P



where 
~= 
y~y¯ 
y 
is 
the 
mean 
excess 
return 
of 
the 
strategy. 
Without 
the 
between-state 
term, 
the 


y2Y 


Sharpe 
ratio 
of 
π 
would 
be 
equal 
to 
. 


The 
between-state 
variance 
term 
is 
also 
the 
reason 
why 
a 
larger 
expected 
return 
in 
a 
given 
economic 
state 
does 
not 
always 
translate 
into 
a 
higher 
Sharpe 
ratio 
of 
, 
as 
can 
be 
seen 
from 
the 
limit 
in 
(ii). 
More 
concretely, 
if 
jY| 
= 
2, 
the 
Sharpe 
ratio 
converges 
to 
p2=1 
if 
~2 
!1. 
Hence, 
if 
2 
is 
small, 
i.e., 
if 
little 
time 
is 
spent 
in 
state 
y 
= 
2, 
then 
the 
Sharpe 
ratio 
eect 
of 
higher 
expected 
returns 
in 
this 
state 
is 
dominated 
by 
the 
eect 
of 
increasing 
between-state 
variance. 
In 
Lemma 
C.3, 
we 
focus 
on 
the 
case 
of 
two 
economic 
states, 
and 
study 
the 
sensitivity 
of 
the 
Sharpe 
ratio 
of 
π 
with 
respect 
to 
the 
model 
parameters. 


49 





Proof 
of 
Lemma 
C.2: 
Using 
that 
the 
portfolio 
return 
rn;n+1 
is 
independent 
of 
the 
investment 
horizon 
T 
and 
that 
Yn 
converges 
in 
distribution 
to 
a 
random 
variable 
with 
distribution 
(y)y2Y 
, 
we 
have 


X 

π 
π 


˜ 
= 
lim 
E[rn;n+1 
− 
rn+1]= 
E[r0;1 
− 
r1jY0 
∼ 
]= 
y~y¯ 
y, 


n!∞ 
y2Y 


X􀀀 



()2 
= 
lim 
E[(rn;n+1 
− 
rn+1 
− 
~)2]= 
E[(r0;1 
− 
r1 
− 
~)2jY0 
∼ 
]= 
y 
y 
2¯ 
y 
2 
+ 
(~y¯ 
y 
− 
~)2 
. 


n!∞ 
y2Y 


By 
Jensen's 
inequality 
we 
deduce 


PP 

y~y¯ 
y 
y~y¯ 
y

y2Y 
y2Y 
1 
~y

s 
π 
≤ 
qP ≤ 
P = 
P ≤ 
max 
. 


1 
y~y¯ 
y

22 
yy¯ 
y 
P 
y

y 
¯ 
y2Y 
y2Y 


y2Y 
yy 
y2Y 
~y=y 
y˜ 
0 
¯ 
0

y02Y 
yy 


0

If 
~y 
!∞ 
for 
some 
y0 
2Y, 
then 


y0 
¯ 
y0 
y0 
s 
π 
􀀀→ 
q = 
q :

PP 

y0 
(y0 
− 
y0 
¯ 
y0 
)2 
+ 
=y0 
y2 
0 
2 
0 
y0 
(1 
− 
y0 
)2 
+ 
2 
0 
=y0 
y

y6 
yy 
yy6 


The 
special 
case 
in 
part 
(b) 
follows 
by 
simple 
calculations. 


Lemma 
C.3. 
Let 
u 
:= 
((1)=~(1))2 
. 
We 
have 
the 
following 
characterizations 
for 
the 
sensitivities 
of 
the 


π 
∗ 


Sharpe 
ratio 
s 
() 
dened 
in 
(C.5): 


@sπ 
∗ 
() 
1+ 
uλ 


> 
0 
(⇒ 
a< 
+ 
ub2(1 
+ 
);

@a 
1+ 
δ 
1 
− 
λ 
@sπ 
∗ 
() 


< 
0 
(⇒ 
b> 
0;

@b 


2

@sπ 
∗ 
()(a 
+ 
ub2)(1 
+ 
)2 
− 
(1 
+ 
u)(2a(1 
+ 
) 
− 
1)

> 
0 
(⇒ 
> 
;

@λ 
(a(1 
+ 
) 
− 
1)((a2 
+ 
ub2)(1 
+ 
)2 
− 
(1 
+ 
u)) 
@sπ 
∗ 
() 
 b2 
 

> 
0 
(⇒ 
1+ 
u>a 
1+ 
u 
(1 
+ 
). 


@δ 
a2 


Furthermore, 


r 

π 
∗ 
λ 
π 
∗ 
π 
∗ 
~(1) 
π 
∗ 
~(2)

lim 
s 
()= 
, 
lim 
s 
()=0;s 
()= 
;s 
()= 
:

=0 
=1

a!∞ 
1 
− 
λ 
b!∞ 
(1) 
(2) 


The 
inequality 
conditions 
for 
the 
parameters 
in 
the 
previous 
lemma 
are 
not 
restrictive. 
For 
instance, 
let 
us 
consider 
the 
values 
of 
the 
derivatives 
in 
the 
case 
δ 
= 
0, 
which 
corresponds 
to 
equal 
market 
allocation 
in 


50 



both 
states. 
First, 
for 
the 
a-derivative, 
we 
have 


@sπ 
∗ 
() 
λ 


> 
0 
(⇒ 
a< 
1+ 
u 
+ 
ub2 
< 
1+ 
u;

@a 
1 
− 


=0 


which 
is 
trivially 
satised 
for 
realistic 
parameter 
values.30 
Next, 
for 
the 
-derivative, 
we 
consider 
two 
cases: 


8 > 1

@sπ 
∗ 
() 
a2 
+ 
ub2 
− 
(1 
+ 
u)(2a 
− 
1) 
< a+1 
;b 
= 
a, 


> 
0 
(⇒ 
> 
= 


@λ 
(a 
− 
1)(a2 
+ 
ub2 
− 
(1 
+ 
u)) 
> a􀀀(1+u) 
√ 


=0 
: ;b 
= 
a. 


a(a+u)􀀀(1+u) 


First, 
in 
the 
case 
b 
= 
a, 
the 
market 
Sharpe 
ratio 
is 
the 
same 
in 
both 
states. 
The 
Sharpe 
ratio 
of 
∗ 
is 
then 
maximized 
for 
λ 
2f0, 
1g, 
in 
which 
case 
it 
is 
equal 
to 
the 
market 
Sharpe 
ratio, 
while 
for 
0 
<< 
1 
the 
Sharpe 
ratio 
is 
strictly 
lower 
(see 
discussion 
following 
Lemma 
C.2), 
and 
it 
is 
minimized 
at 
λ 
=1=(a 
+ 
1). 
We 
also 


√ 


consider 
the 
case 
b 
= 
a, 
and 
assume 
a> 
1, 
leading 
to 
a 
higher 
market 
Sharpe 
ratio 
in 
the 
recessionary 
state, 
consistent 
with 
empirical 
evidence. 
(The 
case 
a< 
1 
can 
be 
similarly 
analyzed.) 
The 
portfolio's 
Sharpe 
ratio 
is 
then 
increasing 
in 
λ 
for 
0 
<< 
1, 
because, 
as 
mentioned 
above, 
the 
condition 
a< 
1+ 
u 
is 
in 
general 


0:15 
1=2

satised. 
Note 
that 
for 
the 
parameter 
values 
in 
(5.13), 
b 
≈ 
a 
<a 
, 
and 
the 
portfolio's 
Sharpe 
ratio 
is 
increasing 
for 
0 
<< 
1. 


Finally, 
for 
the 
-derivative, 
we 
assume 
that 
~(1) 
<(1), 
which 
typically 
holds 
for 
stock 
market 
returns. 
For 
a 
xed 
value 
of 
b> 
0, 
one 
can 
then 
show 
that 
the 
right-hand 
side 
of 
the 
inequality 
is 
decreasing 
in 
a 
for 
0 
<a<a0(b), 
with 
a0(b) 
:= 
b(1)=~(1), 
and 
is 
increasing 
in 
a, 
for 
a>a0(b). 
The 
inequality 
is 
clearly 
not 
satised 
for 
a 
= 
b 
and 
is 
satised 
for 
a 
= 
a0(b) 
if 
and 
only 
if 


√ 


1+ 
u> 
2b 
u. 


The 
above 
inequality 
holds 
for 
standard 
parameter 
values, 
such 
as 
those 
in 
(5.13) 
with 
monthly 
portfolio 
rebalancing. 
In 
other 
words, 
there 
exists 
a 
threshold 
a 
(b) 
>b 
that 
a 
needs 
to 
exceed 
for 
sπ 
∗ 
() 
to 
be 


(b) 
>a 
(b),

increasing 
at 
δ 
= 
0. 
Notably, 
there 
also 
exists 
an 
upper 
threshold 
a 
(b) 
such 
that 
if 
a 
≥ 
a 
then 
the 
condition 
is 
no 
longer 
satised.31 
These 
thresholds 
are 
due 
to 
the 
between-state 
variance 
of 
portfolio 
returns, 
and 
we 
again 
refer 
to 
the 
discussion 
following 
Lemma 
C.2 
for 
more 
details. 


30For 
example, 
for 
the 
parameter 
values 
in 
(5.13) 
and 
monthly 
portfolio 
rebalancing, 
a 
≈ 
2:1 
and 
u 
≈ 
66:2. 
31For 
plausible 
values 
of 
the 
parameters, 
such 
as 
those 
in 
(5.13), 
the 
upper 
bound 
is 
very 
large 
and 
not 
exceeded. 


51 



Proof 
of 
Lemma 
C.3: 
To 
show 
the 
result 
for 
the 
a-derivative, 
let 


2

(1 
− 
)(1 
+ 
u)+ 
(a 
+ 
ub2)(1 
+ 
)2 
(1 
− 
)(1 
+ 
u)+ 
ub2(1 
+ 
)2 
+ 
a2(1 
+ 
)2 


h(a, 
, 
):= 
= 


(1 
+ 
(a(1 
+ 
) 
− 
1))2 
(1 
− 
λ 
+ 
a(1 
+ 
))2 
c0 
+ 
c1a2 
=: 
;

(d0 
+ 
d1a)2 


π 
∗ 


and 
note 
that 
s 
() 
in 
(C.5) 
is 
increasing 
in 
a 
if 
and 
only 
if 
h 
is 
decreasing 
in 
a. 
We 
then 
have 
@h(a, 
, 
)2c1a(d0 
+ 
d1a)2 
− 
2(d0 
+ 
d1a)d1(c0 
+ 
c1a2)2c1a(d0 
+ 
d1a) 
− 
2d1(c0 
+ 
c1a2) 


== 
;

@a 
(d0 
+ 
d1a)4 
(d0 
+ 
d1a)3 
@h(a;;)

and 
the 
result 
is 
obtained 
by 
solving 
< 
0 
for 
a. 
The 
results 
for 
the 
-and 
-derivatives 
are 
obtained

@a 
π 
∗ 


in 
the 
same 
way 
by 
noting 
that 
s 
() 
is 
decreasing 
in 
λ 
and 
δ 
if 
and 
only 
if 
h 
is 
decreasing 
in 
λ 
and 
. 
The 


π 
∗ 


rest 
of 
the 
lemma 
follows 
directly 
from 
the 
formula 
for 
s 
(). 

